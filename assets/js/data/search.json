[ { "title": "GPUé€šä¿¡å…ƒè¯­", "url": "/posts/GPU%E9%80%9A%E4%BF%A1%E5%85%83%E8%AF%AD/", "categories": "ä¸“ä¸šç§¯ç´¯, LLMæ¨ç†", "tags": "LLM", "date": "2025-07-13 15:46:00 +0800", "snippet": "æ€»è§ˆéšç€æ¨¡å‹è¶Šæ¥è¶Šå¤§ï¼Œå•å¡çš„ç®—åŠ›å’Œæ˜¾å­˜å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå¤šå¡å¹¶è¡Œé¡ºåŠ¿è€Œç”Ÿã€‚é€šä¿¡åœ¨å¤šå¡å¹¶è¡Œä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œå¯¹æ€§èƒ½ä¹Ÿæœ‰å½±å“ã€‚æœ¬æ–‡æ€»ç»“ä¸€äº›å¸¸è§çš„é€šä¿¡å…ƒè¯­ï¼Œæ›´å¤šå…³æ³¨äºæ¨ç†ï¼ˆè€Œä¸æ˜¯è®­ç»ƒï¼‰ã€‚å¤šå¡å¹¶è¡Œä¸­å¸¸è§çš„é€šä¿¡å…ƒè¯­é€šä¿¡å…ƒè¯­BroadcastScatterReduceAllReduceé€šä¿¡é‡ï¼šæ•°å­¦æ€§è´¨(å‚è€ƒ)ï¼šAllReduce = reduceScatter + allGatherå…¸å‹ä½¿ç”¨åœºæ™¯ï¼šTPåçš„åŠ å’Œè§„çº¦ã€‚GatherAllGatherReduceScatterAlltoAllhttps://images.nvidia.com/events/sc15/pdfs/NCCL-Woolley.pdfhttps://www.zhihu.com/search?type=content&amp;amp;q=moe%20alltoallhttps://blog.csdn.net/daydayup858/article/details/149742695ä»é›¶å®ç°ä¸€ä¸ªMOEï¼ˆä¸“å®¶æ··åˆæ¨¡å‹ï¼‰ - KaiHçš„æ–‡ç«  - çŸ¥ä¹https://zhuanlan.zhihu.com/p/701777558DeepSeekæ¨¡å‹MOEç»“æ„ä»£ç è¯¦è§£ - AIå¸ƒé“Mr.Jinçš„æ–‡ç«  - çŸ¥ä¹https://zhuanlan.zhihu.com/p/1896490149577200132MoE è®­ç»ƒåˆ°åº•æ˜¯å¼€ TP è¿˜æ˜¯ EPï¼Ÿ - xffxffçš„æ–‡ç«  - çŸ¥ä¹https://zhuanlan.zhihu.com/p/13997146226å½»åº•ææ‡‚MoEçš„EPå¹¶è¡Œï¼ˆåŸºäºvLLMï¼‰ - ä¹å±±æµ·çš„æ–‡ç«  - çŸ¥ä¹https://zhuanlan.zhihu.com/p/1911059432953061899https://zhuanlan.zhihu.com/p/681692152https://www.zhihu.com/search?type=content&amp;amp;q=moe%20%E5%B9%B6%E8%A1%8Chttps://www.zhihu.com/search?type=content&amp;amp;q=moe%20%E5%B9%B6%E8%A1%8Chttps://mp.weixin.qq.com/s/9oPHFf519DLX1ictcnirXQhttps://apxml.com/courses/mixture-of-experts/chapter-4-scaling-moe-distributed-training/all-to-all-communication-moeè¿™ä¸€æ®µç»ˆäºç»™æˆ‘çœ‹æ‡‚äº†ã€‚è‡³äºEPå’ŒDPä¸ºä»€ä¹ˆä¹ æƒ¯ç»„åˆåœ¨ä¸€èµ·ç”¨å…ˆä¸è°ˆï¼Œå½“è¿™äºŒè€…åœ¨ä¸€èµ·ç”¨æ—¶ï¼Œæ˜¯æ€ä¹ˆä¸ªé€»è¾‘ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªæ—¶å€™ä¼šç”¨åˆ°AlltoAllï¼Œå€’æ˜¯ç»ˆäºæŠ“åˆ°äº†ç‚¹çœ‰ç›®ã€‚é¦–å…ˆç†è§£è¿™ä¸ªalltoallï¼Œå…ˆä¸è¦å›°åœ¨è®¡ç®—å½¢å¼ä¸Šï¼Œè€Œæ˜¯æƒ³å®ƒçš„è®¡ç®—æœ¬è´¨ï¼šæ¯ä¸ªdeviceéƒ½æƒ³å°†å®ƒçš„subsetå‘åˆ°æ¯ä¸€ä¸ªå…¶ä»–deviceä¸Šï¼ˆåŒ…æ‹¬å®ƒè‡ªå·±ï¼‰ï¼Œæ¯ä¸ªdeviceéƒ½æ¥æ”¶æ¥è‡ªå…¶ä»–deviceçš„subset. è¿™é‡Œä¸€ä¸ªAllæ˜¯dp rankï¼Œä¸€ä¸ªallæ˜¯ep rank ï¼ˆåœ¨è¿™ä¸ªè¯­å¢ƒä¸‹ï¼Œå¼ºè°ƒi, jå¯¹åº”å…³ç³»çš„ï¼Œéƒ½æ˜¯è™šå¼ å£°åŠ¿äº†ã€‚ï¼‰è€ƒè™‘dp_size = ep_size:alltoall dispatch: all (dp) to all (ep). dp rank Nä¸Šçš„subset (token)ï¼Œä¼šåˆ†æ•£åˆ°ä¸åŒçš„ep rank deviceä¸Šã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸€ä¸ªep rank device, å°†æ”¶åˆ°æ¥è‡ªä¸åŒdp rankçš„subsetã€‚alltoall combine: all (ep) to all (dp). ep rank Nä¸Šçš„subset (è®¡ç®—ç»“æœ)ï¼Œä¼šæ±‡æ€»å›tokenå¯¹åº”çš„dp rankä¸Šã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸€ä¸ªdp rankï¼Œå°†æ”¶åˆ°æ¥è‡ªä¸åŒep rankçš„subset.å®Œç¾ã€‚è‡³äºä¸¤ä¸ªé˜¶æ®µé‡Œçš„åˆ†groupï¼Œå¤§æ¦‚æ˜¯å®ç°æ–¹å¼äº†ã€‚åˆ†å¥½groupå°±å¯ä»¥å¤ç”¨å·²æœ‰çš„alltoallç®—å­å®ç°ã€‚" }, { "title": "DistServeé˜…è¯»ç¬”è®°", "url": "/posts/DistServe%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/", "categories": "ä¸“ä¸šç§¯ç´¯, ç¼–ç¨‹ç§¯ç´¯", "tags": "LLM", "date": "2025-07-13 15:46:00 +0800", "snippet": "è®ºæ–‡åŸæ–‡ï¼šhttps://arxiv.org/abs/2401.09670Why PD Disag make senseindependent tuing(KEY) How to get PD Disag profitLimitations/not suggested situations ä¼˜åŒ–throughutçš„åœºæ™¯ï¼šPDåˆ†ç¦»ç›®æ ‡åœ¨äºæ—¶å»¶ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœTTFTå’ŒTPOTä¼˜åŒ–å¾—æ›´å¥½ï¼Œé‚£ä¹ˆåœ¨ç»™å®šçš„TTFTå’ŒTPOTçº¦æŸä¸‹ï¼Œå°±å¯ä»¥è¾¾åˆ°æ›´é«˜çš„request rateã€‚å¦‚æœç›®æ ‡æ˜¯æœ€å¤§åŒ–throughputï¼ˆæ¯”å¦‚offline inferenceï¼‰ï¼Œé‚£ä¹ˆä¸åˆ†ç¦»çš„chunked prefillæ›´é€‚åˆï¼Œå› ä¸ºå¯ä»¥æŠŠGPUæ‰“å¾—æ›´æ»¡ã€‚ GPUèµ„æºæœ‰é™çš„åœºæ™¯ï¼šPDåˆ†ç¦»åçš„è®¾è®¡éœ€è¦ç²¾å¿ƒè®¾è®¡ã€‚GPUæ•°é‡å°‘ï¼ŒPDåˆ†ç¦»çš„è®¾è®¡ç©ºé—´ï¼ˆæ¯”å¦‚PDé…æ¯”ï¼Œå¹¶è¡Œæ–¹å¼ï¼‰å°±ä¼šå—é™ã€‚ï¼ˆå¾ˆï¼‰æœ‰å¯èƒ½åˆ†ç¦»åæ€§èƒ½åè€Œä¸‹é™ã€‚ é•¿contextåœºæ™¯ï¼šé•¿contextå¯¹åº”æ›´å¤§çš„KVä¼ è¾“å¼€é”€ï¼Œæœ‰å¯èƒ½åè€Œé™ä½æ•´ä½“æ€§èƒ½ã€‚Experiment resulté˜¿é‡Œäº‘ç»™äº†ä¸€äº›å®éªŒæ•°æ®ï¼šhttps://help.aliyun.com/zh/pai/user-guide/enable-prefill-decode-disaggregation-deployment-of-llm-services" }, { "title": "gdbå­¦ä¹ ", "url": "/posts/gdb%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "GDB", "date": "2023-07-09 15:35:00 +0800", "snippet": "åˆæ­¥æ€ä¹ˆè¿è¡Œgdbï¼Ÿå†™ä¸€ä¸ªæœ‰bugçš„ç¨‹åº// crash.cpp#include &amp;lt;iostream&amp;gt;using namespace std; int divint(int, int);int main() { x = 3; y = 0; cout &amp;lt;&amp;lt; divint(x, y); return 0; } int divint(int a, int b) { return a / b; }ä½¿ç”¨g++ç¼–è¯‘ç¨‹åºï¼Œè¿è¡Œå‡ºé”™g++ crash.cpp -o crash./crash# Floating point exception (core dumped) å¢åŠ -gé€‰é¡¹ï¼Œç¼–è¯‘debugç‰ˆæœ¬g++ -g crash.cpp -o crash_gdbå¯åŠ¨gdbgdb crash_gdbæ˜¾ç¤ºGNU gdb (Ubuntu 8.2-0ubuntu1~16.04.1) 8.2Copyright (C) 2018 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.Type &quot;show copying&quot; and &quot;show warranty&quot; for details.This GDB was configured as &quot;x86_64-linux-gnu&quot;.Type &quot;show configuration&quot; for configuration details.For bug reporting instructions, please see:&amp;lt;http://www.gnu.org/software/gdb/bugs/&amp;gt;.Find the GDB manual and other documentation resources online at: &amp;lt;http://www.gnu.org/software/gdb/documentation/&amp;gt;.For help, type &quot;help&quot;.Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...Reading symbols from crash...done.(gdb) æœ€åä¸¤è¡Œæ˜¾ç¤ºReading symbols from crash...done.(gdb) è¡¨ç¤ºè½½å…¥debugç‰ˆæœ¬çš„å¯æ‰§è¡Œç¨‹åºæˆåŠŸï¼Œå¹¶è¿›å…¥gdbäº¤äº’çŠ¶æ€ã€‚è¾“å…¥råœ¨debugç¯å¢ƒä¸­è¿è¡Œç¨‹åºï¼š(gdb) rStarting program: crash Program received signal SIGFPE, Arithmetic exception.0x00000000004006e1 in divint (a=3, b=0) at demo.cpp:1818 return a / b; è¾“å…¥l (ä»£è¡¨list)ï¼Œæ‰“å°å¼‚å¸¸å¤„é™„è¿‘çš„ä»£ç ã€‚(gdb) l13 return 0; 14 } 1516 int divint(int a, int b) 17 { 18 return a / b; 19 }è¾“å…¥btæˆ–whereï¼Œæ‰“å°å‡½æ•°çš„è°ƒç”¨æ ˆ(gdb) bt#0 0x00000000004006e1 in divint (a=3, b=0) at demo.cpp:18#1 0x00000000004006c0 in main () at demo.cpp:11è¿›é˜¶æ‰“æ–­ç‚¹å†™ä¸€ä¸ªdemoç¨‹åº// for_breakpoint.cpp#include &amp;lt;iostream&amp;gt;using namespace std; void my_func1(int i) { std::cout &amp;lt;&amp;lt; &quot;Now in func1, i = &quot; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &quot;\\n&quot;;}void my_func2(int i) { std::cout &amp;lt;&amp;lt; &quot;Now in func2, i = &quot; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &quot;\\n&quot;;}int main() { for (int i = 0; i &amp;lt; 3; ++i) { my_func1(i); my_func2(i); } return 0;}åŠ ä¸Š-gå‚æ•°ç¼–è¯‘ï¼Œå¹¶è¿è¡Œg++ -g for_breakpoint.cpp -o bt_demogdb ./demo2GNU gdb (Ubuntu 8.2-0ubuntu1~16.04.1) 8.2...Reading symbols from bt_demo...done.(gdb) rStarting program: /home/zyf301/NewDisk/zg/learn_gym/learn_gdb/bt_demo Now in func1, i = 0Now in func2, i = 0Now in func1, i = 1Now in func2, i = 1Now in func1, i = 2Now in func2, i = 2æ­£å¸¸æ‰§è¡Œã€‚åœ¨ç¬¬14è¡Œå¢åŠ æ–­ç‚¹ï¼ˆmy_func1è°ƒç”¨çš„ä½ç½®ï¼‰(gdb) b 14Breakpoint 1 at 0x40076b: file for_breakpoint.cpp, line 14.å†æ‰§è¡Œä¸€ä¸‹çœ‹çœ‹ï¼Œç¨‹åºåœ¨æ–­ç‚¹å¤„åœä¸‹æ¥äº†(gdb) rStarting program: bt_demo Breakpoint 1, main () at for_breakpoint.cpp:1414 my_func1(i);æ‰“å°ä¸€ä¸‹içš„å€¼(gdb) p i$1 = 0æ¥ä¸‹æ¥æ­¥è¿›ã€‚æ­¥è¿›æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ä¸è¿›å…¥å†…å±‚å‡½æ•°ï¼Œå¯¹åº”n (next)æ‰§è¡Œï¼›ä¸€ç§æ˜¯è¿›å…¥å†…å±‚å‡½æ•°ï¼Œå¯¹åº”s (step)æ‰§è¡Œã€‚åˆ†åˆ«è¯•è¯•(gdb) nNow in func1, i = 015 my_func2(i);(gdb) nNow in func2, i = 013 for (int i = 0; i &amp;lt; 3; ++i) {(gdb) nBreakpoint 1, main () at for_breakpoint.cpp:1414 my_func1(i);(gdb) smy_func1 (i=1) at for_breakpoint.cpp:55 std::cout &amp;lt;&amp;lt; &quot;Now in func1, i = &quot; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &quot;\\n&quot;;(gdb) sNow in func1, i = 16 }(gdb) smain () at for_breakpoint.cpp:1515 my_func2(i);(gdb) smy_func2 (i=1) at for_breakpoint.cpp:99 std::cout &amp;lt;&amp;lt; &quot;Now in func2, i = &quot; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &quot;\\n&quot;;(gdb) sNow in func2, i = 110 }(gdb) smain () at for_breakpoint.cpp:1313 for (int i = 0; i &amp;lt; 3; ++i) {(gdb) sBreakpoint 1, main () at for_breakpoint.cpp:1414 my_func1(i);(gdb) å¯ä»¥å‘ç°ï¼Œä½¿ç”¨sï¼Œç›¸æ¯”äºä½¿ç”¨nï¼Œåœ¨æ­¥è¿›çš„æ—¶å€™è¿›å…¥äº†my_func1å’Œmy_func2çš„å†…éƒ¨ã€‚æˆ–è€…ç›´æ¥æ‰§è¡Œï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹/å¼‚å¸¸/æ‰§è¡Œç»“æŸï¼šc(gdb) cContinuing.Now in func1, i = 0Now in func2, i = 0Breakpoint 1, main () at for_breakpoint.cpp:1414 my_func1(i);(gdb) cContinuing.Now in func1, i = 1Now in func2, i = 1Breakpoint 1, main () at for_breakpoint.cpp:1414 my_func1(i);(gdb) cContinuing.Now in func1, i = 2Now in func2, i = 2[Inferior 1 (process 11840) exited normally]æ˜¾ç¤ºå½“å‰æ‰€æœ‰æ–­ç‚¹ï¼šinfo break(gdb) b 15Breakpoint 2 at 0x400775: file for_breakpoint.cpp, line 15.(gdb) info breakNum Type Disp Enb Address What1 breakpoint keep y 0x000000000040076b in main() at for_breakpoint.cpp:142 breakpoint keep y 0x0000000000400775 in main() at for_breakpoint.cpp:15æ¸…é™¤æ–­ç‚¹ï¼šd Num(gdb) d 1(gdb) info breakNum Type Disp Enb Address What2 breakpoint keep y 0x0000000000400775 in main() at for_breakpoint.cpp:15æ¸…é™¤æ‰€æœ‰æ–­ç‚¹ï¼šd(gdb) dDelete all breakpoints? (y or n) y(gdb) info breakNo breakpoints or watchpoints.(gdb) åœ¨æŒ‡å®šæ–‡ä»¶çš„æŸä¸€è¡Œæ‰“æ–­ç‚¹ï¼šb filepath:line(gdb) b for_breakpoint.cpp:14Breakpoint 3 at 0x40076b: file for_breakpoint.cpp, line 14.æ‰“å°æ‰“å°å‡½æ•°ä¸­å˜é‡içš„å½“å‰å€¼(gdb) p i$1 = 0æ‰“å°æŸä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœ(gdb) p my_func1(5)Now in func1, i = 5$2 = voidé€€å‡ºgdbä½¿ç”¨qæˆ–quité€€å‡ºå½“å‰gdb(gdb) qA debugging session is active. Inferior 1 [process 11934] will be killed.Quit anyway? (y or n) yè¿›é˜¶ä½¿ç”¨æ ¹æ®pid attachç¨‹åº(gdb) attach &amp;lt;pid&amp;gt;å‚è€ƒå‚è€ƒhttps://zhuanlan.zhihu.com/p/504186531https://www.tutorialspoint.com/gnu_debugger/gdb_commands.htm" }, { "title": "ã€WIPã€‘æ¨ç†å›¾ä¼˜åŒ–æ–¹æ³•å°ç»“", "url": "/posts/%E6%8E%A8%E7%90%86%E5%9B%BE%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%E5%B0%8F%E7%BB%93/", "categories": "å®è·µ", "tags": "æ¨ç†åŠ é€Ÿ", "date": "2023-02-13 20:31:00 +0800", "snippet": "åœ¨ç¥ç»ç½‘ç»œæ¨ç†è¿‡ç¨‹ä¸­ï¼Œå›¾ä¼˜åŒ–å¯ä»¥è¾¾åˆ°é™ä½è¿ç®—é‡ã€å‡å°‘ç®—å­invokeæ•°ç›®ä¸é™ä½ç¼“å­˜å¼€é”€ç­‰æ•ˆæœï¼Œæå‡æ¨ç†æ•ˆç‡ã€‚æœ¬æ–‡å¯¹å¸¸è§çš„æ¨ç†å›¾ä¼˜åŒ–æ–¹æ³•è¿›è¡Œå°ç»“ï¼Œå¹¶ä¸æ–­å¢è¡¥ä¸­ã€‚ç¬¦å·å®šä¹‰å·ç§¯ã€å…¨è¿æ¥å±‚è¿ç®—è®¾å·ç§¯æˆ–å…¨è¿æ¥å±‚$Layer(W, b)$çš„æƒé‡å’Œåç½®ä¸º\\(W\\)å’Œ\\(b\\)ï¼Œè¾“å…¥å’Œè¾“å‡ºåˆ†åˆ«ä¸º\\(X\\)å’Œ\\(X^{\\prime}\\)ï¼Œæœ‰\\(X^{\\prime} = X \\otimes W + b\\)å…¶ä¸­$\\otimes$ä»£è¡¨å·ç§¯æˆ–çŸ©é˜µä¹˜æ³•æ“ä½œã€‚$X \\in \\mathbf{R}^{c\\times h \\times w}, \\ \\ X^{\\prime} \\in \\mathbf{R}^{c^{\\prime} \\times h^{\\prime} \\times w^{\\prime}}, \\ \\ b \\in \\mathbf{R}^{c^{\\prime}}.$å½“$Layer$ä¸ºå·ç§¯å±‚æ—¶ï¼Œ$W \\in \\mathbf{R}^{c^{\\prime} \\times c \\times k \\times k}$ï¼Œå½“$Layer$ä¸ºå…¨è¿æ¥å±‚æ—¶ï¼Œ$W \\in \\mathbf{R}^{c^{\\prime} \\times c}.$BNè¿ç®—è®¾BNå±‚($\\gamma, \\beta$)è¾“å‡ºå’Œè¾“å‡ºåˆ†åˆ«ä¸º\\(X\\)å’Œ\\(X^{\\prime}\\)ï¼Œæœ‰\\(X^{\\prime} = \\gamma \\frac{X - \\mu}{\\sqrt{\\delta^2 + \\epsilon}} + \\beta\\)å…¶ä¸­${X, X^{\\prime}}\\in \\mathbf{R}^{c\\times h \\times w}$. $\\mu, \\sigma, \\gamma, \\beta$å‡ä¸ºé€ç‰¹å¾é€šé“çš„å˜é‡ï¼Œåœ¨æ¨ç†æ—¶ä¸ºå›ºå®šå€¼ï¼Œ${\\mu, \\sigma, \\gamma, \\beta}\\in \\mathbf{R}^c$.å…³äºBNå±‚çš„æ›´å¤šç»†èŠ‚ä»‹ç»ï¼Œå¯å‚è§å…³äºBatch Normalizationã€‚ç½‘ç»œå±‚èåˆç¼©æ”¾/åç½®ç®—å­èåˆBN + scale (é€é€šé“) å¯¹åº”ncnnä¸­çš„NetOptimize::fuse_batchnorm_scale()èåˆå‰ï¼šX --&amp;gt; [BN] --&amp;gt; X&#39; --&amp;gt; [S] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [BN&#39;] --&amp;gt; YBNå±‚åæ¥ä¸€ä¸ªæ²¿ç‰¹å¾é€šé“ç»´åº¦çš„ç¼©æ”¾ç®—å­$S\\in\\mathbf{R}^{c}$ï¼Œå°†å¯¹åº”ç³»æ•°é€é€šé“èåˆè¿›BNå±‚çš„ç³»æ•°$\\gamma, \\beta$ä¸­å³å¯ã€‚Conv + scale (é€é€šé“) å¯¹åº”ncnnä¸­çš„NetOptimize::NetOptimize::fuse_convolution_mul()èåˆå‰ï¼šX --&amp;gt; [Conv] --&amp;gt; X&#39; --&amp;gt; [S] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [Conv&#39;] --&amp;gt; Yå·ç§¯å±‚åæ¥ä¸€ä¸ªæ²¿ç‰¹å¾é€šé“ç»´åº¦çš„ç¼©æ”¾ç®—å­$S\\in\\mathbf{R}^{c}$ï¼Œå°†å¯¹åº”ç³»æ•°é€è¾“å‡ºé€šé“ï¼ˆä¹˜ç§¯ï¼‰èåˆè¿›å·ç§¯å±‚çš„ç³»æ•°$W, b$ä¸­å³å¯ã€‚Conv + Add (é€é€šé“ï¼‰ å¯¹åº”ncnnä¸­çš„NetOptimize::NetOptimize::fuse_convolution_add()èåˆå‰ï¼šX --&amp;gt; [Conv] --&amp;gt; X&#39; --&amp;gt; [Add] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [Conv&#39;] --&amp;gt; Yå·ç§¯å±‚åæ¥ä¸€ä¸ªæ²¿ç‰¹å¾é€šé“ç»´åº¦çš„åç½®ç®—å­$A\\in\\mathbf{R}^{c}$ï¼Œå°†å¯¹åº”ç³»æ•°é€è¾“å‡ºé€šé“ï¼ˆåŠ å’Œï¼‰èåˆè¿›å·ç§¯å±‚çš„ç³»æ•°$b$ä¸­å³å¯ã€‚ å¯¹åº”ncnnä¸­çš„NetOptimize::fuse_innerproduct_add()èåˆå‰ï¼šX --&amp;gt; [FC] --&amp;gt; X&#39; --&amp;gt; [Add] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [FC&#39;] --&amp;gt; YFC + Add å’Œ Conv + Add åŸç†éå¸¸ç›¸ä¼¼ã€‚å°†å¯¹åº”ç³»æ•°é€è¾“å‡ºé€šé“ï¼ˆåŠ å’Œï¼‰èåˆè¿›å…¨è¿æ¥å±‚çš„ç³»æ•°$b$ä¸­å³å¯ã€‚FC + Add (é€é€šé“)FC + Act å’Œ Conv + Act åŸç†éå¸¸ç›¸ä¼¼ã€‚æ­¤å¤„ä¸å†èµ˜è¿°ã€‚BNå±‚èåˆConv + BN å¯¹åº”ncnnä¸­çš„NetOptimize::fuse_convolution_batchnorm()èåˆå‰ï¼šX --&amp;gt; [Conv] --&amp;gt; X&#39; --&amp;gt; [BN] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [Conv&#39;] --&amp;gt; Yå‚è€ƒ To execute neural network inference, kernels are invoked for neural network layers in order to compute the output tensors given the input tensors. Each kernel call will bring some overhead timeâ€¦.To achieve high throughput and low latency for neural network inference, the rule of thumb is to have fewer large kernel calls instead of many small kernel calls.å·ç§¯è¾“å‡º\\(X^{\\prime}\\)ç´§æ¥è¿›å…¥BNå±‚ï¼Œè®¾BNå±‚çš„è¾“å‡ºä¸º\\(Y\\)ï¼Œåˆ™æœ‰\\(\\begin{aligned}Y &amp;amp;= \\gamma \\frac{X^{\\prime} - \\mu}{\\sqrt{\\delta^2 + \\epsilon}} + \\beta= \\gamma \\frac{X * W + b - \\mu}{\\sqrt{\\delta^2 + \\epsilon}} + \\beta \\\\ &amp;amp;= X * (\\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}W) + \\beta + \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}(b - \\mu) \\\\ &amp;amp;= X * W^{\\prime} + b^{\\prime}\\end{aligned}\\)å³ conv + BN ç­‰æ•ˆäºè°ƒç”¨ä¸€ä¸ªæƒé‡ä¸º\\(W^{\\prime} = \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}W\\)ï¼Œåç½®ä¸º\\(b^{\\prime} = \\beta + \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}(b - \\mu)\\)çš„æ–°å·ç§¯ã€‚è¯¥æ­¥èåˆå‡å°‘äº†kernelçš„invokeæ¬¡æ•°ï¼Œé™ä½äº†è®¡ç®—é‡ï¼Œä¸”çœå»äº†åŸConvå±‚ä¸BNå±‚ä¹‹é—´çš„ç¼“å­˜å¼€é”€ã€‚FC + BN å¯¹åº”ncnnä¸­çš„NetOptimize::fuse_innerproduct_batchnorm()èåˆå‰ï¼šX --&amp;gt; [FC] --&amp;gt; X&#39; --&amp;gt; [BN] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [FC&#39;] --&amp;gt; YFC + BN å’Œ Conv + BN åŸç†éå¸¸ç›¸ä¼¼ã€‚å°†å¯¹åº”ç³»æ•°é€è¾“å‡ºé€šé“ï¼ˆä¹˜ç§¯ï¼‰èåˆè¿›å…¨è¿æ¥å±‚çš„ç³»æ•°$W, b$ä¸­å³å¯ã€‚æ¿€æ´»å‡½æ•°èåˆConv + Act (é€å…ƒç´ ) å¯¹åº”ncnnä¸­çš„NetOptimize::NetOptimize::fuse_convolution_activation()èåˆå‰ï¼šX --&amp;gt; [Conv] --&amp;gt; X&#39; --&amp;gt; [Act] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [Conv&#39;] --&amp;gt; X&#39;(inplace Act) -&amp;gt; Yå·ç§¯å±‚ç´§è·Ÿé€å…ƒç´ çš„æ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å°†å·ç§¯å±‚çš„è¾“å‡ºçš„æ¿€æ´»æ“ä½œåŸåœ°ï¼ˆinplaceï¼‰è¿›è¡Œï¼ŒèŠ‚çº¦ä¸€æ¬¡ç¼“å­˜å¼€é”€ã€‚ncnnç›®å‰æ”¯æŒèåˆçš„æ¿€æ´»å‡½æ•°æœ‰ReLU, Clip, Sigmoid, Mish, HardSwish.åŸºäºæ­¤ï¼ŒConv + BN + ReLUå¯å…ˆå°†Convå’ŒBNèåˆæˆConvâ€™ï¼Œå†å°†ReLUèåˆinplaceæ“ä½œï¼Œä»è€Œåœ¨çœå»BNå±‚è®¡ç®—é‡çš„åŒæ—¶ï¼Œå‡å°‘ä¸¤æ¬¡è®¿å­˜ã€‚å‚è€ƒFC + Act (é€å…ƒç´ ) å¯¹åº”ncnnä¸­çš„NetOptimize::fuse_innerproduct_activation()èåˆå‰ï¼šX --&amp;gt; [FC] --&amp;gt; X&#39; --&amp;gt; [Act] --&amp;gt; Yèåˆåï¼šX --&amp;gt; [FC&#39;] --&amp;gt; X&#39;(inplace Act) -&amp;gt; Yå†—ä½™ç®—å­æ¶ˆé™¤æ¶ˆé™¤dropoutç®—å­ å¯¹åº”ncnnä¸­çš„NetOptimize::eliminate_dropout()æ¶ˆé™¤å‰ï¼šX --&amp;gt; [dropout] --&amp;gt; Yæ¶ˆé™¤åï¼šX --&amp;gt; Ydropoutç®—å­åœ¨æ¨ç†æ—¶ä¸ä½œç”¨ï¼Œå› æ­¤å¯æ¶ˆé™¤ã€‚æ¶ˆé™¤identityç®—å­ å¯¹åº”ncnnä¸­çš„NetOptimize::eliminate_noop()æ¶ˆé™¤å‰ï¼šX --&amp;gt; [identity] --&amp;gt; Yæ¶ˆé™¤åï¼šX --&amp;gt; Yå•¥ä¸åšçš„ç®—å­ä¸ºå•¥ç•™ç€ï¼Ÿæ¶ˆé™¤å®ƒã€‚æ¶ˆé™¤åªæœ‰ä¸€ä¸ªè¾“å‡ºåˆ†æ”¯çš„splitç®—å­ å¯¹åº”ncnnä¸­çš„NetOptimize::eliminate_split()æ¶ˆé™¤å‰ï¼šX --&amp;gt; [split] --&amp;gt; Y (splitåªæœ‰ä¸€ä¸ªè¾“å‡ºåˆ†æ”¯)æ¶ˆé™¤åï¼šX --&amp;gt; Yå½“splitåªæœ‰ä¸€ä¸ªè¾“å‡ºåˆ†æ”¯æ—¶ï¼Œè¯¥splitèŠ‚ç‚¹æ—¶æ˜¯å†—ä½™çš„ï¼Œå¯ä»¥æ¶ˆé™¤ã€‚æ¶ˆé™¤global poolingåçš„flattenç®—å­ å¯¹åº”ncnnä¸­çš„NetOptimize::eliminate_flatten_after_global_pooling()æ¶ˆé™¤å‰ï¼šX --&amp;gt; [global pooling] --&amp;gt; [flatten] --&amp;gt; Y æ¶ˆé™¤åï¼šX --&amp;gt; [global pooling] --&amp;gt; Yåœ¨ncnnä¸­ï¼Œglobal poolingåç‰¹å¾çš„å½¢çŠ¶æ˜¯å¤§å°ä¸º$C$çš„ä¸€ç»´å‘é‡ï¼Œå†åšflattenæ“ä½œæ— å®è´¨å˜åŒ–ï¼Œå› æ­¤flattenæ˜¯å†—ä½™çš„ï¼Œå¯ä»¥æ¶ˆé™¤ã€‚å¸¸é‡æŠ˜å å‚è€ƒ ncnn/tools/optimize Graph Optimizations in ONNX Runtime" }, { "title": "Flaské¡¹ç›®éƒ¨ç½²è®°å½•ï¼ˆuwsgiï¼‰", "url": "/posts/Flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95-uwsgi/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "Flask, uwsgi", "date": "2022-11-14 21:17:00 +0800", "snippet": "Flaskæ˜¯ä¸€ä¸ªä½¿ç”¨Pythonç¼–å†™çš„è½»é‡çº§Webåº”ç”¨æ¡†æ¶ã€‚åŸºäºå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ­å»ºèµ·ä¸€ä¸ªWebåº”ç”¨ï¼Œä½†å…¶å†…å»ºæœåŠ¡å™¨ä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚æ‰€ä»¥å½“åœ¨æœ¬åœ°å®Œæˆäº†ä¸€ä¸ªFlaskåº”ç”¨ï¼Œä¸ºäº†æ›´é«˜æ•ˆã€å®‰å…¨ã€ç¨³å®šåœ°æŠŠå®ƒå±•ç¤ºç»™å…¨ä¸–ç•Œï¼Œæ˜¯æ—¶å€™éƒ¨ç½²å®ƒäº†ï¼æœ¬é¡µè®°å½•æˆ‘æŠŠä¸€ä¸ªFlaskåº”ç”¨éƒ¨ç½²åˆ°è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šçš„æ“ä½œè¿‡ç¨‹ï¼Œç”¨åˆ°äº†uwsgiã€‚ å†è¿›ä¸€æ­¥åœ°ï¼Œä¸ºäº†æ”¯æŒé«˜æ€§èƒ½ã€é«˜å¹¶å‘ï¼Œè¿˜å¯ä»¥ç”¨åˆ°nginxã€‚ä½†è¿™ä¸€æ­¥æˆ‘æš‚æ—¶è¿˜æ²¡å¼„æ¸…æ¥šï¼Œç­‰åç»­æœ‰æœºä¼šå®æ“å¹¶æˆåŠŸåå†åšè®°å½•ã€‚æœåŠ¡å™¨å‡†å¤‡åœ¨è…¾è®¯äº‘ç§Ÿç”¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¼šåˆ†é…ä¸€ä¸ªå…¬ç½‘ipåœ°å€ã€‚ ï¼ˆé¦–æ¬¡è¿æ¥å‰ï¼Œéœ€è¦ï¼‰é…ç½®æœåŠ¡å™¨çš„SSHç”¨æˆ·åå’Œå¯†ç  æˆ‘ç§Ÿç”¨çš„æ˜¯ä¸€å°â€œè½»é‡çº§æœåŠ¡å™¨â€ï¼Œå®ƒçš„SSHé…ç½®æŒ‡å—è§è¿™é‡Œ :star:å…³äºç«¯å£ åˆ›å»ºå®ä¾‹æ—¶é»˜è®¤å·²å¼€é€š22ç«¯å£ï¼Œå¯ä¾›SSHè¿æ¥ä½¿ç”¨ã€‚ å…¶ä»–ç«¯å£æ”¾è¡Œæƒ…å†µå¯è§æœåŠ¡å™¨è¯¦æƒ…çš„â€é˜²ç«å¢™â€œæ ï¼Œæˆ‘ä»¬åç»­æ­å»ºFlaskåº”ç”¨ä¼šä½¿ç”¨å·²é»˜è®¤æ”¾è¡Œçš„3389ç«¯å£ã€‚ é…ç½®æœ¬åœ°å’ŒæœåŠ¡å™¨çš„SSHè¿æ¥ é…ç½®æ–¹æ³•å¯å‚è§è¿™é‡Œ okï¼Œå¯ä»¥å¼€å§‹æˆ‘ä»¬çš„å¼€å‘äº†ï¼Flaskåº”ç”¨æ­å»ºå’Œå®ƒçš„è£¸å¥”ä»¥ä¸€ä¸ªæœ€ç®€å•çš„Flaskåº”ç”¨ä¸ºä¾‹ï¼Œæ–°å»ºmain.py# main.pyfrom flask import Flaskapp = Flask(__name__)@app.route(&#39;/&#39;)def index(): return &quot;Hello World!&quot;if __name__ == &#39;__main__&#39;: app.run(host=&#39;0.0.0.0&#39;, port=3389)æ‰§è¡Œpython main.pyè¾“å‡ºï¼š * Serving Flask app &#39;main&#39; * Debug mode: offWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead. * Running on all addresses (0.0.0.0) * Running on http://127.0.0.1:3389 * Running on http://10.0.4.2:3389Press CTRL+C to quitè¿™æ—¶ï¼Œæˆ‘ä»¬æœ¬åœ°ç™»å½• http://æœåŠ¡å™¨å…¬ç½‘ip:3389ï¼Œå³å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢Well done! å’±ä»¬çš„Flaskåº”ç”¨å¯ä»¥è®¿é—®äº†ï¼ä½†æ˜¯å¯ä»¥çœ‹åˆ°ç»ˆç«¯è¾“å‡ºçš„è­¦å‘Šï¼šWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.è¿™æ˜¯ç”±äºFlaskå†…å»ºæœåŠ¡å™¨ä¸å¤Ÿé«˜æ•ˆã€å®‰å…¨ã€ç¨³å®šï¼Œæ‰€ä»¥ä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚æŒ‰ç…§æç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨WSGI serveræ¥éƒ¨ç½²å®ƒã€‚WSGI serveréƒ¨ç½²Flaskåº”ç”¨å®‰è£…uwsgi å¸¸è§„çš„æ–¹æ³•æ˜¯ç”¨pipå®‰è£… å‚è€ƒ pip install uwsgi å¦‚æœä½¿ç”¨çš„æ˜¯Condaè™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥ä»conda forgeå®‰è£… å‚è€ƒï¼Œå¦‚ conda install -c &quot;conda-forge/label/cf202003&quot; uwsgi åŸºäºuwsgiè¿è¡Œflaskåº”ç”¨å‚è€ƒæ–°å»ºuwsgi.ini[uwsgi]; æŒ‡å®šipå’Œç«¯å£ï¼Œåº”ä¿æŒå’Œä¹‹å‰main.pyä¸­appçš„å®šä¹‰ä¸€è‡´ (æ­¤æ—¶main.pyä¸­çš„ip/ç«¯å£å®šä¹‰å¯ä»¥ç•¥å»)http = 0.0.0.0:3389; æŒ‡å®šflaské¡¹ç›®å¯åŠ¨æ–‡ä»¶åœ°å€ chdir = path/to/your/flask_projectwsgi-file = main.py; æ˜¾å¼æŒ‡æ˜main.pyä¸­å®šä¹‰çš„callable &amp;lt;== app = Flask(__name__)callable = app ; master = true; æŒ‡å®šè¿›ç¨‹/çº¿ç¨‹æ•°ç›®processes = 4threads = 2; æŒ‡å®šè™šæ‹Ÿç¯å¢ƒåœ°å€virtualenv = /path/to/virtual/environmentæ³¨ï¼š å¦‚æœuwsgi.iniå’Œflaské¡¹ç›®å¯åŠ¨æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œchdiré¡¹å¯çœç•¥ã€‚ å¦‚æœæ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œuwsgiï¼Œåˆ™virtualenvé¡¹éœ€è¦æŒ‡å®šã€‚å‚è€ƒ æ³¨æ„ï¼Œå½“å‰è¿è¡Œæ‰€å¤„çš„è™šæ‹Ÿç¯å¢ƒï¼Œåº”è¯¥ä¸virtualenvé¡¹ä¿æŒä¸€è‡´ï¼ ç»ˆç«¯ä½¿ç”¨ echo $CONDA_PREFIX å¯ä»¥å¾—åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒçš„æœ¬æœºè·¯å¾„ã€‚ masteré¡¹çš„å…·ä½“å«ä¹‰å¯ä»¥å‚è€ƒè¿™é‡Œï¼Œæš‚æ—¶è¿˜ä¸å¤ªç†è§£ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šmaster = trueçš„è¯ï¼Œä¼šæœ‰WARNING: you are running uWSGI without its master process manageræ‰§è¡Œuwsgi uwsgi.iniä¼šæœ‰ä¸€å †è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œåˆ™æœ¬åœ°ç™»å½• http://æœåŠ¡å™¨å…¬ç½‘ip:3389ï¼Œå†æ¬¡å‡ºç°æˆåŠŸï¼" }, { "title": "æ ¼å¼åŒ–è¾“å‡ºå°èŠ‚", "url": "/posts/%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA%E5%B0%8F%E7%BB%93/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "format", "date": "2022-10-19 10:58:00 +0800", "snippet": "æœ¬é¡µæ€»ç»“Pythonã€Cå’ŒC++çš„æ ¼å¼åŒ–è¾“å‡ºã€‚Pythonå‚è€ƒ1 å‚è€ƒ2ä½¿ç”¨placeholder_str.format(value1, value2...)è¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–ã€‚å…¶ä¸­ placeholder_stræ˜¯åŒ…å«{}çš„å­—ç¬¦ä¸²ï¼Œ{}å¯ä»¥æ˜¯ç©ºï¼Œä¸‹æ ‡å€¼æˆ–å‚æ•°åï¼› value1ï¼Œvalue2...å¯ä»¥æ˜¯å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯é”®å€¼å¯¹ã€‚ç¤ºä¾‹print(&quot;My name is {}, I&#39;m {}&quot;.format(&quot;Zander&quot;, 25))print(&quot;My name is {0}, I&#39;m {1}&quot;.format(&quot;Zander&quot;, 25))print(&quot;My name is {name}, I&#39;m {age}&quot;.format(name=&quot;Zander&quot;, age=25))å…¶ä¸­ç¬¬ä¸‰è¡Œè¿˜æœ‰ä¸€ç§ç­‰æ•ˆå†™æ³•ä¸ºname = &quot;Zander&quot;age = 25print(f&quot;My name is {name}, I&#39;m {age}&quot;)format()è¿˜å¯ç”¨äºæ•°å­—çš„æ ¼å¼åŒ–ï¼ˆè¿™é‡Œä»‹ç»äº†å„ç§å„æ ·æ”¯æŒçš„formatï¼Œä»¥ä¾›æŸ¥è¯¢ï¼‰ï¼Œæ¯”å¦‚ä»¥ä¸‹å¸¸ç”¨çš„ï¼šç¤ºä¾‹ ä½¿ç”¨:få°†æ•°å­—è½¬åŒ–ä¸ºå®šç‚¹æ•° # default with 6 decimals. print(&quot;The price is {:f} dollars.&quot;.format(45)) # The price is 45.000000 dollars. # use `:.&amp;lt;n&amp;gt;f` to specify the number of decimals print(&quot;The price is {:.2f} dollars.&quot;.format(45)) # The price is 45.000000 dollars. # use key=value and number format simultaneously print(&quot;The price is {price:.2f} dollars.&quot;.format(price=45)) # The price is 45.00 dollars. Cä½¿ç”¨printf()è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºã€‚è¿™é‡Œä»‹ç»äº†å„ç§å„æ ·æ”¯æŒçš„formatï¼Œä»¥ä¾›æŸ¥è¯¢ã€‚ä»¥ä¸‹å¸¸ç”¨çš„ï¼šç¤ºä¾‹#include &amp;lt;stdio.h&amp;gt; int main() { // print signed decimal integer int x = 45; printf(&quot;%d\\n&quot;, x); // 45 // print float value float f = 3.1416; // the default number of digits to be printed after the decimal point is 6 printf(&quot;%f\\n&quot;, f); // 3.141600 // use `%.&amp;lt;n&amp;gt;f` to specify the number of digits to be printed after the decimal point printf(&quot;%.3f\\n&quot;, f); // 3.142 // print string of characters char str[] = &quot;Hello World&quot;; printf(&quot;%s\\n&quot;, str); // Hello World} æ³¨ï¼šformatå’Œå®é™…çš„æ•°æ®ç±»å‹åŠ¡å¿…å¯¹åº”ï¼Œå¦åˆ™æ˜¾ç¤ºçš„æ•°å€¼å¦ˆéƒ½ä¸è®¤è¯†ã€‚C++C++åŒæ ·æ”¯æŒprintf()ã€‚ä½†å€¼å¾—æ³¨æ„ä¸€äº›åœ°æ–¹ï¼š printfè¾“å‡ºC++çš„stringï¼Ÿ printfä¸æ”¯æŒç›´æ¥è¾“å‡ºstringï¼Œéœ€è¦ç”¨.c_str()è¿›è¡Œè½¬æ¢ string a = &quot;c++ string\\n&quot;;printf(&quot;%s&quot;, a.c_str()); å¦å¤–C++è¿˜æ”¯æŒcoutï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä»‹ç»å…¶å¸¸è§ç”¨æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼š è®¾å®šè¾“å‡ºçš„ç²¾åº¦ï¼šsetprecision(n) å‚è€ƒ æ§åˆ¶è¾“å‡ºçš„æµ®ç‚¹æ•°å­—çš„æœ‰æ•ˆæ•°å­—ä½æ•° #include &amp;lt;iostream&amp;gt; // std::cout, std::fixed#include &amp;lt;iomanip&amp;gt; // std::setprecisionusing namespace std; int main(){ double number1 = 132.364, number2 = 26.91; double quotient = number1 / number2; // 4.91876625789669... cout &amp;lt;&amp;lt; quotient &amp;lt;&amp;lt; endl; // 4.91877, é»˜è®¤æ˜¾ç¤º6ä½æœ‰æ•ˆæ•°å­— cout &amp;lt;&amp;lt; setprecision(5) &amp;lt;&amp;lt; quotient &amp;lt;&amp;lt; endl; // 4.9188, è®¾å®šæ˜¾ç¤º5ä½æœ‰æ•ˆæ•°å­— cout &amp;lt;&amp;lt; setprecision(4) &amp;lt;&amp;lt; quotient &amp;lt;&amp;lt; endl; // 4.919, è®¾å®šæ˜¾ç¤º4ä½æœ‰æ•ˆæ•°å­— return 0;} å¦‚æœä¸€ä¸ªæ•°å­—çš„å€¼å¯ä»¥ç”±å°‘äº setprecision æŒ‡å®šçš„ç²¾åº¦ä½æ•°æ¥è¡¨ç¤ºï¼Œåˆ™æ“ä½œç¬¦å°†ä¸èµ·ä½œç”¨ double dollars = 24.51;cout &amp;lt;&amp;lt; dollars &amp;lt;&amp;lt; endl; // 24.51cout &amp;lt;&amp;lt; setprecision (5) &amp;lt;&amp;lt; dollars &amp;lt;&amp;lt; endl; // 24.51 é…åˆfixedä½¿ç”¨å¯å®ç°æ§åˆ¶å°æ•°ç‚¹ånä½ #include &amp;lt;iostream&amp;gt; // std::cout, std::fixed#include &amp;lt;iomanip&amp;gt; // std::setprecisionusing namespace std; int main () { double f = 3.1415926; cout &amp;lt;&amp;lt; setprecision(5) &amp;lt;&amp;lt; f &amp;lt;&amp;lt; &#39;\\n&#39;; // 3.1416 cout &amp;lt;&amp;lt; fixed &amp;lt;&amp;lt; setprecision(5) &amp;lt;&amp;lt; f &amp;lt;&amp;lt; &#39;\\n&#39;; // 3.14159 cout &amp;lt;&amp;lt; fixed &amp;lt;&amp;lt; setprecision(10) &amp;lt;&amp;lt; f &amp;lt;&amp;lt; &#39;\\n&#39;; // 3.1415926000 return 0;} " }, { "title": "CMakeå­¦ä¹ ", "url": "/posts/CMake%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "CMake", "date": "2022-10-18 10:35:00 +0800", "snippet": "CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°ã€å¼€æºçš„æ„å»ºå·¥å…·ï¼Œåœ¨å„ç§å¤§å‹C/C++é¡¹ç›®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ CMakeæ˜¯ä¸€ä¸ª&quot;generator&quot;ï¼Œå®ƒä¸ä¼šç›´æ¥ç¼–è¯‘ç›®æ ‡ï¼Œè€Œæ˜¯æ ¹æ®CMakeLists.txtç”Ÿæˆå½“å‰å¹³å°ç¼–è¯‘æ‰€éœ€è¦çš„æ–‡ä»¶ï¼ˆå¦‚makefileï¼‰ï¼Œç„¶åç”±å½“å‰å¹³å°ç¼–è¯‘å·¥å…·è¿›è¡Œç¼–è¯‘ï¼ˆå¦‚makeï¼‰ã€‚å‚è€ƒ ä¹‹æ‰€ä»¥è¯´CMakeæ˜¯è·¨å¹³å°çš„ï¼Œæ˜¯å› ä¸ºCMakeList.txtæ˜¯å¹³å°æ— å…³çš„ï¼Œå®ç°äº†â€œWrite once, run everywhereâ€ã€‚å‚è€ƒ CMakeæ ¹æ®CMakeLists.txtä¸­çš„å˜é‡ï¼Œæ¥ç¡®å®šå½“å‰çš„æ„å»ºç¯å¢ƒå’Œæ„å»ºè§„åˆ™ã€‚æ„å»ºè§„åˆ™åŒ…æ‹¬ï¼šè¦éœ€è¦åŒ…å«å“ªäº›å¤´æ–‡ä»¶ã€é“¾æ¥å“ªäº›åº“ã€è¯­è¨€çš„ç‰ˆæœ¬ã€ç¼–è¯‘å™¨å‚æ•°ç­‰ç­‰ã€‚å‚è€ƒCMakeä½œä¸ºä¸€é¡¹ç¡¬æŠ€èƒ½ï¼Œè¦å¥½å¥½å­¦ä¸€ä¸‹ã€‚æœ¬é¡µä¸ºæˆ‘åœ¨å­¦ä¹ CMakeè¿‡ç¨‹ä¸­çš„ä¸€äº›ç¬”è®°ã€‚åˆ†ä¸ºä¸‰ä¸ªå±‚çº§ï¼š ç¬¬ä¸€å±‚ï¼šå¦‚ä½•ä½¿ç”¨ ç¬¬äºŒå±‚ï¼šæ¯ä¸€æ­¥èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆ ç¬¬ä¸‰å±‚ï¼šä¸€äº›æ›´ç»†è‡´å…¨é¢çš„å­¦ä¹ ç¬¬ä¸€å±‚ï¼šå¦‚ä½•ä½¿ç”¨è¿™ä¸€èŠ‚é¦–å…ˆç”¨ä¸€ä¸ªç®€å•çš„æ ·ä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•æ“ä½œï¼Œæ¥å€ŸåŠ©CMakeå®Œæˆç¼–è¯‘ã€‚å‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæºæ–‡ä»¶demo.cpp#include &amp;lt;iostream&amp;gt;using namespace std;int main() { cout &amp;lt;&amp;lt; &quot;Hello, World!&quot; &amp;lt;&amp;lt; endl; return 0;}ç¼–å†™CMakeLists.txt# cmakeæœ€ä½ç‰ˆæœ¬éœ€æ±‚cmake_minimum_required(VERSION 3.13)# æŒ‡å®šprojectåç§°project(DemoProject)# ç¼–è¯‘æºç ç”Ÿæˆç›®æ ‡add_executable(demo demo.cpp)æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š|- demo.cpp|- CMakeList.txtä¾æ¬¡æ‰§è¡Œmkdir buildcd buildcmake .. è¿™ä¸€æ­¥ç›´æ¥ä½¿ç”¨cmake .å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ä¼šå’Œæºæ–‡ä»¶æ··æ‚åœ¨ä¸€èµ·ï¼Œå‘ç”Ÿå‡Œä¹±ã€‚å› æ­¤ä¸€èˆ¬éƒ½æ˜¯æ–°å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹ï¼Œç”¨æ¥ä¿å­˜ä¸­é—´æ–‡ä»¶ï¼ˆå³é€šå¸¸è¯´çš„&quot;out-of-source build&quot;ï¼‰å†æ‰§è¡Œmakeå³å¯å®Œæˆç¼–è¯‘ï¼Œåœ¨buildç›®å½•ä¸‹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶demoã€‚æ‰§è¡Œ# buildç›®å½•ä¸‹./demo# è¾“å‡ºï¼š Hello, World!ç¬¬äºŒå±‚ï¼šæ¯ä¸€æ­¥å‘ç”Ÿäº†ä»€ä¹ˆè¿™ä¸€èŠ‚çœ‹çœ‹ä¸Šé¢çš„å„ä¸ªæ­¥éª¤åˆ†åˆ«å‘ç”Ÿäº†ä»€ä¹ˆã€‚ ä¸Šé¢å„æ­¥æ˜¯ä¸€ä¸ªå…¸å‹çš„&quot;out-of-source build&quot;è¿‡ç¨‹ã€‚å…·ä½“è€Œè¨€ï¼Œbuildç›®å½•æ˜¯æˆ‘ä»¬æ‰§è¡Œcmakeå¹¶ä¿å­˜ç”Ÿæˆæ–‡ä»¶çš„åœ°æ–¹ï¼›..æ˜¯CMakeLists.txtæ‰€åœ¨çš„ç›®å½•ã€‚ mkdir build; cd build åˆ›å»ºå¹¶è¿›å…¥buildæ–‡ä»¶å¤¹ï¼Œç¼–è¯‘è¿‡ç¨‹ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶å°†ä¿å­˜åœ¨æ­¤ï¼Œä¸æºæ–‡ä»¶éš”ç¦»å¼€æ¥ã€‚ cmake .. è¿™ä¸€å¥çš„åŸå‹ä¸ºï¼šcmake &amp;lt;path-to-source&amp;gt;ã€‚å³åˆ°å½“å‰ï¼ˆ/buildï¼‰ä¸Šä¸€å±‚ç›®å½•ä¸­å¯»æ‰¾CMakeLists.txt è¿™ä¸€æ­¥ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼ˆæœ€å…³é”®çš„æ˜¯Makefileï¼‰ï¼Œå¹¶ä¿å­˜åœ¨å½“å‰ç›®å½•ï¼ˆ/buildï¼‰ä¸‹ |- CMakeFiles |- ...|- cmake_install.cmake|- CMakeCache.txt|- Makefile è¿™äº›ç”Ÿæˆçš„æ–‡ä»¶åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿå‚è€ƒ æˆ‘ç†è§£ï¼Œé™¤äº†Makefileï¼Œå…¶ä»–éƒ½æ˜¯ç±»ä¼¼äºâ€ä¸­é—´æ–‡ä»¶â€œçš„å­˜åœ¨å§ã€‚æœ‰äº†å®ƒä»¬ä¹‹åï¼Œå†æ¬¡æ‰§è¡Œcmakeä¼šè·³è¿‡å¾ˆå¤šæ“ä½œã€‚ å‚è€ƒ: stackoverflow - What does cmake .. do? make æ ¹æ®ç”Ÿæˆçš„Makefileæ‰§è¡Œmakeç¼–è¯‘ã€‚ ç¬¬ä¸‰å±‚ï¼šä¸€äº›æ›´å…¨é¢çš„å­¦ä¹ è¿™ä¸€èŠ‚è®°å½•ä¸€äº›CMakeçš„åŸºæœ¬è¯­æ³•ä¸ä½¿ç”¨ç­–ç•¥ã€‚åŸºæœ¬è¯­æ³•ä¸€äº›å¸¸ç”¨çš„æŒ‡ä»¤ CMakeLists.txtæ–‡ä»¶ä¸­æŒ‡ä»¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†ä¸€èˆ¬æ¥è¯´åŒä¸€ä¸ªæ–‡ä»¶ä¸­æŒ‡ä»¤åº”ä¿æŒå¤§å°å†™é£æ ¼ä¸€è‡´ã€‚ cmake_minimum_required ä¸€èˆ¬è¿™æ¡æŒ‡ä»¤å‡ºç°åœ¨CMakeLists.txtçš„æœ€å¼€å§‹ï¼ŒæŒ‡æ˜äº†å¯¹cmakeçš„æœ€ä½ç‰ˆæœ¬çš„è¦æ±‚ã€‚ å‚è€ƒ project æŒ‡å®šå·¥ç¨‹åç§°ï¼ˆå’Œç‰ˆæœ¬ã€æè¿°ç­‰ï¼‰ã€‚ å·¥ç¨‹åç§°ç»™å®šåï¼Œä¸€äº›å†…ç½®å˜é‡ï¼Œå¦‚PROJECT_NAMEã€CMAKE_PROJECT_NAMEä¼šè¢«è‡ªåŠ¨èµ‹ä¸ºè¯¥å€¼ã€‚ å‚è€ƒ include_directories æ·»åŠ å¤´æ–‡ä»¶æœç´¢ç›®å½•ã€‚ ç›®å½•å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æ ¼å¼ï¼Œä¹Ÿå¯ä½¿ç”¨ï¼ˆç›¸å¯¹äºå½“å‰CMakeLists.txtçš„ï¼‰ç›¸å¯¹è·¯å¾„æ ¼å¼ã€‚ ç›¸å½“äºg++ä¸­-Içš„ä½œç”¨ã€‚ å‚è€ƒï¼Œå‚è€ƒ The difference between include_directories and target_include_directories? link_directories æ·»åŠ éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶ç›®å½•ã€‚ ç›¸å½“äºg++ä¸­-Lçš„ä½œç”¨ã€‚ ä½•æ—¶ä½¿ç”¨ï¼šå¦‚æœè¦é“¾æ¥çš„åº“ï¼Œæ²¡æœ‰æ”¾åœ¨/libå’Œ/usr/libå’Œ/usr/local/libè¿™ä¸‰ä¸ªç›®å½•é‡Œï¼Œéœ€è¦ä½¿ç”¨è¯¥æŒ‡ä»¤æŒ‡å®šåº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ target_link_libraries æ·»åŠ éœ€è¦é“¾æ¥çš„åº“åç§°ï¼ˆæˆ–è·¯å¾„ç­‰ï¼Œå‚è§å®˜æ–¹æ–‡æ¡£ï¼‰ã€‚ ç›¸å½“äºg++ä¸­-lçš„ä½œç”¨ã€‚ add_library æŠŠæŒ‡å®šçš„æºæ–‡ä»¶æ¥æ‰“åŒ…æˆåŠ¨æ€åº“æˆ–é™æ€åº“ã€‚ é—®ï¼šæºæ–‡ä»¶å†™.cppè¿˜æ˜¯.h? ä¼¼ä¹æ˜¯è¦å†™cppã€‚å†™.hçš„è¯ï¼Œä¼šåœ¨cmakeé˜¶æ®µæŠ¥é”™CMake Error: Cannot determine link language for target add_executable ä½¿ç”¨æŒ‡å®šçš„æºæ–‡ä»¶æ¥ç”Ÿæˆç›®æ ‡å¯æ‰§è¡Œæ–‡ä»¶ã€‚ å‚è€ƒ add_definitions å‘C/C++ç¼–è¯‘å™¨æ·»åŠ  -DXXX å®šä¹‰ã€‚å¦‚æœä»£ç ä¸­å®šä¹‰äº†#ifdef XXX #endifï¼Œè¿™ä¸ªä»£ç å—å°±ä¼šç”Ÿæ•ˆã€‚ å‚è€ƒ aux_source_directory ä½¿ç”¨æ–¹æ³•ä¸ºï¼šaux_source_directory(&amp;lt;dir&amp;gt; &amp;lt;variable&amp;gt;)ï¼Œå³æ ¹æ®dirå†…çš„æ‰€æœ‰æºä»£ç æ–‡ä»¶åç”Ÿæˆåˆ—è¡¨ï¼Œä¿å­˜åœ¨å˜é‡variableä¸­ã€‚ å‚è€ƒ add_subdirectory æ·»åŠ ä¸€ä¸ªå­ç›®å½•å¹¶æ„å»ºè¯¥å­ç›®å½•ã€‚ å­ç›®å½•ä¸‹åº”è¯¥åŒ…å«CMakeLists.txtæ–‡ä»¶å’Œä»£ç æ–‡ä»¶ã€‚ åæ–‡è®²ç»„ç»‡å…³ç³»æ—¶ä¼šé‡ç‚¹ä»‹ç»è¯¥æŒ‡ä»¤ã€‚ å‚è€ƒ file ä¸“æ³¨äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å’Œè·¯å¾„çš„è¯»ã€å†™ã€æŸ¥ç­‰ã€‚ å‚è€ƒï¼ˆcmakeæ–‡æ¡£ï¼‰ å‚è€ƒ message cmakeä¸­æ‰“å°ä¿¡æ¯çš„è¯­å¥ï¼Œç±»æ¯”Pythonä¸­çš„print() å‚è€ƒï¼ˆcmakeæ–‡æ¡£ï¼‰ option å®šä¹‰ä¸€ä¸ªboolå¼€å…³ï¼Œå¯åœ¨ç»ˆç«¯èµ‹å€¼ è¯­æ³•ä¸ºï¼šoption(&amp;lt;variable&amp;gt; &quot;&amp;lt;help_text&amp;gt;&quot; [value]) å‚è€ƒ å˜é‡è®¿é—®å˜é‡ä½¿ç”¨${}è¿›è¡Œå˜é‡çš„è®¿é—®ï¼Œå¦‚${VAR}ã€‚å®šä¹‰å˜é‡æ˜¾å¼å®šä¹‰ä½¿ç”¨setæ˜¾å¼å®šä¹‰å˜é‡ï¼ŒåŸºæœ¬çš„ç”¨æ³•ä¸ºset(&amp;lt;variable&amp;gt; &amp;lt;value&amp;gt;)ç¤ºä¾‹set(VAR &quot;I am a variable&quot;)message(&quot;${VAR}&quot;) # I am a variable æ³¨ï¼š å¦‚æœsetè¯­å¥çš„valueä¸åŠ åŒå¼•å·ï¼Œåˆ™å®šä¹‰çš„å˜é‡åˆ™è¢«è§£é‡Šæˆåˆ—è¡¨ï¼Œå¦‚ set(VAR I am a variable)message(&quot;${VAR}&quot;) # I;am;a;variable å¦‚æœmessageè¯­å¥ä¸­å¯¹å˜é‡çš„å¼•ç”¨ä¸åŠ åŒå¼•å·ï¼Œåˆ™è¾“å‡ºä¸­å„å…ƒç´ ä¸­æ— ç©ºæ ¼ï¼Œå¦‚ set(VAR &quot;I am a variable&quot;)message(${VAR}) # Iamavariable å‚è€ƒ-stackoverflow: When should I quote CMake variables?éšå¼å®šä¹‰ä¸¾ä¾‹ä½¿ç”¨project(PROJ_NAME)è¯­å¥æŒ‡å®šå·¥ç¨‹åç§°åï¼Œåˆ™&amp;lt;PROJ_NAME&amp;gt;_BINARY_DIRå’Œ&amp;lt;PROJ_NAME&amp;gt;_SOURCE_DIRåˆ™ä¼šè¢«éšå¼åœ°å®šä¹‰ï¼šproject(ToyDemo)message(&quot;&amp;lt;PROJ_NAME&amp;gt;_BINARY_DIR: ${ToyDemo_BINARY_DIR}&quot;)# output: path/to/current_bin_dirmessage(&quot;&amp;lt;PROJ_NAME&amp;gt;_SOURCE_DIR: ${ToyDemo_SOURCE_DIR}&quot;)# output: path/to/current_source_dirå†…ç½®å˜é‡ä»¥ä¸‹è®°å½•ä¸‹å¸¸è§çš„å†…ç½®å˜é‡ å˜é‡å å«ä¹‰ PROJECT_NAME é€šè¿‡project()æŒ‡ä»¤å®šä¹‰çš„é¡¹ç›®åç§° PROJECT_SOURCE_DIR æºCMakeLists.txtæ‰€åœ¨çš„ç›®å½• PROJECT_BINARY_DIR æ‰§è¡Œcmakeå‘½ä»¤æ‰€åœ¨çš„ç›®å½• æ§åˆ¶æŒ‡ä»¤å†™æ³•åˆ†æ”¯æ§åˆ¶if(&amp;lt;condition&amp;gt;) &amp;lt;commands&amp;gt;elseif(&amp;lt;condition&amp;gt;) &amp;lt;commands&amp;gt;else() # ()ä¸èƒ½çœ &amp;lt;commands&amp;gt;endif() # ()ä¸èƒ½çœ æ³¨ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&amp;lt;condition&amp;gt;ä¸­å¦‚æœè®¿é—®å˜é‡ï¼Œä¸ç”¨ï¼ˆä¸åº”ï¼‰åŠ ${} åŠ ä¸åŠ ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ :heavy_check_mark:if (VAR)ï¼šä¼šä»¥å˜é‡VARçš„å€¼ä¸ºåˆ¤æ–­æ¡ä»¶ã€‚ :x:if (${VAR})ï¼š${VAR}è®¿é—®å¾—åˆ°ä¸€ä¸ªå¸¸é‡æˆ–è€…å¦ä¸€ä¸ªå˜é‡ã€‚å¦‚æœ${VAR}æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œé‚£ä¹ˆifè¯­å¥ä¼šå¯»æ‰¾å’Œè¯¥å¸¸é‡åŒåçš„å˜é‡ä½œä¸ºåˆ¤æ–­æ¡ä»¶ï¼Œæ•…å¯èƒ½ä¼šå¯¼è‡´é¢„æ–™ä¹‹å¤–çš„ç»“æœã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªç»†è‡´çš„è§£é‡Šã€‚å®˜æ–¹æ–‡æ¡£ä¹Ÿæåˆ°è¿™ä¸ªé—®é¢˜ã€‚ **ç¤ºä¾‹** è§wikibooksã€‚å®Œæ•´è¯­æ³•è§„åˆ™è§å®˜æ–¹æ–‡æ¡£å¾ªç¯æ§åˆ¶foreachå‚è€ƒforeach(&amp;lt;loop_var&amp;gt; &amp;lt;items&amp;gt;) &amp;lt;commands&amp;gt;endforeach()foreach(&amp;lt;loop_var&amp;gt; RANGE &amp;lt;stop&amp;gt;) # æ³¨æ„å³ä¾§é—­åŒºé—´ï¼Œä¼šè¾“å‡º[0, stop]å…±stop + 1ä¸ªæ•°ï¼foreach(&amp;lt;loop_var&amp;gt; RANGE &amp;lt;start&amp;gt; &amp;lt;stop&amp;gt; [&amp;lt;step&amp;gt;])å…¶ä¸­itemsä»£æŒ‡è¦éå†çš„åˆ—è¡¨ï¼Œloop_varä»£æŒ‡æ­£åœ¨è¢«è¿­ä»£åˆ°çš„é¡¹ã€‚ç¤ºä¾‹set(mylist &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;)foreach(var ${mylist}) message(&quot;current value: ${var}&quot;)endforeach()foreach(var RANGE 3) message(&quot;current value: ${var}&quot;) # è¾“å‡º 0 1 2 3 å…±ã€4ã€‘ä¸ªæ•°ï¼endforeach()foreach(var RANGE 0 6 2) message(&quot;current value: ${var}&quot;) # è¾“å‡º 0 2 4 6endforeach()whilewhile(&amp;lt;condition&amp;gt;) &amp;lt;commands&amp;gt;endwhile()å¦‚æœéœ€è¦ç”¨åˆ°æ•°å­¦è®¡ç®—ï¼Œå‚ç…§è¿™é‡Œç¤ºä¾‹set(var 0)while(var LESS 3) message(&quot;cur var ${var}&quot;) math(EXPR var &quot;${var} + 1&quot;)endwhile()breakå’ŒcontinueæŠŠbreak()æˆ–continue()æ’å…¥åˆ°å¾ªç¯ä½“ä¸­ç»ˆæ­¢å¾ªç¯ã€‚å¸¸è§çš„æ–‡ä»¶ç»„ç»‡æ–¹å¼åŠåº”å¯¹ç­–ç•¥å«æœ‰å¤šä¸ªå­ç›®å½•ç¤ºä¾‹æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š.â”œâ”€â”€ CMakeLists.txtâ”œâ”€â”€ main.cppâ”œâ”€â”€ sub1â”‚ â”œâ”€â”€ CMakeLists.txtâ”‚ â”œâ”€â”€ test1.cppâ”‚ â””â”€â”€ test1.hâ””â”€â”€ sub2 â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ test2.cpp â””â”€â”€ test2.hä¸»ç›®å½•ä¸‹çš„CMakeLists.txt# CMakeLists.txtcmake_minimum_required(VERSION 3.10.2)project(test)include_directories(sub1)include_directories(sub2)add_subdirectory(sub1)add_subdirectory(sub2)add_executable(test main.cpp)target_link_libraries(test sub1_lib sub2_lib)ä¸»ç›®å½•ä¸‹çš„main.cpp// main.cpp#include &quot;test1.h&quot;#include &quot;test2.h&quot;#include &amp;lt;iostream&amp;gt;int main(int argc, char** argv){ test1_func(); test2_func(); return 0;}sub1ç›®å½•ä¸‹çš„CMakeLists.txt# sub1/CMakeLists.txtcmake_minimum_required(VERSION 3.10.2)project(sub1)add_library(sub1_lib test1.cpp)sub1ç›®å½•ä¸‹çš„test1.hå’Œtest1.cpp// sub1/test1.hvoid test1_func();// sub1/test1.cpp#include &quot;test1.h&quot;void test1_func(){}sub2ç›®å½•ä¸‹çš„CMakeLists.txt# sub2/CMakeLists.txtcmake_minimum_required(VERSION 3.10.2)project(sub2)add_library(sub2_lib test2.cpp)sub2ç›®å½•ä¸‹çš„test2.hå’Œtest2.cpp// sub2/test2.hvoid test2_func();// sub2/test2.cpp#include &quot;test2.h&quot;void test2_func(){}ä¹‹ååœ¨ä¸»ç›®å½•ä¸‹æ­£å¸¸æ‰§è¡Œcmakeå³å¯ã€‚éœ€è¦æ³¨æ„çš„é—®é¢˜ CMakeLists.txtæ–‡ä»¶åå¤§å°æ•æ„Ÿï¼Œå¦åˆ™ä¼šæŠ¥é”™&quot;CMake Error: does not appear to contain CMakeLists.txt&quot;å‚è€ƒ How to Build a CMake-Based Project Quick CMake tutorial CMake Tutorial Modern CMake CMake æ•™ç¨‹ CMake ä»å…¥é—¨åˆ°åº”ç”¨" }, { "title": "å¯¹Rooflineæ¨¡å‹çš„ç†è§£", "url": "/posts/%E5%AF%B9Roofline%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/", "categories": "ç†è®º", "tags": "Roofline", "date": "2022-09-03 18:11:00 +0800", "snippet": "Rooflineæ¨¡å‹éå¸¸ç®€æ´ï¼Œå´å¯¹è®¡ç®—åŠ é€Ÿæœ‰å¾ˆå¥½çš„æŒ‡å¯¼æ„ä¹‰ã€‚å®ƒè¦è§£å†³çš„æ˜¯â€œè®¡ç®—é‡ä¸º$N$ä¸”è®¿å­˜é‡ä¸º$V$çš„ç®—æ³•ï¼Œåœ¨ç®—åŠ›ä¸º$P_{peak}$ä¸”å¸¦å®½ä¸º$B$çš„è®¡ç®—å¹³å°æ‰€èƒ½è¾¾åˆ°çš„ç†è®ºæ€§èƒ½ä¸Šé™æ˜¯å¤šå°‘â€è¿™ä¸ªé—®é¢˜ã€‚å¯ä»¥å¸®åŠ©åˆ†æå½“å‰ç®—æ³•çš„æ€§èƒ½æ˜¯å—ç®—æ³•å®ç°æ‰€é™è¿˜æ˜¯å¹³å°æœ¬èº«ç®—åŠ›é™åˆ¶ï¼Œè¿›è€Œæ›´æœ‰é’ˆå¯¹æ€§åœ°æ”¹è¿›ç®—æ³•æ€§èƒ½ã€‚Rooflineæ¨¡å‹ç»™å®šä¸€ä¸ªè®¡ç®—å¹³å°ï¼Œå®ƒçš„å³°å€¼ç®—åŠ›\\(P_{peak}\\)ï¼ˆå•ä½flop/sï¼‰ï¼Œå¸¦å®½\\(B\\)ï¼ˆå•ä½byte/sï¼‰ã€‚ç»™å®šä¸€ä¸ªç®—æ³•ï¼Œå®ƒçš„è®¡ç®—é‡ä¸º\\(N\\)ï¼ˆå•ä½flopï¼‰ï¼Œè®¿å­˜é‡ä¸º\\(V\\)ï¼ˆå•ä½byteï¼‰ï¼Œå®šä¹‰è®¡ç®—å¼ºåº¦\\(I\\)ï¼ˆcomputational intensityï¼Œè®¡ç®—è®¿å­˜æ¯”ï¼Œå•ä½flop/byteï¼‰\\[I = \\frac{N}{V}\\]åˆ™è¯¥ç®—æ³•çš„ç†è®ºæ€§èƒ½\\(P\\)ä¸Šé™ä¸º\\[P = min(P_{peak}, IB)\\] æ³¨ï¼š\\(P\\)ä»£è¡¨ç®—æ³•æ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼Œå³ä½¿ç”¨çš„ç®—åŠ›ï¼Œä¸ç­‰åŒäºç®—æ³•æ‰§è¡Œæ—¶é—´ã€‚æ¯”å¦‚è¿™é‡Œä¸¾çš„ä¾‹å­ï¼šå•ä»\\(P\\)æ¥è¯´ï¼ŒVGGæ˜¯MobileNetçš„3å€ï¼ˆä¸”VGGå¤„äºCompute limitedåŒºåŸŸï¼ŒMobileNetå¤„äºMemory limitedåŒºåŸŸï¼‰ï¼Œä½†æ˜¯MobileNetçš„æ€»è®¡ç®—é‡æ˜¯VGGçš„ä¸‰ååˆ†ä¹‹ä¸€ï¼Œå› æ­¤MobileNetçš„è®¡ç®—æ—¶é—´æ˜¯VGGçš„ååˆ†ä¹‹ä¸€ï¼ˆç†è®ºå€¼ï¼‰ã€‚ç»˜åˆ¶ç®—æ³•æ€§èƒ½\\(P\\)å’Œç®—æ³•è®¡ç®—å¼ºåº¦\\(I\\)çš„æ›²çº¿ï¼Œå¦‚ä¸‹å›¾çº¢è‰²å®çº¿æ‰€ç¤ºå¯ä»¥çœ‹åˆ°ï¼Œåœ¨Rooflineæ¨¡å‹ä¸­ï¼Œç®—æ³•çš„æ€§èƒ½ç”±\\(P_{peak}\\)ï¼Œ\\(B\\)å’Œ\\(I\\)ä¸‰ä¸ªå˜é‡å†³å®šã€‚å‰é¢äºŒè€…æ˜¯ç¡¬ä»¶æœ¬èº«çš„å‚æ•°ï¼Œå› æ­¤ç¼–ç æ—¶ä¸»è¦å¯ä»¥è€ƒè™‘ä»\\(I\\)å‡ºå‘ï¼Œæ”¹å–„æ€§èƒ½ã€‚è®¡ç®—å¼ºåº¦\\(I\\)å¯ä»¥å½¢è±¡åœ°ä½“ç°ç¼–å†™çš„ä»£ç è´¨é‡ã€‚ å½“\\(I \\ge \\frac{P_{peak}}{B}\\)æ—¶ï¼Œå¤„äºcompute limitedåŒºåŸŸï¼Œæ­¤æ—¶æ‰€ä½¿ç”¨çš„ç®—åŠ›è¾¾åˆ°ç¡¬ä»¶å³°å€¼ï¼Œç®—åŠ›å……åˆ†åˆ©ç”¨ï¼› è¦è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œåˆ™éœ€è¦æå‡ç¡¬ä»¶æœ¬èº«å³°å€¼ç®—åŠ›ã€‚ å½“\\(I &amp;lt; \\frac{P_{peak}}{B}\\)æ—¶ï¼Œå¤„äºMemory limitedåŒºåŸŸï¼Œç®—æ³•æ‰§è¡Œå—åˆ°è®¿å­˜é™åˆ¶ï¼ˆè®¿å­˜è¿‡å¤šæˆ–åˆ©ç”¨ç‡è¾ƒä½ï¼‰ã€‚ æ­¤æ—¶éœ€è¦æå‡è®¡ç®—å¼ºåº¦ï¼Œæ¯”å¦‚ï¼š ç®—å­èåˆï¼Œåˆ™æ˜¯åœ¨ç›¸åŒè®¡ç®—é‡çš„æƒ…å†µä¸‹ï¼Œé¿å…äº†ä¸­é—´çš„è®¿å­˜è¿‡ç¨‹ï¼Œä»è€Œé™ä½äº†è®¿å­˜é‡ï¼Œæå‡è®¡ç®—å¼ºåº¦ï¼› çŸ©é˜µä¹˜æ³•ä¸­ï¼Œé€šè¿‡åˆç†çš„åˆ†å—ç­‰æ–¹å¼ï¼Œå‡ä½è®¿å­˜é‡ï¼Œå¢å¤§è®¡ç®—å¼ºåº¦ã€‚ ä¸¾ä¾‹æ¯”å¦‚ç»™å®šè®¡ç®—å¹³å°å³°å€¼ç®—åŠ›\\(P_{peak} = 4\\ GFlop/s\\)ï¼Œå¸¦å®½\\(B = 10\\ GByte/s\\)ä¸‹é¢ä¸€ä¸ªå°demofloat a[N], b[N], c[N];for (int i = 0; i &amp;lt; N; ++i) { c[i] = a[i] + b[i];}æ¯ä¸ªå¾ªç¯è¿›è¡Œäº†2æ¬¡æµ®ç‚¹è¿ç®—ï¼ˆ2 flopï¼‰ï¼Œäº§ç”Ÿ12 byteçš„è®¿å­˜ï¼ˆ3 * 4 byte/floatï¼‰ï¼Œæ•…è®¡ç®—å¼ºåº¦ä¸º\\(\\frac{1}{6}\\) flop/byte &amp;lt; \\(\\frac{P_{peak}}{B} = \\frac{2}{5}\\) flop/byteï¼Œæ•…å¤„äºmemory limitedåŒºåŸŸï¼Œéœ€è¦è¿›ä¸€æ­¥æå‡è®¡ç®—å¼ºåº¦ä»¥æå‡æ€§èƒ½ã€‚å‚è€ƒ A very short intro to the Roofline model Roofline Modelä¸æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½åˆ†æ Roof-line Modelæ€§èƒ½åˆ†ææ¨¡å‹ç®€ä»‹" }, { "title": "Regexæ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ ä¸ä½¿ç”¨", "url": "/posts/Regex%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "regex", "date": "2022-08-18 10:54:00 +0800", "snippet": "æ„Ÿè§‰Regexæ­£åˆ™è¡¨è¾¾å¼æ˜¯è¿™æ ·ä¸€ç§ä¸œè¥¿ï¼š æ²¡æœ‰éœ€æ±‚æ—¶å»å­¦ä¹ å®ƒï¼šå¤©å•Šè¿™ä¸€ä¸²ç¬¦å·éƒ½æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæ€ä¹ˆå­¦å•Šï¼ å½“æœ‰éœ€æ±‚ç”¨åˆ°å®ƒå¹¶ä¸”æˆåŠŸåº”ç”¨æ—¶ï¼šçœŸæ˜¯å¤ªæ–¹ä¾¿äº†ï¼çœŸé¦™ï¼Œè¦å­¦ä¹ ï¼åŠ¨æœºæœ€è¿‘å®ä¹ çš„æ—¶å€™ï¼Œéœ€è¦ååŠ©å¤„ç†ä»£ç å®¡æŸ¥ç³»ç»Ÿçš„å‘Šè­¦ï¼Œå…¶ä¸­æœ‰å¤§é‡ï¼ˆçº¦1.6kï¼‰çš„å‘½åé£æ ¼çš„é—®é¢˜ï¼Œéœ€è¦å¯¹åŸæœ‰çš„å˜é‡å‘½åè¿›è¡Œæ‰¹é‡æ›¿æ¢ã€‚æˆ‘ç”¨çš„ç¼–è¾‘å™¨æ˜¯VS Codeï¼Œå®ƒçš„æœ´ç´ çš„å­—ç¬¦ä¸²æ›¿æ¢åŠŸèƒ½å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚äº†ï¼Œæ¯”å¦‚æˆ‘éœ€è¦åšä»¥ä¸‹ä¸€äº›æ›¿æ¢ï¼šsrc0_32f -&amp;gt; vSrc0dst0_32f -&amp;gt; vDst0...æƒ³åˆ°çš„æ˜¯ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¸æ›¿æ¢ï¼Œå¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæ‰€é‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼šæœç´¢æ¡†å¡«ï¼š([a-z])(\\w+)_32fæ›¿æ¢æ¡†å¡«ï¼šv\\U$1$2çœŸæ˜¯æ–¹ä¾¿ï¼è¿™ä¿ƒä½¿æˆ‘å¼€å¯regexæ­£åˆ™è¡¨è¾¾å¼çš„å­¦ä¹ å’Œç§¯ç´¯ã€‚åŸºç¡€ åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶ï¼Œç»å¸¸ä¼šæœ‰æŸ¥æ‰¾ç¬¦åˆæŸäº›å¤æ‚è§„åˆ™çš„å­—ç¬¦ä¸²çš„éœ€è¦ã€‚æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ç”¨äºæè¿°è¿™äº›è§„åˆ™çš„å·¥å…·ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„èµ„æ–™ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šäº†ï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªå¯¹æˆ‘å¸®åŠ©æ¯”è¾ƒå¤§çš„ï¼š æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ ä¸­æ–‡ï¼Œä»‹ç»æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚ Python RegEx :+1: æä¾›äº†å„ç§regexçš„å®ä¾‹è®²è§£ã€‚ æœ¬é¡µä»¥ä¸‹å†…å®¹ä¸»è¦åŸºäºæ­¤æ•´ç†è€Œæˆã€‚ å…ƒå­—ç¬¦ï¼ˆMetacharactersï¼‰Regexçš„å…ƒå­—ç¬¦æœ‰ï¼š[] . ^ $ * + ? {} | () \\ []ï¼šå®šä¹‰ä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œå½“æŸä¸€ä¸ªå•ä¸ªå­—ç¬¦å±äºè¯¥é›†åˆæ—¶ï¼Œåˆ™åŒ¹é… å¦‚è§„åˆ™[abc]ä½œç”¨äºappleä¼šå‘ç”Ÿä¸€æ¬¡åŒ¹é… å¯ä½¿ç”¨-è¡¨ç¤ºä¸€ä¸ªåŒºé—´ï¼Œå¦‚[0-9]ç­‰ä»·äº[0123456789]ï¼Œ[a-z]ç­‰ä»·äº[abcd...xyz]ï¼Œ[A-Z]ç­‰ä»·äº[ABCD...XYZ] [0-39]ç­‰ä»·äº[01239] [a-z0-9]ç­‰ä»·äº[abcd...xyz0123456789] ä½¿ç”¨^å–é›†åˆçš„è¡¥é›† å¦‚[^abc]ä»£è¡¨æ‰€æœ‰ä¸å±äº[abc]çš„å­—ç¬¦é›†åˆ .ï¼šåŒ¹é…é™¤æ¢è¡Œç¬¦\\nä¹‹å¤–çš„æ‰€æœ‰å•ä¸ªå­—ç¬¦ å¦‚è§„åˆ™.ä½œç”¨äºabcdæ—¶ä¼šå‘ç”Ÿ4æ¬¡åŒ¹é…ï¼ˆåˆ†åˆ«ä¸ºa, b, c, dï¼‰ï¼›è§„åˆ™..ä½œç”¨äºabcdæ—¶ä¼šå‘ç”Ÿ2æ¬¡åŒ¹é…ï¼ˆåˆ†åˆ«ä¸ºab, cdï¼‰ï¼› ^ï¼šåˆ¤æ–­ä»¥åç»­å­—ç¬¦/ä¸²ä¸ºå¼€å¤´çš„å­—ç¬¦/ä¸² å¦‚è§„åˆ™^abä½œç”¨äºabcä¼šå‘ç”ŸåŒ¹é…ï¼Œä½œç”¨äºacbåˆ™ä¸ä¼šå‘ç”ŸåŒ¹é… $ï¼šåˆ¤æ–­ä»¥å‰ç¼€å­—ç¬¦/ä¸²ä¸ºç»“å°¾çš„å­—ç¬¦/ä¸² å¦‚è§„åˆ™a$ä½œç”¨äºformulaä¼šå‘ç”ŸåŒ¹é…ï¼Œä½œç”¨äºcabåˆ™ä¸ä¼šå‘ç”ŸåŒ¹é… è®¡æ•°å…ƒå­—ç¬¦ï¼š*ï¼Œ+ï¼Œ?ï¼Œ{} *ï¼šå…¶å·¦æ–¹çš„å•ä¸ªå­—ç¬¦é‡å¤å¤§äºç­‰äº0æ¬¡ å¦‚ma*nå¯åŒ¹é…mnï¼Œmanï¼Œmaaaaan +ï¼šå…¶å·¦æ–¹çš„å•ä¸ªå­—ç¬¦é‡å¤å¤§äºç­‰äº1æ¬¡ å¦‚ma+nå¯åŒ¹é…manï¼Œmaaaaan ?ï¼šå…¶å·¦æ–¹çš„å•ä¸ªå­—ç¬¦é‡å¤0æ¬¡æˆ–1æ¬¡ å¦‚ma?nå¯åŒ¹é…mnï¼Œman {} ï¼š{m, n}è¡¨ç¤ºé‡å¤å¤§äºç­‰äºmæ¬¡ï¼Œå°äºç­‰äºnæ¬¡ æ¯”å¦‚[0-9]{2, 4}åŒ¹é…é•¿åº¦åœ¨2~4ä¹‹é—´çš„æ•°å­—ä¸² |ï¼šåŒorçš„å«ä¹‰ï¼Œå½“æŸä¸€ä¸ªå•ä¸ªå­—ç¬¦å±äº|è¿æ¥çš„æ‰€æœ‰å­—ç¬¦ä¸­çš„ä¸€ä¸ªæ—¶ï¼Œåˆ™å‘ç”ŸåŒ¹é… å¦‚è§„åˆ™a|bä½œç”¨äºadbæ—¶ï¼Œå‘ç”Ÿä¸¤æ¬¡åŒ¹é…ï¼ˆaå’Œbï¼‰ æ„Ÿè§‰æœ‰ç‚¹åƒ[]å•Š ()ï¼šåˆ†ç»„ ä¸€ä¸ª()æ‰£èµ·æ¥çš„ä¸ºä¸€ä¸ªç»„ã€‚å½“éœ€è¦æŠŠåŒ¹é…å­—ç¬¦ä¸²ä¸­çš„æŸä¸€å°ç»„æå–å‡ºæ¥ï¼Œæ¯”è¾ƒæœ‰ç”¨ï¼š æ¯”å¦‚è¦æŠŠ0000_32fæ›¿æ¢ä¸º0000_32sï¼Œåˆ™å¯ä½¿ç”¨ï¼š æœç´¢æ¡†å¡«([0-9]{4})_32fï¼Œæ›¿æ¢æ¡†å¡«$1_32s å…¶ä¸­$1å°±è¡¨ç¤ºç¬¬ä¸€ç»„çš„å†…å®¹ï¼ˆregexä»1å¼€å§‹è®¡æ•°ï¼‰ æ¯”å¦‚è¦æŠŠ0000_32fæ›¿æ¢ä¸º0000_32Fï¼Œåˆ™å¯ä½¿ç”¨ï¼š æœç´¢æ¡†å¡«([0-9]{4})_32(\\w)ï¼Œæ›¿æ¢æ¡†å¡«$1_32\\U$2 å…¶ä¸­\\Uè¡¨ç¤ºå°†å¯¹åº”çš„å­—ç¬¦è½¬ä¸ºå¤§å†™ \\ï¼šå¸¸è§çš„è½¬ç§»å­—ç¬¦çš„å«ä¹‰ç‰¹æ®Šå­—ç¬¦ \\dï¼šç­‰ä»·äº[0-9] \\Dï¼šç­‰ä»·äº[^0-9] \\wï¼šç­‰ä»·äº[a-zA-Z0-9_]ï¼ˆæ³¨æ„è¿˜å¯åŒ¹é…ä¸‹åˆ’çº¿ï¼‰ \\Wï¼šç­‰ä»·äº[^a-zA-Z0-9_] \\sï¼šåŒ¹é…ä¸€ä¸ªç©ºç™½ä½ç½®å…¶ä»– åœ¨çº¿æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼çš„å·¥å…·ï¼šWegester" }, { "title": "Python argparseä½¿ç”¨æ–¹æ³•å°ç»“", "url": "/posts/Python-argparse%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%B0%8F%E7%BB%93/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "Python, argparse", "date": "2022-05-10 19:42:00 +0800", "snippet": "æœ¬é¡µå¯¹Pythonå¸¸ç”¨çš„å‘½ä»¤è¡Œè§£ææ¨¡å—argparseçš„å¸¸ç”¨æ–¹æ³•åšä¸€ä¸ªå°ç»“ï¼Œä¸ºäº†æ¸…æ™°å’Œç®€åŒ–ï¼Œæ¯ä¸ªä¾‹ç¨‹åªæ¶‰åŠä¸€ç§åŠŸèƒ½ï¼Œä¾¿äºæ—¥åå‚è€ƒã€‚import argparsedef parse_args(): parser = argparse.ArgumentParser() parser.add_argument(&#39;name&#39;, help=&#39;test positional arg 1&#39;) parser.add_argument(&#39;age&#39;, help=&#39;test positional arg 2&#39;) ## ==&amp;gt; usage: python demo.py zg 25 parser.add_argument(&#39;-i&#39;, &#39;--input&#39;, help=&#39;test short and long arg&#39;) # optional, default is None parser.add_argument(&#39;--bool&#39;, action=&#39;store_true&#39;, help=&#39;test action#store_true&#39;) ## ==&amp;gt; usage: python demo.py --bool # out: Namespace(bool=True) parser.add_argument(&#39;-v&#39;, action=&#39;append&#39;, help=&quot;test action#append&quot;) ## ==&amp;gt; usage: python demo.py -v v1 -v v2 # out: Namespace(v=[&#39;v1&#39;, &#39;v2&#39;]) parser.add_argument(&#39;--required&#39;, required=True, help=&#39;test required&#39;) parser.add_argument(&#39;-d&#39;, dest=&#39;d_dest&#39;, help=&#39;test dest&#39;) ## ==&amp;gt; usage: python demo.py -d 3 ## out: Namespace(d_dest=&#39;3&#39;) # https://www.pynote.net/archives/2121 parser.add_argument(&#39;-i&#39;, help=&#39;test type&#39;) ## ==&amp;gt; usage: python demo.py -i 3 ## out: Namespace(i=&#39;3&#39;) parser.add_argument(&#39;-i&#39;, type=int, help=&#39;test type&#39;) ## ==&amp;gt; usage: python demo.py -i 3 ## out: Namespace(i=3) parser.add_argument(&#39;-i&#39;, default=3, help=&#39;test default&#39;) ## ==&amp;gt; usage: python demo.py ## out: Namespace(i=3) ## ==&amp;gt; usage: python demo.py -i 5 ## out: Namespace(i=&#39;5&#39;) # pay attention to the datatype here parser.add_argument(&#39;-v&#39;, metavar=&#39;--value&#39;, help=&quot;test metavar&quot;) ## ==&amp;gt; usage: python demo.py -h # It provides a different name for optional argument in [error and help messages] # https://docs.python.org/zh-cn/3/library/argparse.html#nargs parser.add_argument(&#39;-v&#39;, nargs=2, help=&quot;test nargs N&quot;) ## ==&amp;gt; usage: python demo.py -v 1 2 (only allow constant num) # out: Namespace(v=[&#39;1&#39;, &#39;2&#39;]) =&amp;gt; list ## ==&amp;gt; usage: python demo.py -v 1 # out: demo.py: error: argument -v: expected 2 arguments parser.add_argument(&#39;-v&#39;, nargs=&#39;*&#39;, help=&quot;test nargs *&quot;) # * nargs expects 0 or more arguments (allow varible num) ## ==&amp;gt; usage: python demo.py -v 1 2... (variable num) parser.add_argument(&#39;-v&#39;, nargs=&#39;+&#39;, help=&quot;test nargs *&quot;) # similar to &#39;+&#39; nargs parser.add_argument(&#39;--platform&#39;, &#39;-p&#39;, choices=[&#39;windows&#39;, &#39;linux&#39;], help=&quot;test choices&quot;) # choices limits argument values to the given list args = parser.parse_args() return argsif __name__ == &quot;__main__&quot;: args = parse_args() print(args) # a = args.XXX" }, { "title": "onnx-modifier ONNXå¯è§†åŒ–ç¼–è¾‘!", "url": "/posts/ONNX%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BC%96%E8%BE%91/", "categories": "ä¸“ä¸šç§¯ç´¯, å·¥å…·å¼€å‘", "tags": "onnx", "date": "2022-05-01 14:00:00 +0800", "snippet": " æœ¬æ–‡å¯èƒ½æœªåŠæ—¶æ›´æ–°ï¼Œè¯·ç‚¹å‡» onnx-modifier githubä»“åº“ æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬å’Œç‰¹æ€§ã€‚ONNX(Open Neural Network Exchange) æ˜¯ä¸€ç§é’ˆå¯¹æœºå™¨å­¦ä¹ æ‰€è®¾è®¡çš„å¼€æ”¾å¼çš„æ–‡ä»¶æ ¼å¼ï¼Œç»å¸¸ä½œä¸ºä¸åŒæ¡†æ¶æ¨¡å‹è½¬åŒ–çš„ä¸­é—´æ–‡ä»¶ã€‚æœ‰æ—¶æˆ‘ä»¬æ‹¿åˆ°ONNXæ–‡ä»¶ï¼Œæƒ³å°†å®ƒè¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œæ¯”å¦‚ï¼š åˆ é™¤éƒ¨åˆ†èŠ‚ç‚¹ã€‚ æ¯”å¦‚ï¼ŒONNXæ–‡ä»¶ä¸­ä¸€äº›å‰åå¤„ç†çš„ç®—å­èŠ‚ç‚¹ï¼Œä»¥æ–¹ä¾¿åç»­éƒ¨ç½²ã€‚ ä¿®æ”¹èŠ‚ç‚¹è¾“å…¥è¾“å‡ºåã€‚ æ¯”å¦‚ä¿®æ”¹æŸä¸€èŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºåç§°ï¼Œæ›´æ”¹æ¨¡å‹æ‹“æ‰‘ç»“æ„ã€‚ ç¼–è¾‘èŠ‚ç‚¹å±æ€§å€¼ã€‚ å¢åŠ æ–°èŠ‚ç‚¹ã€‚ç›®å‰å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼Œå…ˆå¯è§†åŒ–æ¨¡å‹å›¾ç»“æ„ï¼Œç„¶ååŸºäºONNXçš„Python APIç¼–å†™è„šæœ¬ï¼Œå¯¹æ¨¡å‹å›¾ç»“æ„è¿›è¡Œç¼–è¾‘ã€‚ä½†è¿™å¯èƒ½éœ€è¦æˆ‘ä»¬åœ¨å¯è§†åŒ–-è„šæœ¬-å¯è§†åŒ–-â€¦ä¹‹é—´åå¤æ¨ªè·³ã€‚è€Œä¸”åœ¨ä¸€å¼ åºå¤§çš„å›¾ä¸Šæœé›†æƒ³è¦ä¿®æ”¹çš„èŠ‚ç‚¹ï¼Œä¹Ÿæ¯”è¾ƒç¹çè€—æ—¶ã€‚ğŸ‘‹èƒ½ä¸èƒ½æœ‰ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å®æ—¶é¢„è§ˆç¼–è¾‘åçš„å¯è§†åŒ–æ•ˆæœï¼Œä»è€Œæ›´æ–¹ä¾¿ï¼Œå¿«æ·ï¼Œç›´è§‚åœ°å®ç°ONNXæ¨¡å‹çš„ç¼–è¾‘å‘¢ï¼Ÿ:rocket: è¿™ä¾¿æ˜¯onnx-modifier (github)å¼€å‘çš„åŠ¨æœºã€‚æ‰€æœ‰çš„ç¼–è¾‘ä¿¡æ¯å°†æœ€ç»ˆæ±‡æ€»ï¼Œç»Ÿä¸€é€ç”±ONNX Python APIå¤„ç†ï¼Œå¾—åˆ°ç¼–è¾‘åçš„ONNXæ¨¡å‹æ–‡ä»¶ã€‚ç›®å‰å·²æ”¯æŒä¸‹åˆ—æ“ä½œï¼š åˆ é™¤/æ¢å¤èŠ‚ç‚¹ åˆ é™¤å•ä¸ªèŠ‚ç‚¹ åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹åŠæ‰€æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ æ¢å¤è¯¯åˆ çš„èŠ‚ç‚¹ ä¿®æ”¹èŠ‚ç‚¹è¾“å…¥è¾“å‡ºå ç¼–è¾‘èŠ‚ç‚¹å±æ€§å€¼ å¢åŠ æ–°èŠ‚ç‚¹ï¼ˆbetaï¼‰onnx-modifieråŸºäºæµè¡Œçš„æ¨¡å‹å¯è§†åŒ–å·¥å…· Netron å’Œè½»é‡çº§Webåº”ç”¨æ¡†æ¶ flask å¼€å‘ã€‚å¸Œæœ›å®ƒèƒ½ç»™ç¤¾åŒºå¸¦æ¥ä¸€äº›è´¡çŒ®~å®‰è£…ä¸è¿è¡Œç›®å‰æ”¯æŒä¸¤ç§æ–¹æ³•è¿è¡Œonnx-modifierï¼šæºç +å‘½ä»¤è¡Œå¯åŠ¨ æ‹‰å–onnx-modifierï¼Œå®‰è£…æ‰€éœ€è¦çš„Pythonåº“ git clone git@github.com:ZhangGe6/onnx-modifier.gitcd onnx-modifier pip install onnxpip install flask è¿è¡Œ python app.py ä»å¯æ‰§è¡Œæ–‡ä»¶å¯åŠ¨ Windows: ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶onnx-modifier.exe (27.6MB)ï¼ŒåŒå‡»å³å¯å¯åŠ¨ã€‚ é»˜è®¤ä½¿ç”¨Edgeæµè§ˆå™¨ä½œä¸ºè¿è¡Œç¯å¢ƒã€‚ ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„æ­¥éª¤è®°å½•åœ¨app_desktop.pyæ–‡ä»¶ä¸­ã€‚æœªæ¥ä¼šä¸ºå…¶ä»–å¹³å°ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ ç‚¹å‡»è¾“å‡ºä¸­çš„urlï¼ˆå¦‚http://127.0.0.1:5000/ï¼‰ï¼Œå³å¯åœ¨æµè§ˆå™¨ä¸­è¿›å…¥onnx-modifierç•Œé¢ã€‚ç‚¹å‡»Open Model...ï¼Œä¸Šä¼ æ‰€éœ€è¦ç¼–è¾‘çš„æ¨¡å‹æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•åï¼Œç½‘ç»œå¯è§†åŒ–ç»“æ„ä¼šè‡ªåŠ¨æ˜¾ç¤ºã€‚ç”¨æ³•å›¾ç»“æ„å±‚çº§çš„æ“ä½œæŒ‰é’®æ”¾ç½®åœ¨å¯è§†åŒ–é¡µé¢çš„å·¦ä¸Šè§’ï¼Œç›®å‰æœ‰å››ä¸ªï¼šRefreshï¼ŒResetï¼ŒDownloadå’ŒAdd node. å®ƒä»¬çš„åŠŸèƒ½åˆ†åˆ«ä¸ºï¼š Refreshï¼šåˆ·æ–°ç•Œé¢ï¼Œé¢„è§ˆå½“å‰ç¼–è¾‘å¾—åˆ°çš„æ¨¡å‹å›¾ç»“æ„ï¼› åœ¨å½“å‰ç‰ˆæœ¬é‡Œï¼Œæ¨¡å‹å›¾ç»“æ„ä¼šåœ¨æ¯æ¬¡ç¼–è¾‘æ“ä½œåå³æ—¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°ã€‚æ‰€ä»¥è¯¥æŒ‰é’®ç”¨åˆ°çš„æ¬¡æ•°ä¼šæ¯”ä¹‹å‰çš„ç‰ˆæœ¬é‡Œå°‘ä¸Šä¸å°‘ï¼ˆè§£æ”¾åŒæ‰‹:raised_hands:ï¼‰ã€‚ Resetï¼šé‡ç½®æ¨¡å‹å›¾ç»“æ„ä¸ºå¯¼å…¥æ—¶çš„åˆå§‹çŠ¶æ€ï¼› Downloadï¼šä¿å­˜ç¼–è¾‘åçš„æ¨¡å‹æ–‡ä»¶åˆ°æœ¬åœ°ã€‚ Add nodeï¼šå‘å½“å‰æ¨¡å‹ä¸­ï¼Œæ·»åŠ æ–°èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹å±‚çº§çš„æ“ä½œéƒ½åœ¨èŠ‚ç‚¹ä¾§è¾¹æ é‡Œï¼Œç‚¹å‡»æŸä¸€èŠ‚ç‚¹åå³å¯å¼¹å‡ºã€‚ä¸€èµ·æ¥è¯¦ç»†åº·åº·ã€‚åˆ é™¤/æ¢å¤èŠ‚ç‚¹åˆ é™¤èŠ‚ç‚¹æœ‰ä¸¤ç§æ¨¡å¼ï¼šDelete With Children å’Œ Delete Single Node. åè€…åªåˆ é™¤å½“å‰å•ä¸ªèŠ‚ç‚¹ï¼›è€Œå‰è€…è¿˜ä¼šè‡ªåŠ¨åˆ é™¤ä»¥è¿™ä¸ªèŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ é™¤ä¸€é•¿ä¸²èŠ‚ç‚¹æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šæ¯”è¾ƒæœ‰ç”¨ã€‚ Delete With ChildrenåŸºäºå›æº¯ç®—æ³•å®ç°ã€‚æ‰§è¡Œåˆ é™¤æ“ä½œåï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹é¦–å…ˆä¼šå˜ç°æ˜¾ç¤ºï¼Œä»¥ä¾›é¢„è§ˆã€‚å¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹è¢«è¯¯åˆ äº†ï¼Œåœ¨è¯¥èŠ‚ç‚¹çš„ä¾§è¾¹æ ç‚¹å‡»Recover Nodeå³å¯ä»¥å°†å…¶æ¢å¤åˆ°å›¾ä¸­ã€‚é¢„è§ˆç¡®è®¤åˆ é™¤æ“ä½œæ— è¯¯åï¼Œç‚¹å‡»Enterï¼Œå›¾ç»“æ„ä¼šåˆ·æ–°ï¼Œæ˜¾ç¤ºèŠ‚ç‚¹åˆ é™¤åçš„çŠ¶æ€ã€‚ä¸€ä¸ªå…¸å‹çš„åˆ é™¤æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¿®æ”¹èŠ‚ç‚¹è¾“å…¥è¾“å‡ºåé€šè¿‡ä¿®æ”¹èŠ‚ç‚¹çš„è¾“å‡ºè¾“å‡ºåï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å‹æ‹“æ‰‘ç»“æ„è¿›è¡Œä¿®æ”¹ï¼ˆå¦‚åˆ é™¤ä¸€äº›é¢„å¤„ç†/åå¤„ç†èŠ‚ç‚¹ï¼‰ã€‚è¯¥åŠŸèƒ½åŒæ ·å¯ä»¥ç”¨åœ¨æ›´æ”¹æ¨¡å‹çš„è¾“å‡ºçš„åç§°ï¼ˆå³ä¿®æ”¹æ¨¡å‹å¶å­èŠ‚ç‚¹çš„è¾“å‡ºåï¼‰ã€‚é‚£åœ¨onnx-modiferä¸­è¦æ€ä¹ˆåšå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæ‰¾åˆ°èŠ‚ç‚¹ä¾§è¾¹æ çš„è¾“å…¥è¾“å‡ºå¯¹åº”çš„è¾“å…¥æ¡†ï¼Œé”®å…¥æ–°çš„åç§°å°±å¯ä»¥å•¦ã€‚å›¾ç»“æ„ä¼šæ ¹æ®é”®å…¥çš„åç§°å³æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨ä¸‹å›¾æ‰€ç¤ºçš„æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åˆ é™¤é¢„å¤„ç†å¯¹åº”çš„èŠ‚ç‚¹ï¼ˆSub-&amp;gt;Mul-&amp;gt;Sub-&amp;gt;Transposeï¼‰ï¼Œå¯ä»¥è¿™æ ·åšï¼š ç‚¹å‡»ç¬¬ä¸€ä¸ªConvèŠ‚ç‚¹ï¼Œåœ¨å¼¹å‡ºçš„å±æ€§æ ä¸­ï¼Œå°†è¾“å…¥åç§°æ”¹ä¸ºserving_default_input:0 (data_0èŠ‚ç‚¹çš„è¾“å‡ºå)ï¼› å›¾ç»“æ„è‡ªåŠ¨åˆ·æ–°ï¼Œå¯ä»¥å‘ç°ï¼Œè¾“å…¥èŠ‚ç‚¹å·²ç»å’Œç¬¬ä¸€ä¸ªConvèŠ‚ç‚¹ç›´æ¥ç›¸è¿ï¼Œå‡ ä¸ªé¢„å¤„ç†èŠ‚ç‚¹ä¹Ÿå·²ç»ä»å‰å‘å›¾ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå°†å®ƒä»¬åˆ é™¤ï¼› å®Œå·¥ï¼ˆç‚¹å‡»Downloadå°±å¯ä»¥è·å¾—ç¼–è¾‘åçš„ONNXæ¨¡å‹å•¦ï¼‰ã€‚ å¦‚æœæˆ‘ä»¬å¸Œæœ›é€šè¿‡ä¿®æ”¹ï¼Œè®©èŠ‚ç‚¹$A$ï¼ˆæ¯”å¦‚ä¸Šä¾‹ä¸­çš„data_0èŠ‚ç‚¹ï¼‰è¿å‘èŠ‚ç‚¹$B$ï¼ˆæ¯”å¦‚ä¸Šä¾‹ä¸­çš„ç¬¬ä¸€ä¸ªConvèŠ‚ç‚¹ï¼‰ï¼Œå»ºè®®çš„æ–¹å¼æ˜¯ï¼šå°†èŠ‚ç‚¹$B$çš„è¾“å…¥åç§°ä¿®æ”¹ä¸ºèŠ‚ç‚¹$A$çš„è¾“å‡ºåç§°ï¼Œè€Œä¸æ˜¯æŠŠ$A$çš„è¾“å‡ºåç§°ä¿®æ”¹ä¸ºèŠ‚ç‚¹$B$çš„è¾“å…¥åç§°ã€‚ å› ä¸ºèŠ‚ç‚¹$B$çš„è¾“å…¥åç§°å¯èƒ½åŒæ—¶ä¸ºå…¶ä»–èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ä¸Šä¾‹ä¸­çš„TransposeèŠ‚ç‚¹ï¼‰çš„è¾“å‡ºåç§°ï¼Œä¼šå¯¼è‡´ä¸€äº›é¢„æ–™å¤–çš„ç»“æœã€‚ä¸Šä¾‹çš„ä¿®æ”¹è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šç¼–è¾‘èŠ‚ç‚¹å±æ€§å€¼åœ¨èŠ‚ç‚¹ä¾§è¾¹æ å¯¹åº”çš„å±æ€§å€¼è¾“å…¥æ¡†ä¸­ï¼Œé”®å…¥æ–°çš„å±æ€§å€¼å³å¯ã€‚ ç‚¹å‡»å±æ€§å€¼è¾“å…¥æ¡†å³ä¾§çš„+ï¼Œå¯æ˜¾ç¤ºè¯¥å±æ€§çš„å‚è€ƒä¿¡æ¯ã€‚å¢åŠ æ–°èŠ‚ç‚¹ï¼ˆbetaï¼‰æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å‘æ¨¡å‹ä¸­æ·»åŠ æ–°èŠ‚ç‚¹ã€‚onnx-modifierå·²å¼€å§‹æ”¯æŒè¯¥åŠŸèƒ½ã€‚åœ¨ä¸»é¡µé¢çš„å·¦ä¸Šæ–¹ï¼Œæœ‰ä¸€ä¸ªAdd nodeæŒ‰é’®å’Œä¸€ä¸ªselectoré€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äºŒè€…çš„é…åˆï¼Œå®ŒæˆèŠ‚ç‚¹çš„æ·»åŠ ï¼Œåªéœ€3æ­¥ï¼š åœ¨selectorä¸­é€‰æ‹©è¦æ·»åŠ çš„èŠ‚ç‚¹ç±»å‹ï¼Œåœ¨ç‚¹å‡»Add nodeæŒ‰é’®åï¼Œä¸€ä¸ªå¯¹åº”ç±»å‹çš„æ–°èŠ‚ç‚¹å°†è‡ªåŠ¨å‡ºç°åœ¨å›¾ä¸Šã€‚ selectorä¸­åŒ…å«æ¥è‡ªai.onnx(171), ai.onnx.preview.training(4), ai.onnx.ml(18) å’Œ com.microsoft(1)çš„æ‰€æœ‰èŠ‚ç‚¹ç±»å‹ã€‚ ç‚¹å‡»è¿™ä¸ªæ–°èŠ‚ç‚¹ï¼Œåœ¨å¼¹å‡ºçš„ä¾§è¾¹æ ä¸­è¿›è¡ŒèŠ‚ç‚¹çš„ç¼–è¾‘ï¼š èŠ‚ç‚¹å±æ€§ï¼šåˆå§‹åŒ–ä¸ºnull ï¼ˆæ˜¾ç¤ºä¸ºundefinedï¼‰ã€‚åŒä¸ŠèŠ‚ï¼Œåœ¨å¯¹åº”çš„å±æ€§æ¡†ä¸­è¾“å…¥æ–°å€¼å³å¯ã€‚ ä¿®æ”¹èŠ‚ç‚¹è¾“å…¥è¾“å‡ºåã€‚è¾“å…¥è¾“å‡ºåå†³å®šäº†èŠ‚ç‚¹å°†æ’å…¥åœ¨å›¾ç»“æ„ä¸­çš„ä½ç½®ã€‚ å®Œå·¥ï¼ˆç‚¹å‡»Downloadå³å¯è·å¾—ç¼–è¾‘åçš„ONNXæ¨¡å‹ï¼‰ã€‚ä»¥ä¸‹æ˜¯è¯¥åŠŸèƒ½çš„ä¸€äº›æé†’å’Œå°tipï¼š åœ¨å½“å‰ç‰ˆæœ¬ä¸­ï¼Œæ˜¯ä¸æ”¯æŒæ·»åŠ å«æœ‰å‚æ•°çš„èŠ‚ç‚¹çš„ï¼ˆæ¯”å¦‚Conv, BatchNormalizationï¼‰ã€‚å…¶ä»–å¤§å¤šæ•°èŠ‚ç‚¹ï¼Œåœ¨æˆ‘çš„æµ‹è¯•ä¸­ï¼Œå¯æ­£ç¡®æ·»åŠ ï¼ˆæ¯”å¦‚Flatten, ArgMax, Concatï¼‰ã€‚ ç‚¹å‡»selectorï¼Œè¾“å…¥è¦æ·»åŠ çš„èŠ‚ç‚¹çš„é¦–å­—æ¯ï¼ˆæ¯”å¦‚Flattençš„fï¼‰ï¼Œå¯å¸®æˆ‘ä»¬å®šä½åˆ°ä»¥è¯¥å­—æ¯å¼€å¤´çš„èŠ‚ç‚¹åˆ—è¡¨åŒºåŸŸï¼ŒåŠ å¿«æ£€ç´¢é€Ÿåº¦ã€‚ ç‚¹å‡»èŠ‚ç‚¹ä¾§è¾¹æ çš„NODE PROPERTIESçš„typeæ¡†å³ä¾§çš„?ï¼Œå’ŒèŠ‚ç‚¹å±æ€§æ¡†å³ä¾§çš„+ï¼Œå¯ä»¥æ˜¾ç¤ºå…³äºå½“å‰èŠ‚ç‚¹ç±»å‹/å±æ€§å€¼çš„å‚è€ƒä¿¡æ¯ã€‚ ä¸ºç¡®ä¿æ­£ç¡®æ€§ï¼ŒèŠ‚ç‚¹çš„å„å±æ€§å€¼å»ºè®®å…¨éƒ¨å¡«å†™ï¼ˆè€Œä¸æ˜¯ç•™ç€undefinedï¼‰ã€‚é»˜è®¤å€¼åœ¨å½“å‰ç‰ˆæœ¬å¯èƒ½æ”¯æŒå¾—è¿˜ä¸å¤Ÿå¥½ã€‚ å¦‚æœä¸€ä¸ªå±æ€§å€¼æ˜¯åˆ—è¡¨ç±»å‹ï¼Œåˆ™å„å…ƒç´ ä¹‹é—´ä½¿ç”¨â€˜,â€™åˆ†éš”ã€‚ åœ¨å½“å‰ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„è¾“å…¥/è¾“å‡ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹ï¼ˆå¦‚Concatï¼‰ï¼Œé™åˆ¶æœ€å¤šæ˜¾ç¤º8ä¸ªã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹å®é™…è¾“å…¥/è¾“å‡ºå°äº8ä¸ªï¼Œåˆ™å¡«å†™å¯¹åº”æ•°ç›®çš„è¾“å…¥è¾“å‡ºå³å¯ï¼Œå¤šå‡ºæ¥çš„åº”ä»¥list_customå¼€å¤´ï¼Œå®ƒä»¬ä¼šåœ¨åç»­å¤„ç†ä¸­è‡ªåŠ¨è¢«å¿½ç•¥ã€‚ è¿™ä¸ªåŠŸèƒ½è¿˜å¤„åœ¨å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šä¸å¤Ÿé²æ£’ã€‚æ‰€ä»¥å¦‚æœå¤§å®¶åœ¨å®é™…ä½¿ç”¨æ—¶ç¢°åˆ°é—®é¢˜ï¼Œéå¸¸æ¬¢è¿æissue!onnx-modiferæ­£åœ¨æ´»è·ƒåœ°æ›´æ–°ä¸­:hammer_and_wrench:ã€‚ æ¬¢è¿ä½¿ç”¨ï¼Œæissueï¼Œå¦‚æœæœ‰å¸®åŠ©çš„è¯ï¼Œæ„Ÿè°¢ç»™ä¸ª:star:~ç¤ºä¾‹æ¨¡å‹æ–‡ä»¶ä¸ºæ–¹ä¾¿æµ‹è¯•ï¼Œä»¥ä¸‹æä¾›ä¸€äº›å…¸å‹çš„æ ·ä¾‹æ¨¡å‹æ–‡ä»¶ï¼Œä¸»è¦æ¥è‡ªäºonnx model zoo squeezeNet é“¾æ¥ (4.72MB) MobileNet é“¾æ¥ (13.3MB) ResNet50-int8 é“¾æ¥ (24.6MB) movenet-lightning é“¾æ¥ (9.01MB) å°†Googleæä¾›çš„é¢„è®­ç»ƒtfliteæ¨¡å‹ï¼Œä½¿ç”¨tensorflow-onnxè½¬æ¢å¾—åˆ°ï¼› æ¨¡å‹ä¸­åŒ…å«å‰å¤„ç†å’Œä¸€å¤§å—åå¤„ç†èŠ‚ç‚¹ã€‚ å‚è€ƒèµ„æ–™ Netron flask ONNX IR Official doc ONNX Python API Official doc, Leimaoâ€™s Blog ONNX IO Stream Leimaoâ€™s Blog onnx-utils sweetalert" }, { "title": "éƒ¨ç½²ç»éªŒæ€»ç»“", "url": "/posts/%E9%83%A8%E7%BD%B2%E7%BB%8F%E9%AA%8C%E7%A7%AF%E7%B4%AF/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "å®è·µ", "date": "2022-04-15 12:31:00 +0800", "snippet": "é¢„å¤„ç† ncnnçš„substract_mean_normalizeâ€‹ è¯¥å‡½æ•°è¾“å…¥åƒç´ èŒƒå›´åœ¨[0,255]ï¼Œå¯¹äºä¸åŒçš„æ¡†æ¶å¯èƒ½éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œå…·ä½“å‚è§è¿™é‡Œã€‚å®‰å“ç«¯éƒ¨ç½² Android Studio æ‰“åŒ…APK" }, { "title": "ACMæ ¼å¼è¾“å…¥è¾“å‡ºæ€»ç»“", "url": "/posts/ACM%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%80%BB%E7%BB%93/", "categories": "ç¼–ç¨‹ç§¯ç´¯", "tags": "", "date": "2022-04-15 12:06:00 +0800", "snippet": "Pythonè¯»å–å•ä¸ªå…ƒç´ t = input() # å­—ç¬¦t = int(input()) # æ•´æ•°è¯»å–å•è¡Œå…ƒç´ items = list(input().split(&quot; &quot;)) # å­—ç¬¦items = list(map(int, input().split(&quot; &quot;))) # æ•´æ•°ç¡®å®šæ•°ç›®è¡Œçš„å…ƒç´ N = int(input())for i in range(N): items = list(map(int, input().split(&quot; &quot;))) # æ•´æ•°ä¸ºä¾‹ä¸å®šæ•°ç›®è¡Œçš„å…ƒç´ while True: try: items = list(map(int, input().split(&quot; &quot;))) # æ•´æ•°ä¸ºä¾‹ except: breakC++è¯»å–å•ä¸ªå…ƒç´ int n;cin &amp;gt;&amp;gt; n;string s;cin &amp;gt;&amp;gt; s;è¯»å–å•è¡Œå…ƒç´ // å›ºå®šä¸ªæ•°ï¼ˆ2ä¸ªï¼‰int a, b;cin &amp;gt;&amp;gt; a &amp;gt;&amp;gt; b;// æ¯è¡Œç¬¬1ä¸ªæ•°å­—è¡¨ç¤ºè¯¥è¡Œå…ƒç´ æ•°ç›®int N, val;cin &amp;gt;&amp;gt; N;for (int i = 0; i &amp;lt; N; ++i) { cin &amp;gt;&amp;gt; val;}// å•è¡Œä¸å®šä¸ªæ•°int num;while (cin &amp;gt;&amp;gt; num) { // do sth. with `num`}// è¯»å–å¹¶è§£æä»¥é€—å·åˆ†éš”çš„å•è¡Œï¼Œå¦‚`a,b,c`string inp;cin &amp;gt;&amp;gt; inp; // ä¸€æ•´è¡Œå­—ç¬¦ä¸²éƒ½å·²ç»è¯»è¿›æ¥äº†vector&amp;lt;string&amp;gt; vec;string tmp_str;for (auto c : inp) { if (c == &#39;,&#39;) { vec.push_back(tmp_str); tmp_str.clear(); } else { tmp_str += c; }}vec.push_back(tmp_str);è¯»å–å¤šè¡Œå…ƒç´ // ç¡®å®šè¡Œæ•°int N; // è¡Œæ•°cin &amp;gt;&amp;gt; N;for (int i = 0; i &amp;lt; N; ++i) { // è¯»å–å•è¡Œ}// ä¸å®šè¡Œæ•°ï¼Œæœ‰æ–‡ä»¶ç»“æŸæ ‡å¿—è¡Œwhile (true) { // è¯»å–å•è¡Œ if (end_condition) break;}// ä¸å®šè¡Œæ•°ï¼Œæ¯è¡Œç¬¬ä¸€ä¸ªæ•°æ˜¯è¯¥è¡Œå…ƒç´ ä¸ªæ•°int n, val; while (cin &amp;gt;&amp;gt; n) { // æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•° for (int i = 0; i &amp;lt; n; ++i) { cin &amp;gt;&amp;gt; val; }}// ä¸å®šè¡Œæ•°ï¼Œè‡ªå·±åˆ¤å®šæ¯ä¸€è¡Œçš„ç»“æŸä½ç½®int num;while (cin &amp;gt;&amp;gt; num) { // do sth. with `num` if (cin.get() == &#39;\\n&#39;) { // æ¯è¡Œæœ«å°¾çš„æ“ä½œ }}ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ è¾“å…¥è¾“å‡ºä¸­ï¼Œå…ƒç´ çš„é—´éš”ç¬¦ä¸ä¸€å®šæ˜¯ç©ºæ ¼ï¼Œè¿˜å¯èƒ½æ˜¯â€˜ï¼Œâ€™ç­‰ï¼Œè¦è§†é¢˜ç›®ä¸ºå‡†ã€‚å‚è€ƒ ç‰›å®¢ç½‘-OJåœ¨çº¿ç¼–ç¨‹å¸¸è§è¾“å…¥è¾“å‡ºç»ƒä¹ åœº ã€ACMæ¨¡å¼ã€‘ç‰›å®¢ç½‘OJè¾“å…¥è¾“å‡ºæ¡ˆä¾‹ACMæœºè¯•æ¨¡å¼Python&amp;amp;Javaä»£ç æ€»ç»“" }, { "title": "Pythonçš„ç»§æ‰¿", "url": "/posts/Python%E7%9A%84%E7%BB%A7%E6%89%BF/", "categories": "ä¸“ä¸šç§¯ç´¯, ç¼–ç¨‹ç§¯ç´¯", "tags": "python", "date": "2021-12-15 16:06:00 +0800", "snippet": "é¢å‘å¯¹è±¡çš„ç¼–ç¨‹å¸¦æ¥çš„ä¸»è¦å¥½å¤„ä¹‹ä¸€æ˜¯ä»£ç çš„é‡ç”¨ã€‚å‡å¦‚éœ€è¦å®šä¹‰å‡ ä¸ªç±»ï¼Œè€Œç±»ä¸ç±»ä¹‹é—´æœ‰ä¸€äº›å…¬å…±çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™æ—¶å°±å¯ä»¥æŠŠç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ä½œä¸ºåŸºç±»çš„æˆå‘˜ï¼Œè€Œç‰¹æ®Šçš„æ–¹æ³•åŠå±æ€§åˆ™åœ¨æœ¬ç±»ä¸­å®šä¹‰ã€‚è¿™æ ·å­ç±»åªéœ€è¦ç»§æ‰¿åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰ï¼Œå­ç±»å°±å¯ä»¥è®¿é—®åˆ°åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•äº†ï¼Œä»è€Œæé«˜ä»£ç çš„å¯æ‰©å±•æ€§å’Œé‡ç”¨æ€§ã€‚Pythonçš„ç»§æ‰¿æ˜¯ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„å†…å®¹ï¼Œä»¥å¾€å­˜åœ¨ä¸€äº›ç†è§£ä¸æ˜ç¡®çš„åœ°æ–¹ï¼Œå› æ­¤åšäº†ä¸€ä¸ªç®€å•å­¦ä¹ æ•´ç†ï¼Œæœ¬é¡µæ˜¯æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹çš„ç¬”è®°ã€‚ç»§æ‰¿çš„åŸç†æ¡†æ¶å‚è€ƒclass BaseClass: def __init__(self, base_param): # do some initialization self.base_param = base_paramclass SubClass(BaseClass): def __init__(self, base_param, sub_param): # this __init__ will overwrite the one of BaseClass # to inherit the attributes from base class, we should call __init__() of BaseClass explicitly, There are several ways: # way 1. This way is recommanded super().__init__(base_param) # way 2. in Python3, it is equivalent to way 1. But in Python2, we are stuck with this form super(SubClass, self).__init__(base_param) # way 3. BaseClass.__init__(self, base_param) # add new attrbites for sub class self.sub_param = sub_paramä¸€ä¸ªdemoclass Animal: def __init__(self, name): self.name = name def talk(self): raise NotImplementedErrorclass Dog(Animal): def __init__(self, name): super().__init__(name) # super(Dog, self).__init__(name) # Animal.__init__(self, name) def talk(self): print(&quot;æˆ‘å« {}, æˆ‘ä¼š {}&quot;.format(self.name, &quot;æ±ªæ±ª&quot;))class Cat(Animal): def __init__(self, name): super().__init__(name) def talk(self): print(&quot;æˆ‘å« {}, æˆ‘ä¼š {}&quot;.format(self.name, &quot;å–µå–µ&quot;)) dog = Dog(name=&quot;ç‹—ç‹—&quot;)cat = Cat(name=&quot;çŒ«çŒ«&quot;)dog.talk()cat.talk()è¾“å‡ºæˆ‘å« ç‹—ç‹—, æˆ‘ä¼š æ±ªæ±ªæˆ‘å« çŒ«çŒ«, æˆ‘ä¼š å–µå–µåŒæ—¶ç»§æ‰¿å¤šä¸ªç±»ä¸€ä¸ªå­ç±»å…è®¸åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚å¦‚æœå­ç±»è°ƒç”¨çš„æ–¹æ³•ä¸ºä¸¤ä¸ªçˆ¶ç±»å…¬æœ‰çš„æ–¹æ³•ï¼Œåˆ™éµå¾ªâ€œå…ˆæ¥ååˆ°â€åŸåˆ™ï¼Œå³è°ƒç”¨æ’åˆ—åœ¨å‰é¢çš„çˆ¶ç±»å¯¹åº”çš„æ–¹æ³•ã€‚å‚è€ƒå…¶ä»–å…³äºisinstance()å’Œtype()çš„åŒºåˆ«isinstance()ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œè€ƒè™‘ç»§æ‰¿å…³ç³»ï¼›type()ä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚å‚è€ƒå‡è®¾å·²ç»æŒ‰ç…§ä¸Šé¢çš„demoåˆ›å»ºäº†dogå’Œcatä¸¤ä¸ªå¯¹è±¡ï¼Œåˆ™æœ‰print(isinstance(dog, Animal)) # Trueprint(type(dog) == Animal) # False" }, { "title": "tensorboardä½¿ç”¨", "url": "/posts/tensorboard%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "tensorboard", "date": "2021-11-16 19:45:00 +0800", "snippet": "å…³äºæœ¬é¡µtensorboardæ˜¯ä¸€æ¬¾ç»å…¸çš„æœºå™¨å­¦ä¹ å¯è§†åŒ–å·¥å…·ã€‚å®ƒåŸæœ¬æ˜¯tensorflowçš„å¯è§†åŒ–å·¥å…·ï¼Œpytorchä»1.2.0å¼€å§‹æ­£å¼æ”¯æŒtensorboardã€‚æœ¬é¡µä»‹ç»æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›æ“ä½œå’Œç»éªŒè®°å½•ï¼Œä¾¿äºæ—¥åå‚è€ƒå¤ç”¨ï¼Œä¸»è¦ç»“åˆpytorchã€‚ pytorchæä¾›çš„tensorboardå®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹ï¼šæˆ³è¿™é‡Œ ä¸€äº›å·²æœ‰çš„æ–‡ç« ï¼š1ä¸€äº›æ“ä½œè®°å½•ä½¿ç”¨æ–¹æ³•è¦è¿è¡Œtensorboadï¼Œéœ€è¦åœ¨ä»£ç ä¸­åŠ å…¥from torch.utils.tensorboard import SummaryWriterwriter = SummaryWriter()writer.add_xxx()writer.close() # this can be ESSENTIAL, otherwise the last graph would not show!ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶é»˜è®¤å­˜æ”¾åœ¨./runsä¸‹ã€‚ å¯ä»¥åœ¨å®šä¹‰writeræ—¶ä½¿ç”¨writer = SummeryWriter(log_dir=...)æ¥æŒ‡å®šæ—¥å¿—ä¿å­˜ä½ç½®ã€‚åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œtensorboard --logdir=runs# for more usage, use `tensorboard -h` è¿™æ—¶é»˜è®¤åœ¨http://localhost:6006/ æ‰“å¼€tensorboardé¡µé¢ï¼Œæ˜¾ç¤ºå¯è§†åŒ–å†…å®¹ã€‚å¸¸ç”¨æ“ä½œç»˜åˆ¶scalaræ›²çº¿writer.add_scalar(tag, scalar_value, global_step)è‹¥è¦æŠŠå¤šå¼ å›¾åƒç»˜åˆ¶åœ¨ä¸€å¼ å›¾ä¸Šï¼Œåˆ™ä½¿ç”¨ï¼šå‚è€ƒwriter.add_scalars(main_tag, tag_scalar_dict, global_step)ç»˜åˆ¶ç›´æ–¹å›¾ï¼ˆå¦‚æŸ¥çœ‹ç½‘ç»œæƒé‡åˆ†å¸ƒï¼‰for name, param in model.named_parameters(): writer.add_histogram(name, param)å‘1ï¼šåˆ°HISTOGRAMSæ æŸ¥çœ‹ç›´æ–¹å›¾ï¼ˆæœ‰ä¸€æ¬¡æˆ‘åœ¨DISRUBUTIONSæ çœ‹äº†åŠå¤©æ„£æ˜¯å•¥ä¹Ÿçœ‹ä¸åˆ°ï¼‰å‘2ï¼šè®°å¾—æœ€åè°ƒç”¨writer.close()ï¼Œå¦åˆ™æœ€åä¸€å±‚çš„æƒé‡åˆ†å¸ƒå›¾ï¼ˆæˆ‘è¿™è¾¹ï¼‰æ˜¯çœ‹ä¸åˆ°çš„æ˜¾ç¤ºmatplotlibå›¾åƒimport matplotlib.pyplot as pltfig, ax = plt.subplots() ax.plot(A, B)ax.set_title(&#39;title&#39;)writer.add_figure( &#39;matplotlib demo&#39;, fig)ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³tensorboard: command not foundè§£å†³æ–¹æ³•" }, { "title": "tqdmå¸¸ç”¨æ“ä½œ", "url": "/posts/tqdm%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "tqdm", "date": "2021-10-10 21:39:00 +0800", "snippet": "å…³äºæœ¬é¡µtqdmåŠä¸€ä¸ªåŸºäºPythonçš„å¼€æºåŒ…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸ºç¨‹åºè¿è¡ŒåŠ ä¸Šè¿›åº¦æ¡ï¼Œæ–¹ä¾¿çŸ¥é“ç¨‹åºè¿è¡Œè¿›åº¦ã€‚æœ¬é¡µç»“åˆå®˜æ–¹æ–‡æ¡£ï¼Œè®°å½•ä¸€äº›ä¸ªäººçš„å¸¸ç”¨æ“ä½œã€‚åŸºæœ¬æ“ä½œiterable-basedWrap tqdm() around any iterable:from tqdm import tqdmfor i in tqdm(range(10)): ...for i in tqdm([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]): ...manualæ‰‹åŠ¨æŒ‡å®šè¿›åº¦æ¡æ€»é•¿åº¦totalä¸æ¯æ¬¡æ›´æ–°é•¿åº¦update()with tqdm(total=100) as pbar: for i in range(10): ... pbar.update(10)æˆ–pbar = tqdm(total=100)for i in range(10): ... pbar.update(10)pbar.close() # do not forget thiså…¶ä»–è®©è¿›åº¦æ¡æ˜¾ç¤ºé¢å¤–ä¿¡æ¯å¯¹äºfrom tqdm import tqdmfor i in tqdm(range(100)): loss = ...è¿›åº¦æ¡é»˜è®¤æ˜¾ç¤ºä¸º76%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 76/100 [00:33&amp;lt;00:10, 229.00it/s]ä½†æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºé¢å¤–çš„ä¿¡æ¯ï¼Œå¦‚pbar = tqdm(total=len(train_dataloader))pbar.set_description(&#39;Epoch {}&#39;.format(epoch))for i, batch in enumerate(train_dataloader): loss1 = ... loss2 = ... pbar.set_postfix( loss1=&#39;{:4f}&#39;.format(loss1.item()), loss2=&#39;{:4f}&#39;.format(loss2.item()) ) pbar.update()pbar.close()æ­¤æ—¶æ˜¾ç¤ºä¸ºEpoch 0: 2%|â–ˆâ–ˆ | 88/5175 [00:02&amp;lt;02:21, 35.90it/s, loss1=2.894164, loss2=9.039881]" }, { "title": "Shellå­¦ä¹ ", "url": "/posts/Shell%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "shell, sh", "date": "2021-09-23 09:30:00 +0800", "snippet": "shellè¯­æ³•ä¸å¤šï¼Œä¸ç®—éš¾ï¼Œè¿™é‡Œä½œä¸ºä¸€é¡¹ç¡¬æŠ€èƒ½ï¼Œè‡ªå·±æ€»ç»“ä¸€ä¸‹ã€‚ä¸»ä½“å†…å®¹æ¥è‡ªäºèœé¸Ÿæ•™ç¨‹ã€‚shellå˜é‡å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼your_name=&quot;runoob.com&quot;ä½¿ç”¨å˜é‡åŠ ç¾å…ƒç¬¦å·ï¼Œå˜é‡åå¤–é¢çš„èŠ±æ‹¬å·ä»è¯­æ³•å±‚é¢ä¸Šæ˜¯å¯é€‰çš„ï¼ŒåŠ ä¸åŠ éƒ½è¡Œã€‚ä¸è¿‡åŠ ä¸Šå¯ä»¥å¸®åŠ©è§£é‡Šå™¨è¯†åˆ«å˜é‡çš„è¾¹ç•Œã€‚echo $your_name # &quot;runoob.com&quot;echo ${your_name} # &quot;runoob.com&quot;æ•°ç»„Bash Shell åªæ”¯æŒä¸€ç»´æ•°ç»„ï¼ˆä¸æ”¯æŒå¤šç»´æ•°ç»„ï¼‰ï¼Œæ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ç”± 0 å¼€å§‹ï¼ŒShell æ•°ç»„ç”¨æ‹¬å·æ¥è¡¨ç¤ºï¼Œå…ƒç´ ç”¨â€ç©ºæ ¼â€ç¬¦å·åˆ†å‰²å¼€ã€‚å®šä¹‰æ•°ç»„ï¼šarray=(value1 value2 ... valuen)# examplearray=(1 2 3 4)ç´¢å¼•æ•°ç»„ï¼š${array[index]}è·å–æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ï¼š${array[@]}# demoarray=(1 2 3 4)echo ${array} # 1echo ${array[@]} # 1 2 3 4è·å–æ•°ç»„çš„é•¿åº¦ï¼š${#array[@]}éå†æ•°ç»„ï¼šfor v in ${array[@]}; do echo &quot;${v}&quot;;doneå­—ç¬¦ä¸²å®šä¹‰å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ï¼Œä¹Ÿå¯ä»¥ç”¨åŒå¼•å·ã€‚str1=&#39;string1&#39;str2=&quot;string2&quot;æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œå†™åœ¨ä¸€èµ·å³å¯str3=${str1}${str2}echo str3 # string1string2è·å–å­—ç¬¦ä¸²é•¿åº¦echo ${#str1}æå–å­å­—ç¬¦ä¸²ï¼Œè¯­æ³•ä¸º${variable:offset:length}string=&quot;welcome&quot;echo ${string:1:4} # ä»indexä¸º1çš„ä½ç½®å¼€å§‹ï¼Œè¯»å–4ä¸ªå…ƒç´ ã€‚è¾“å‡º elcoå­—ç¬¦ä¸²è¿ç®—ç¬¦a=&quot;abc&quot;b=&quot;efg&quot;[ $a = $b ] # åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œè¿”å› falseã€‚[ $a != $b ] # åˆ¤æ–­æ˜¯å¦ä¸ç­‰ï¼Œè¿”å› trueã€‚# æ›´å¤šè¿ç®—ç¬¦å‚è§https://www.runoob.com/linux/linux-shell-basic-operators.htmlå‘shellè„šæœ¬ä¼ å…¥å‚æ•°ä½¿ç”¨$è·å–ä¼ å…¥çš„å‚æ•°ã€‚$1è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°â€¦ ï¼ˆ$0æ˜¯æ‰§è¡Œçš„bashè„šæœ¬è·¯å¾„ï¼‰ç¤ºä¾‹ï¼šå»ºç«‹test.shå¦‚ä¸‹#!/bin/bashecho &quot;è„šæœ¬è·¯å¾„: $0&quot;echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°: $1&quot;echo &quot;ç¬¬äºŒä¸ªå‚æ•°: $2&quot;æ‰§è¡Œ./test.sh 1 2å¾—åˆ°è¾“å‡ºï¼šè„šæœ¬è·¯å¾„: path/to/test.shç¬¬ä¸€ä¸ªå‚æ•°: 1ç¬¬äºŒä¸ªå‚æ•°: 2è·å–æ›´å¤šä¼ å…¥å‚æ•°çš„ä¿¡æ¯ï¼Œå‚è§èœé¸Ÿæ•™ç¨‹-Shell ä¼ é€’å‚æ•°åŸºæœ¬è¿ç®—ç¬¦å‚è§èœé¸Ÿæ•™ç¨‹-Shell åŸºæœ¬è¿ç®—ç¬¦ç®—æœ¯è¿ç®—ç¬¦åŸç”Ÿbashä¸æ”¯æŒç®€å•çš„æ•°å­¦è¿ç®—ï¼Œå¯å€ŸåŠ©exprå®ç°ã€‚a=2b=2echo &quot;ä¸¤æ•°ä¹‹å’Œä¸º : `expr $a + $b`&quot;echo &quot;ä¸¤æ•°ä¹‹å·®ä¸º : `expr $a - $b`&quot;echo &quot;ä¸¤æ•°ä¹‹ç§¯ä¸º : `expr $a \\* $b`&quot; # æ³¨æ„ï¼Œå•çº¯çš„*ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼Œè¦ç”¨\\*echo &quot;ä¸¤æ•°ä¹‹ç§¯ä¸º : `expr $a / $b`&quot;éœ€è¦æ³¨æ„ï¼š å®Œæ•´çš„è¡¨è¾¾å¼è¦è¢« ` åŒ…å«ï¼Œæ³¨æ„è¿™ä¸ªå­—ç¬¦ä¸æ˜¯å¸¸ç”¨çš„å•å¼•å·ï¼Œæ˜¯åœ¨ Esc é”®ä¸‹è¾¹çš„åå¼•å·ã€‚ è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´è¦æœ‰ç©ºæ ¼å…³ç³»è¿ç®—ç¬¦å‚è§èœé¸Ÿæ•™ç¨‹-Shell åŸºæœ¬è¿ç®—ç¬¦å¸ƒå°”è¿ç®—ç¬¦å‚è§èœé¸Ÿæ•™ç¨‹-Shell åŸºæœ¬è¿ç®—ç¬¦letè¯­å¥let å‘½ä»¤æ˜¯ BASH ä¸­ç”¨äºè®¡ç®—çš„å·¥å…·ï¼Œç”¨äºæ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ï¼Œå˜é‡è®¡ç®—ä¸­ä¸éœ€è¦åŠ ä¸Š$ æ¥è¡¨ç¤ºå˜é‡ã€‚èœé¸Ÿæ•™ç¨‹-Linux let å‘½ä»¤ç¤ºä¾‹a=1b=2let c=a+b # ä¸ç”¨åŠ $echo $c # 3shellæµç¨‹æ§åˆ¶åˆ†æ”¯ifif conditionthen command1 ... commandN fiif elseif conditionthen command1 ... commandNelse commandfiif else ifif condition1then command1elif condition2 then command2else commandNfiä½¿ç”¨((...))ä½œä¸ºåˆ¤æ–­è¯­å¥ã€‚ç¤ºä¾‹if (( $a == $b ))then echo &quot;a ç­‰äº b&quot;fiforå¾ªç¯for var in item1 ... itemNdo command1 ... commandndoneå†™æˆä¸€è¡Œfor var in item1 item2 ... itemN; do command1; ...; commandn; done;ç¤ºä¾‹for loop in 1 2 3 4 5do echo &quot;The value is: $loop&quot;donewhileå¾ªç¯while conditiondo commanddoneç¤ºä¾‹val=1while(( $val&amp;lt;=5 ))do echo $val let val++donebreakå’Œcontinuebreakå’Œcontinueä½œä¸ºä¸€æ¡commandå‡ºç°åœ¨bashè„šæœ¬ä¸­ã€‚å…¶å«ä¹‰ä¸å…¶ä»–è¯­è¨€ä¸€è‡´ã€‚shellå‡½æ•°åŸºæœ¬æ ¼å¼funname(){ ... [return sth;]} å¯ä»¥å‘å‡½æ•°ä¼ å…¥å‚æ•°ï¼Œå‚è§ä¸‹é¢çš„ç¤ºä¾‹ åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œé€šè¿‡ $n çš„å½¢å¼æ¥è·å–ä¼ å…¥çš„å‚æ•°å€¼ã€‚$1è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°â€¦ ï¼ˆ$0æ˜¯æ‰§è¡Œçš„bashè„šæœ¬è·¯å¾„ï¼‰ å¦‚æœå‡½æ•°æœ‰è¿”å›å€¼ï¼Œåˆ™å‡½æ•°è¿”å›å€¼åœ¨è°ƒç”¨è¯¥å‡½æ•°åé€šè¿‡ä½¿ç”¨$?è·å¾—ç¤ºä¾‹add(){ echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1&quot; echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸º $2&quot; let val=$1+$2 return $val}add 1 2echo &quot;è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $?&quot; # 3shellè¾“å‡ºå¯ç”¨echoå’Œprintfæ–¹æ³•ã€‚printfæ¯”è¾ƒç±»ä¼¼Cè¯­è¨€ä¸­çš„printfï¼Œæ”¯æŒæ ¼å¼åŒ–è¾“å‡ºã€‚å‚è§ èœé¸Ÿæ•™ç¨‹-Shell echoå‘½ä»¤ å’Œ èœé¸Ÿæ•™ç¨‹-Shell printf å‘½ä»¤ã€‚shell è¾“å…¥è¾“å‡ºé‡å®šå‘ å¤§å¤šæ•° UNIX ç³»ç»Ÿå‘½ä»¤ä»ä½ çš„ç»ˆç«¯æ¥å—è¾“å…¥å¹¶å°†æ‰€äº§ç”Ÿçš„è¾“å‡ºå‘é€å›åˆ°æ‚¨çš„ç»ˆç«¯ã€‚ä¸€ä¸ªå‘½ä»¤é€šå¸¸ä»ä¸€ä¸ªå«æ ‡å‡†è¾“å…¥çš„åœ°æ–¹è¯»å–è¾“å…¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ°å¥½æ˜¯ä½ çš„ç»ˆç«¯ã€‚åŒæ ·ï¼Œä¸€ä¸ªå‘½ä»¤é€šå¸¸å°†å…¶è¾“å‡ºå†™å…¥åˆ°æ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¹Ÿæ˜¯ä½ çš„ç»ˆç«¯ã€‚èœé¸Ÿæ•™ç¨‹-Shell è¾“å…¥/è¾“å‡ºé‡å®šå‘å°†è¾“å‡ºé‡å®šå‘åˆ° file ï¼ˆfileå·²ç»å­˜åœ¨çš„å†…å®¹å°†è¢«æ¸…ç©ºæ›¿ä»£ï¼‰command &amp;gt; fileå°†è¾“å‡ºé‡å®šå‘åˆ° file ï¼ˆåœ¨fileç»“å°¾è¿½åŠ ï¼‰command &amp;gt;&amp;gt; fileå°†è¾“å…¥é‡å®šå‘åˆ° filecommand &amp;lt; fileç¤ºä¾‹è¾“å…¥é‡å®šå‘ï¼š# in.txt12# demo.shadd(){ read a echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $a&quot; read b echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸º $b&quot; let val=$a+$b return $val}add echo &quot;è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $?&quot;æ‰§è¡Œbash ./str_demo.sh &amp;lt; in.txt# ä»in.txtè¯»å–è¾“å…¥ï¼Œåœ¨ç»ˆç«¯è¾“å‡ºç»“æœè¾“å‡ºé‡å®šå‘ï¼š# demo.shadd(){ echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1&quot; echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸º $2&quot; let val=$1+$2 return $val}add 1 2echo &quot;è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $?&quot; # 3æ‰§è¡Œbash ./str_demo.sh &amp;gt; out.txt# è¾“å‡ºå°†å†™å…¥out.txtï¼Œè€Œä¸æ˜¾ç¤ºåœ¨ç»ˆç«¯å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°æŠŠéƒ¨åˆ†è¯­å¥é‡å®šå‘ï¼Œå¦‚# demo.shadd(){ echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1&quot; echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸º $2&quot; let val=$1+$2 return $val}add 1 2echo &quot;è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $?&quot; &amp;gt; out.txtæ‰§è¡Œbash ./str_demo.sh# åªä¼šæŠŠæœ€åä¸€å¥çš„è¾“å‡ºé‡å®šå‘åˆ°out.txtå…¶ä»–Q1åŠ å…¥ç°åœ¨æœ‰ä¸€ä¸ªdemo.shæ–‡ä»¶ï¼Œä½¿ç”¨ bash ./demo.sh sh ./demo.sh ./demo.shè¿™ä¸‰è€…çš„åŒºåˆ«ï¼Ÿç­”ï¼šTODOã€‚å‚è€ƒhttps://stackoverflow.com/a/20616103/10096987" }, { "title": "ç½‘ç»œæ¨ç†åŠ é€Ÿçš„ä¸€äº›åŸºç¡€æ“ä½œ", "url": "/posts/%E7%BD%91%E7%BB%9C%E6%8E%A8%E7%90%86%E5%8A%A0%E9%80%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "", "date": "2021-08-17 17:03:00 +0800", "snippet": "æœ¬é¡µä»‹ç»ä¸€äº›é‡åˆ°çš„åŠ é€Ÿçš„åŸºç¡€æ“ä½œã€‚æ¨ç†æ—¶BNå±‚èåˆå…¥å·ç§¯å±‚å‚è€ƒ To execute neural network inference, kernels are invoked for neural network layers in order to compute the output tensors given the input tensors. Each kernel call will bring some overhead timeâ€¦.To achieve high throughput and low latency for neural network inference, the rule of thumb is to have fewer large kernel calls instead of many small kernel calls.è®¾å·ç§¯æ ¸çš„æƒé‡å’Œåç½®ä¸º\\(W\\)å’Œ\\(b\\)ï¼Œå·ç§¯å±‚è¾“å‡ºå’Œè¾“å‡ºåˆ†åˆ«ä¸º\\(X\\)å’Œ\\(X^{\\prime}\\)â€‹ï¼Œæœ‰\\[X^{\\prime} = X * W + b\\]å·ç§¯æ ¸è¾“å‡º\\(X^{\\prime}\\)ç´§æ¥è¿›å…¥BNå±‚ï¼Œè®¾BNå±‚çš„è¾“å‡ºä¸º\\(Y\\)ï¼Œåˆ™æœ‰\\[\\begin{aligned}Y &amp;amp;= \\gamma \\frac{X^{\\prime} - \\mu}{\\sqrt{\\delta^2 + \\epsilon}} + \\beta= \\gamma \\frac{X * W + b - \\mu}{\\sqrt{\\delta^2 + \\epsilon}} + \\beta \\\\ &amp;amp;= X * (\\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}W) + \\beta + \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}(b - \\mu) \\\\ &amp;amp;= X * W^{\\prime} + b^{\\prime}\\end{aligned}\\]å³ conv + BN ç­‰æ•ˆäºè°ƒç”¨ä¸€ä¸ªæƒé‡ä¸º\\(W^{\\prime} = \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}W\\)ï¼Œåç½®ä¸º\\(b^{\\prime} = \\beta + \\frac{\\gamma}{\\sqrt{\\delta^2 + \\epsilon}}(b - \\mu)\\)çš„æ–°å·ç§¯æ ¸ã€‚è¯¥æ­¥èåˆå‡å°‘äº†kernelçš„invokeæ¬¡æ•°ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœã€‚ä»¥ä¸‹æ˜¯Pytorchæºç ä¸­çš„BN fusionéƒ¨åˆ†# torch/nn/utils/fusion.pydef fuse_conv_bn_weights(conv_w, conv_b, bn_rm, bn_rv, bn_eps, bn_w, bn_b): if conv_b is None: conv_b = bn_rm.new_zeros(bn_rm.shape) bn_var_rsqrt = torch.rsqrt(bn_rv + bn_eps) conv_w = conv_w * (bn_w * bn_var_rsqrt).reshape([-1] + [1] * (len(conv_w.shape) - 1)) conv_b = (conv_b - bn_rm) * bn_var_rsqrt * bn_w + bn_b return torch.nn.Parameter(conv_w), torch.nn.Parameter(conv_b)bias correctioné«˜é€šçš„ä¸€ç¯‡å·¥ä½œ(DFQ)å‘ç°ï¼Œå¯¹ç½‘ç»œä¸­çš„æŸä¸€å±‚è¿›è¡Œæƒé‡é‡åŒ–ï¼ˆæ¿€æ´»å°šæœªé‡åŒ–ï¼‰ä¹‹åï¼Œå¾—åˆ°çš„è¾“å‡ºç›¸æ¯”äºé‡åŒ–ä¹‹å‰æ˜¯æœ‰åçš„ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥\\(x\\)ï¼Œè®¾é‡åŒ–å‰æƒé‡å’Œè¾“å‡ºåˆ†åˆ«ä¸º\\(W\\)å’Œ\\(y\\)ï¼Œé‡åŒ–åæƒé‡å’Œè¾“å‡ºåˆ†åˆ«ä¸º\\(\\widetilde{W}\\)å’Œ\\(\\widetilde{y}\\)ï¼Œæœ‰\\[E[\\widetilde{y}] \\neq E[y]\\]å…¶ä¸­\\(\\widetilde{y} = \\widetilde{W}x,\\quad y = Wx\\).è¿™å¯èƒ½æ˜¯é‡åŒ–è¿‡ç¨‹ä¸­å¯¹æƒé‡è¿›è¡Œclipå¯¼è‡´çš„ã€‚è€Œè¿™ç§è¾“å‡ºçš„åˆ†å¸ƒåç§»ä¼ åˆ°ä¸‹ä¸€å±‚ï¼Œå¯èƒ½ä¼šå½±å“æ•ˆæœï¼Œå› æ­¤éœ€è¦å°†è¿™éƒ¨åˆ†è¾“å‡ºä¸Šçš„åç§»æŠµæ¶ˆæ‰ã€‚æœ‰ï¼š\\[\\begin{align}E[y] &amp;amp;= E[Wx] \\\\ &amp;amp;= E[(\\widetilde{W} - \\epsilon)x] = E[\\widetilde{W}x - \\epsilon x] \\\\ &amp;amp;= E[\\widetilde{y}] - E[\\epsilon x] \\\\ &amp;amp;= E[\\widetilde{y}] - \\epsilon E[x]\\end{align}\\]å…¶ä¸­\\(\\epsilon = \\widetilde{W} - W\\)ä¸ºé‡åŒ–è¯¯å·®ã€‚ åœ¨è®­ç»ƒæ•°æ®ï¼ˆæ­¤æ—¶æ— éœ€æ ‡ç­¾ï¼‰å¯å¾—çš„æƒ…å†µä¸‹ï¼Œå…·ä½“çš„åšæ³•ä¸ºï¼Œå…ˆå°†ä¸€æ‰¹æ•°æ®è¾“å…¥å…¨ç²¾åº¦æ¨¡å‹ï¼Œå¾—åˆ°æ¯ä¸€å±‚è¾“å‡ºçš„å‡å€¼\\(E[y_l], \\quad l=1, 2, \\cdots, L\\)ï¼Œç„¶åå°†åŒä¸€æ‰¹æ•°æ®é€šå…¥æƒé‡é‡åŒ–åæ¨¡å‹ï¼Œåˆ†åˆ«ç»Ÿè®¡ç¬¬\\(l\\)å±‚çš„è¾“å‡ºæœŸæœ›\\(E[\\widetilde{y_l}]\\)ï¼Œå°†åå·®\\(E[\\widetilde{y_l}] - E[y]\\)åŠ åˆ°è¯¥å±‚çš„biaså‚æ•°ä¸­å³å¯ã€‚ å½“è®­ç»ƒæ•°æ®ä¸å¯å¾—æ—¶ï¼ŒDFQæå‡ºå¯ä»¥ä»è¯¥å±‚å‰çš„BNå±‚ä¸­è·å–\\(E[x]\\)ï¼Œä»è€Œå¾—åˆ°è¡¥å¿å€¼\\(\\epsilon E[x]\\)ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥é˜…è¯»åŸæ–‡ä¸­è¯¦ç»†çš„æè¿°ã€‚ è¿™é‡Œé«˜é€šæå‡ºçš„bias correctionæ˜¯ä¸€ç§åè®­ç»ƒï¼ˆpost-trainingï¼‰çš„æ–¹æ³•ã€‚å‚è€ƒ" }, { "title": "å…³äºåŠ é€Ÿä¸Šçš„ä¸€äº›æŒ‡æ ‡", "url": "/posts/%E5%85%B3%E4%BA%8E%E5%8A%A0%E9%80%9F%E4%B8%8A%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8C%87%E6%A0%87/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "", "date": "2021-08-15 12:41:00 +0800", "snippet": "æœ¬æ–‡æ€»ç»“è®°å½•ä¸€äº›è¡¡é‡å‹ç¼©ç®—æ³•é€Ÿåº¦/å¤æ‚åº¦çš„ä¸€äº›æŒ‡æ ‡ã€‚FLOPsFLOPså…¨ç§°ä¸ºfloating point operationsï¼Œæ„æŒ‡æµ®ç‚¹è¿ç®—æ•°ï¼Œç†è§£ä¸ºè®¡ç®—é‡ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡ç®—æ³•/æ¨¡å‹çš„å¤æ‚åº¦ã€‚ ä¸FLOPSï¼Œflops or flop/såŒºåˆ†å¼€æ¥ï¼Œå®ƒä»¬æ˜¯floating point operations per secondçš„ç¼©å†™ï¼Œæ„æŒ‡æ¯ç§’ï¼ˆæœ€å¤šï¼‰æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼Œç†è§£ä¸ºè®¡ç®—é€Ÿåº¦ï¼Œå¸¸ç”¨æ¥è¡¡é‡ç¡¬ä»¶æ€§èƒ½ã€‚wikiè®¡ç®—åŸç†ç¤ºä¾‹åˆ†åˆ«ä»¥å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚ä¸ºä¾‹ä»‹ç»FLOPsçš„è®¡ç®—åŸç† å‚è€ƒï¼šå·ç§¯å±‚è®¾å·ç§¯æ ¸è¾“å‡ºç‰¹å¾å›¾å°ºå¯¸ä¸º\\(C_o \\times H_o \\times W_o\\)â€‹â€‹ï¼Œè¾“å…¥ç‰¹å¾å›¾é€šé“æ•°ä¸º\\(C_i\\)â€‹ï¼Œåˆ™å¯¹äºè¾“å‡ºç‰¹å¾å›¾çš„æ¯ä¸€ä¸ªpixelï¼Œéœ€è¦çš„ä¹˜æ³•æ¬¡æ•°ä¸º\\(C_i \\times K^2\\)â€‹ï¼ŒåŠ æ³•æ¬¡æ•°ä¸º\\(C_i \\times K^2 - 1\\)â€‹ï¼Œå…±ä¸º\\(C_i \\times K^2 + C_i \\times K^2 - 1 = 2 \\times C_i \\times K^2 - 1\\)â€‹â€‹.å› æ­¤è€ƒè™‘è¾“å‡ºç‰¹å¾å›¾ä¸Šçš„æ‰€æœ‰pixelï¼Œæ€»çš„FLOPsä¸º\\(FLOPs_{conv} = (2 \\times C_i \\times K^2 - 1) \\times H_o \\times W_o \\times C_o\\) ä¸Šè¿°è®¡ç®—æ²¡æœ‰è€ƒè™‘biasï¼Œå¦‚æœè€ƒè™‘biasï¼Œåˆ™å¯¹è¾“å‡ºç‰¹å¾å›¾çš„æ¯ä¸€ä¸ªpixelä¼šå¢åŠ ä¸€æ¬¡åŠ æ³•ï¼Œæœ‰\\(FLOPs= (2 \\times C_i \\times K^2) \\times H_o \\times W_o \\times C_o\\)â€‹å…¨è¿æ¥å±‚è®¾å…¨è¿æ¥å±‚è¾“å…¥ä¸ªæ•°ä¸º\\(I\\)ï¼Œè¾“å‡ºä¸ªæ•°ä¸º\\(O\\)ï¼Œåˆ™å¯¹æ¯ä¸€ä¸ªè¾“å‡ºï¼Œéƒ½æœ‰\\(I\\)æ¬¡ä¹˜æ³•ä¸\\(I - 1\\)æ¬¡åŠ æ³•ï¼Œå› æ­¤è€ƒè™‘æ‰€æœ‰è¾“å‡ºï¼Œæ€»çš„FLOPsä¸º\\(FLOPs_{fc} = (2 \\times I - 1) \\times O\\) ä¸Šè¿°è®¡ç®—åŒæ ·æ²¡æœ‰è€ƒè™‘biasï¼Œå¦‚æœè€ƒè™‘biasï¼Œåˆ™æ¯ä¸€ä¸ªè¾“å‡ºéƒ½ä¼šå¢åŠ ä¸€æ¬¡åŠ æ³•ï¼Œæœ‰\\(FLOPs= (2 \\times I ) \\times O\\)æ³¨ï¼šä¸Šè¿°è®¡ç®—å‡æ²¡æœ‰è€ƒè™‘è¾“å…¥çš„Batch sizeç»´åº¦ã€‚è‡ªåŠ¨è®¡ç®—çš„å·¥å…·sovrasov/flops-counter.pytorch Flops counter for convolutional networks in pytorch frameworkä½¿ç”¨ç¤ºä¾‹ (ç»å¾®è°ƒï¼Œä»¥repoæä¾›ä¸ºå‡†)import torchvision.models as modelsimport torchfrom ptflops import get_model_complexity_infonet = models.alexnet()macs, params = get_model_complexity_info(model=net, input_res=(3, 224, 224), as_strings=True, print_per_layer_stat=True, verbose=True)print(&#39;{:&amp;lt;30} {:&amp;lt;8}&#39;.format(&#39;Computational complexity: &#39;, macs))print(&#39;{:&amp;lt;30} {:&amp;lt;8}&#39;.format(&#39;Number of parameters: &#39;, params))å°†è¿”å›å„è®¡ç®—å•å…ƒçš„è®¡ç®—é‡åŠæ¯”ä¾‹ï¼Œå¦‚ä¸‹ï¼šAlexNet( 61.101 M, 100.000% Params, 0.716 GMac, 100.000% MACs, (features): Sequential( 2.47 M, 4.042% Params, 0.657 GMac, 91.804% MACs, (0): Conv2d(0.023 M, 0.038% Params, 0.07 GMac, 9.848% MACs, 3, 64, kernel_size=(11, 11), stride=(4, 4), padding=(2, 2)) (1): ReLU(0.0 M, 0.000% Params, 0.0 GMac, 0.027% MACs, inplace=True) (2): MaxPool2d(0.0 M, 0.000% Params, 0.0 GMac, 0.027% MACs, kernel_size=3, stride=2, padding=0, dilation=1, ceil_mode=False) ... (10): Conv2d(0.59 M, 0.966% Params, 0.1 GMac, 13.936% MACs, 256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1)) (11): ReLU(0.0 M, 0.000% Params, 0.0 GMac, 0.006% MACs, inplace=True) (12): MaxPool2d(0.0 M, 0.000% Params, 0.0 GMac, 0.006% MACs, kernel_size=3, stride=2, padding=0, dilation=1, ceil_mode=False) ) (avgpool): AdaptiveAvgPool2d(0.0 M, 0.000% Params, 0.0 GMac, 0.001% MACs, output_size=(6, 6)) (classifier): Sequential( 58.631 M, 95.958% Params, 0.059 GMac, 8.195% MACs, (0): Dropout(0.0 M, 0.000% Params, 0.0 GMac, 0.000% MACs, p=0.5, inplace=False) ... (6): Linear(4.097 M, 6.705% Params, 0.004 GMac, 0.573% MACs, in_features=4096, out_features=1000, bias=True) ))Computational complexity: 0.72 GMacNumber of parameters: 61.1 Må…¶ä»–å‚è€ƒ ç¥ç»ç½‘ç»œè¿è¡Œæ•ˆç‡" }, { "title": "ä¼˜ç§€çš„æ•™ç¨‹/èµ„æ–™", "url": "/posts/%E4%BC%98%E7%A7%80%E7%9A%84%E8%B5%84%E6%96%99%E6%95%99%E7%A8%8B/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, ä¼˜ç§€èµ„æ–™ï¼Œæ•™ç¨‹", "tags": "", "date": "2021-08-11 14:00:00 +0800", "snippet": "æœ¬é¡µç§¯ç´¯ä¸€äº›åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„æ¯”è¾ƒå¥½çš„æ•™ç¨‹æˆ–èµ„æ–™ï¼Œè®°å½•ä¸è¿·è·¯~kalman filter rlabbe/Kalman-and-Bayesian-Filters-in-Python Kalman Filter book using Jupyter Notebook éå¸¸è¯¦ç»†ç”ŸåŠ¨ï¼ˆå¯èƒ½æœ‰ç‚¹å•°å—¦â€¦ï¼‰ï¼Œé…åˆJupyter Notebookï¼Œä¸°å¯Œå¯è§†åŒ–ï¼Œå¡å°”æ›¼æ»¤æ³¢å…¥é—¨å¼ºæ¨:+1: KalmanFilter.Nettransformer bilibili-å°å¤§æå®æ¯…21å¹´æœºå™¨å­¦ä¹ è¯¾ç¨‹ self-attentionå’Œtransformer æå®æ¯…è€å¸ˆæ°¸è¿œçš„ç¥ï¼Transformerå…¥é—¨å¼ºæ¨:+1: è¿™ä¸ªè§†é¢‘æ›´å¤šæ˜¯ä»seq2seqï¼Œæœºå™¨ç¿»è¯‘çš„è§’åº¦æ¥è®²è§£transformer bilibili-ææ²-transfomerè®ºæ–‡é€æ®µç²¾è¯»å¼ºåŒ–å­¦ä¹  datawhalechina/easy-rlæ­£åˆ™è¡¨è¾¾å¼ RegEx æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ Programiz - Python RegEx æœºå™¨å­¦ä¹ åŸºç¡€ CORNELL CS4780 â€œMachine Learning for Intelligent Systemsâ€ â€œThis man is a giftâ€ æ¨ç†åŠ é€Ÿ :+1:æ—·è§†å¤©å…ƒMegengineåšå®¢ CPUçŸ©é˜µä¹˜æ³•ä¼˜åŒ–è§£æ CUDA çŸ©é˜µä¹˜æ³•ç»ˆæä¼˜åŒ–æŒ‡å— ARM ç®—å­æ€§èƒ½ä¼˜åŒ–ä¸Šæ‰‹æŒ‡å— (çŸ¥ä¹) å¼€æº 2 å¹´åŠï¼Œé™¤äº†æ€§èƒ½ä¼˜åŒ–æˆ‘ä»¬å•¥ä¹Ÿæ²¡åš â€‹" }, { "title": "matplotlibç³»ç»Ÿå­¦ä¹ ", "url": "/posts/matplotlib%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "matplotlib", "date": "2021-08-10 21:47:00 +0800", "snippet": "å…³äºæœ¬é¡µmatplotlibæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„Pythonç»˜å›¾åŒ…ï¼Œæœ¬é¡µä»‹ç»æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›æ“ä½œå’Œç»éªŒè®°å½•ï¼Œä¾¿äºæ—¥åå‚è€ƒå¤ç”¨ã€‚å›¾1 matplotlibç»˜å›¾çš„å…³é”®å…ƒç´ åŸºæœ¬ä½¿ç”¨å¯¼å…¥åŒ…import matplotlib.pyplot as pltA quick and dirty way - ä½¿ç”¨plt.xxxA = [1, 2, 3]B = [4 ,5, 6]plt.plot(A, B)plt.title(&#39;test title&#39;)plt.show()ä»¥ä¸Šä»£ç é»˜è®¤å»ºç«‹ä¸€å¼ Figureï¼Œåœ¨è¿™å¼ Figureä¸Šéšå¼åœ°å»ºç«‹ä¸€ä¸ªaxesï¼Œç„¶åæŠŠå†…å®¹ç»˜åˆ¶åœ¨è¿™ä¸ªaxesä¸Šã€‚matplotlibè¦ç”»å‡ºä¸€å¼ å›¾çœŸæ˜¯æœ‰Nç§æ–¹å¼ã€‚è€Œplt.xxxå°½ç®¡æ–¹ä¾¿ï¼Œä½†æœ‰çš„åŠŸèƒ½å¯èƒ½ä¸æ”¯æŒï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿ä»£ç çš„å¤ç”¨ï¼Œå¸Œæœ›è‡ªå·±ç¨³å®šåœ°ä½¿ç”¨ä¸€ç§æ›´åŠ æ™®é€‚çš„æ–¹å¼ã€‚ä½¿ç”¨ax.xxxfig, ax = plt.subplots()print(type(fig)) # &amp;lt;class &#39;matplotlib.figure.Figure&#39;&amp;gt;print(type(ax)) # &amp;lt;class &#39;matplotlib.axes._subplots.AxesSubplot&#39;&amp;gt;plt.subplots()çš„é»˜è®¤å€¼ä¸ºncols=nrows=1ï¼Œæ•…ä»¥ä¸Šä»£ç è¿”å›çš„axä¸ºå•ä¸€çš„ä¸€ä¸ªAxesSubplotå¯¹è±¡ï¼ˆä¸å¯ç´¢å¼•ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªaxä¸Šç»˜å›¾ï¼šax.plot(A, B)ç»˜åˆ¶å¤šå›¾n_rows, n_cols = 2, 2fig, axes = plt.subplots(n_rows, n_cols)print(type(axes))print(axes)è¾“å‡ºä¸ºï¼š&amp;lt;class &#39;numpy.ndarray&#39;&amp;gt;[[&amp;lt;AxesSubplot:&amp;gt; &amp;lt;AxesSubplot:&amp;gt;] [&amp;lt;AxesSubplot:&amp;gt; &amp;lt;AxesSubplot:&amp;gt;]]å¯ä»¥çœ‹åˆ°è¿”å›çš„axesæ˜¯ä¸€ä¸ªç”±AxesSubplotç»„æˆçš„numpy.ndarrayå¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¸¸è§„çš„ç´¢å¼•å¾—åˆ°å¯¹åº”çš„axï¼Œç„¶ååœ¨å…¶ä¸Šç»˜å›¾ï¼šaxes[0][0].plot(...)axes[0][1].plot(...)axes[1][0].plot(...)axes[1][1].plot(...)ä½¿ç”¨forå¾ªç¯ï¼šfor i in range(n_rows): for j in range(n_cols): axes[i][j].plot(...) # plot anything you want on the coresponding ax plt.show()å¦‚æœè§‰å¾—äºŒç»´çš„ç´¢å¼•å†™èµ·æ¥æœ‰äº›éº»çƒ¦ï¼Œä¹Ÿå¯ä»¥for i in range(n_rows * n_cols): ax = plt.subplot(n_rows, n_cols, i+1) # because index in plt starts from 1, so we use `i+1` here ax.plot(...)plt.show()ä¸ºå›¾åƒå¢åŠ å±æ€§æœ‰æ—¶éœ€è¦ä¸ºå›¾åƒå¢åŠ ä¸€äº›å±æ€§ï¼Œå¦‚åæ ‡è½´labelï¼Œå›¾çš„titleç­‰ã€‚ax.set_xlabel(&#39;x_label&#39;) # x_labelax.set_ylabel(&#39;y_label&#39;) # y_labelax.set_title(&#39;ax title&#39;) # ax titlefig.suptitle(&#39;fig title&#39;) # fig titleç»˜åˆ¶æ›²çº¿ä¸ºæ›²çº¿å¢åŠ å±æ€§markerax.plot(A, B, marker=&#39;o&#39;)colorax.plot(A, B, color=&#39;b&#39;) matplotlibä¹Ÿæ”¯æŒæ ¹æ®å…³é”®å­—æŒ‡å®šé¢œè‰²ï¼Œå¦‚color=#C6FDFA é…è‰²æ–¹æ¡ˆå‚è€ƒï¼šé…è‰²å¡ ä¸€ä¸ªaxä¸Šç»˜åˆ¶å¤šæ¡æ›²çº¿å¹¶æ·»åŠ å›¾ä¾‹ax.plot(A1, B1, label=&#39;plot_1&#39;)ax.plot(A2, B2, label=&#39;plot_2&#39;)ax.legend()æ°´å¹³/ç«–ç›´çº¿å‚è€ƒ æ°´å¹³çº¿ï¼šax.axhline(y=5, xmin=0.1, xmax=0.9, linestyle=&quot;--&quot;) ç«–ç›´çº¿ï¼šax.axvline(x=5, ymin=0.1, ymax=0.9, linestyle=&quot;--&quot;)ç»˜åˆ¶æŸ±çŠ¶å›¾å‚è€ƒç»™æŸ±çŠ¶å›¾å¢åŠ annotationçš„æ–¹æ¡ˆï¼š å‚è€ƒç»˜åˆ¶ç›´æ–¹å›¾å‚è€ƒ å‚è€ƒax.hist(dist, bins=n_bins)ç»˜åˆ¶å¸¦colorbarçš„(äºŒç»´ç‰¹å¾)å›¾å‚è€ƒ å‚è€ƒimport matplotlib.pyplot as pltimport numpy as npplt.imshow(np.random.random((100, 100)))plt.colorbar()# plt.show()plt.savefig(&quot;colorbar.png&quot;)ç»˜åˆ¶ç®±å‹å›¾å‚è€ƒå‚è€ƒå…¶ä»–ä¸€äº›æ“ä½œ ä¿å­˜å›¾åƒï¼šplt.savefig(PATH) æŠŠå›¾ä¾‹æ”¾åœ¨å›¾åƒå¤–ï¼šå‚è€ƒï¼Œè°ƒèŠ‚legend()å‚æ•°ï¼Œä¸€ä¸ªç¤ºä¾‹å¦‚ä¸‹ï¼š # plt.figure(figsize=(8, 4.8)) # å¯èƒ½éœ€è¦è°ƒèŠ‚ç”»å¸ƒå¤§å°ï¼Œé˜²æ­¢å›¾åƒæœ¬èº«è¢«å›¾ä¾‹ç©ºé—´è¿‡åº¦å‹ç¼© # æŠŠå›¾ä¾‹çš„å·¦ä¸Šè§’å¯¹é½åˆ°å›¾çš„å³ä¸Šè§’plt.legend(loc=&#39;upper left&#39;, bbox_to_anchor=(1., 1.))plt.tight_layout() # æ²¡æœ‰è¿™ä¸€è¡Œï¼Œå›¾ä¾‹å¯èƒ½è¢«è£åˆ‡æ‰ å…³é—­åæ ‡è½´ï¼šplt.axis(&#39;off&#39;) è§£å†³ä¸­æ–‡æ— æ³•æ˜¾ç¤ºï¼šå‚è€ƒ import matplotlib.pyplot as plt plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] # æ­¥éª¤ä¸€ï¼ˆæ›¿æ¢sans-serifå­—ä½“ï¼‰plt.rcParams[&#39;axes.unicode_minus&#39;] = False # æ­¥éª¤äºŒï¼ˆè§£å†³åæ ‡è½´è´Ÿæ•°çš„è´Ÿå·æ˜¾ç¤ºé—®é¢˜ï¼‰ å›¾åƒå±æ€§è®¾ç½® è®¾ç½®Figureå¤§å°ï¼šplt.figure(figsize=(width, height)) é»˜è®¤æ˜¯(6.4, 4.8) å‚è€ƒ è®¾å®šå›¾åƒåˆ†è¾¨ç‡ï¼šplt.figure(dpi=1200) è®¾ç½®å­—ä½“å¤§å°ï¼šplt.rcParams.update({&#39;font.size&#39;: 22}) é»˜è®¤æ˜¯10ï¼Œå‚è€ƒ å‚è€ƒ Medium - What Are the â€œpltâ€ and â€œaxâ€ in Matplotlib Exactly? matplotlibï¼šå…ˆææ˜ç™½plt. /ax./ figå†ç”» matplotlib gallery geeksforgeeks - Matplotlib Tutorial" }, { "title": "Latex cheat sheet", "url": "/posts/Latex-cheat-sheet/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, cheat sheets", "tags": "cheat sheets", "date": "2021-05-08 10:46:00 +0800", "snippet": "å„ç§ç¬¦å·å¯å‚è€ƒè¿™ç¯‡åšå®¢ã€‚å¦å¤–æ€»ç»“ä¸€äº›å¹³æ—¶ç”¨åˆ°çš„ç¬¦å·ï¼š ç»„åˆæ•° \\(\\tbinom{n}{r}\\)å½¢å¼ï¼š\\tbinom{n}{r} \\(C_n^r\\)å½¢å¼ï¼šC_n^r åˆ†æ®µå‡½æ•° f(x)= \\begin{cases} 0 &amp;amp; condition1 \\\\ 1 &amp;amp; condition2 \\end{cases} \\[f(x)= \\begin{cases} 0 &amp;amp; condition1 \\\\ 1 &amp;amp; condition2 \\end{cases}\\] æ¢è¡Œå¯¹é½ \\begin{aligned} f(x) &amp;amp;= ax + b \\\\ g(x) &amp;amp;= cx + d\\end{aligned} \\[\\begin{aligned} f(x) &amp;amp;= ax + b \\\\ g(x) &amp;amp;= cx + d\\end{aligned}\\] ä¸€äº›æ•°å­¦ç¬¦å·ï¼š èŒƒæ•°ï¼š\\Vert x \\Vert _p \\(\\rightarrow\\) $\\Vert x \\Vert _p$ è¿ä¹˜ï¼š\\prod \\(\\rightarrow\\) $\\prod$ ç§¯åˆ†ï¼š\\int \\(\\rightarrow\\) $\\int$ æ­£æ¯”äºï¼š\\propto \\(\\rightarrow\\) $\\propto$ ä¸€äº›æ•°å­¦å­—ä½“ ç©ºå¿ƒå­—ä½“ï¼š$\\mathbb{R}$ \\(\\rightarrow\\) \\(\\mathbb{R}\\) åŠ ç²—å­—ä½“ï¼š$\\mathbf{R}$ \\(\\rightarrow\\) \\(\\mathbf{R}\\) èŠ±ä½“ï¼š$\\mathcal{R}$ \\(\\rightarrow\\) $\\mathcal{R}$ ä¸€äº›ä¸Šæ ‡ï¼š $\\hat{x}$ \\(\\rightarrow\\) $\\hat{x}$ $\\tilde{x}$ \\(\\rightarrow\\) $\\tilde{x}$ $\\overline{x}$ \\(\\rightarrow\\) $\\overline{x}$ $\\dot{x}$ \\(\\rightarrow\\) $\\dot{x}$ å›¾ç‰‡åœ¨documentå¼€å§‹å‰ï¼Œå®šä¹‰å®šä¹‰å›¾ç‰‡æ–‡ä»¶ç›®å½•ä¸æ‰©å±•å% å®šä¹‰å›¾ç‰‡æ–‡ä»¶ç›®å½•ä¸æ‰©å±•å\\graphicspath{ {figures/} }\\DeclareGraphicsExtensions{.pdf,.eps,.png,.jpg,.jpeg}\\begin{document}......\\end{document}å•å¼ å›¾ç‰‡\\begin{figure}[!htp] \\centering \\includegraphics[width=0.3\\linewidth]{fig_path} % [height=2cm] \\caption{fig_caption} \\label{fig:}\\end{figure}ä¸¤ï¼ˆå¤šï¼‰å›¾å¹¶æ’æ”¾ç½®ï¼ˆä¸å…±ç”¨å›¾ç¼–å·ï¼‰% ä¸¤å›¾å¹¶æ’æ”¾ç½®ï¼ˆä¸å…±ç”¨å›¾ç¼–å·ï¼‰\\begin{figure}[!htp] \\begin{minipage}{0.48\\textwidth} \\centering \\includegraphics[height=3cm]{fig_path} \\caption{éªŒç”µå™¨ç¤ºæ„} \\label{fig:parallel1} \\end{minipage}\\hfill \\begin{minipage}{0.48\\textwidth} \\centering \\includegraphics[height=3cm]{fig_path} \\caption{åœºæ™¯} \\label{fig:parallel2}\\end{minipage}\\end{figure}ä¸¤å›¾å¹¶æ’æ”¾ç½®ï¼ˆå…±ç”¨å›¾ç¼–å·ï¼‰\\usepackage{subcaption} % package `subcaption` is needed% ä¸¤å›¾å¹¶æ’æ”¾ç½®ï¼ˆå…±ç”¨å›¾ç¼–å·ï¼‰\\begin{figure}[!htp] \\centering \\begin{subfigure}{0.4\\textwidth} \\centering \\includegraphics[height=2cm]{sjtu-badge.pdf} % width=0.3\\linewidth \\caption{å­å›¾1å} \\end{subfigure} % \\hspace{1cm} \\begin{subfigure}{0.4\\textwidth} \\centering \\includegraphics[height=2cm]{sjtu-name.pdf} % width=0.3\\linewidth \\caption{å­å›¾2å} \\end{subfigure} \\caption{å›¾å} \\label{fig:subfigure}\\end{figure}è¡¨æ ¼å‚è€ƒ\\begin{table}[!htp] \\centering \\label{tab:labelOfTable} \\caption{captionOfTable} \\begin{tabular}{|c|c|c|c|} \\hline &amp;amp; &amp;amp; &amp;amp; \\\\ \\hline &amp;amp; &amp;amp; &amp;amp; \\\\ \\hline \\end{tabular}\\end{table}åˆå¹¶å•å…ƒæ ¼ï¼šå‚è€ƒåŒæ æ¨¡æ¿ä¸‹ï¼Œè¦æ’å…¥è·¨æ å›¾è¡¨å°†\\begin{figure}...\\end{figure}æ›¿æ¢ä¸º\\begin{figure*}...\\end{figure*}å³å¯ã€‚è¡¨æ ¼tableåŒç†ã€‚ä»£ç å’Œç®—æ³•ä»£ç æ®µ\\begin{lstlisting}[language=Python]\\end{lstlisting} ä¼ªä»£ç å‚è€ƒå¼•ç”¨BibTeXå‚è€ƒ% main.tex\\begin{document}Here~\\cite{zhang2022integer} is a sample citation.\\bibliographystyle{plain}\\bibliography{citations} \\end{document}% citations.bib@inproceedings{zhang2022integer, title={...}, author={...}}...å…¶ä»– æ–‡å­—å±…ä¸­ï¼š\\centerline{} æ–‡å­—ä¸‹åˆ’çº¿ï¼š\\uline{} è°ƒèŠ‚è¡Œè·ï¼š\\linespread{} ï¼š\\linespread{1.3} \\(\\rightarrow\\) 1.3å€è¡Œè· å‚è€ƒ å¦èµ·ä¸€é¡µï¼š\\clearpage å…¬ç¤ºä¸­æ’å…¥ä¸­æ–‡\\mbox{}ï¼š\\sin(\\mbox{ç‹—}) \\(\\rightarrow\\) \\(\\sin(\\mbox{ç‹—})\\) åˆ›å»ºæ–°çš„æ ¼å¼ï¼ˆå¦‚åŠ æ¡†æ–‡å­—ï¼‰ % åœ¨\\begin{document}ä¹‹å‰\\usepackage{environ}\\usepackage{tikz}\\NewEnviron{elaboration}{\\par\\begin{tikzpicture}\\node[rectangle,minimum width=0.9\\textwidth] (m) {\\begin{minipage}{0.85\\textwidth}\\BODY\\end{minipage}};\\draw[dashed] (m.south west) rectangle (m.north east);\\end{tikzpicture}} % åœ¨æ­£æ–‡ä¸­\\begin{elaboration}what you write...\\end{elaboration} æ·»åŠ é™„å½• \\usepackage[title]{appendix} \\begin{document}... \\begin{appendices}\\section{Some Notation}\\end{appendices} \\end{document} æ‰‹åŠ¨ç¼©å°é—´è· \\vspace{-0.8cm} å‚è€ƒæ–‡çŒ®ä¸­ä½¿ç”¨first author et al.æ ¼å¼ï¼ˆç¼©å‡å‚è€ƒæ–‡çŒ®ç¯‡å¹…ï¼‰ å‚è€ƒ author={Alpher, R. and others} å‚è€ƒæ–‡çŒ®æ˜¾ç¤ºé—®å·çš„è§£å†³ å‚è€ƒ ä»¥çŸ¢é‡å›¾å½¢å¼æ’å…¥PPTä¸­ç»˜åˆ¶çš„å›¾ PPTä¸­é€‰ä¸­å›¾å½¢ï¼Œå³é”® $\\rightarrow$ å¦å­˜ä¸ºå›¾ç‰‡ $\\rightarrow$ ä¿å­˜ä¸º.svgæ ¼å¼ å°†.svgè½¬åŒ–ä¸º.pdfï¼šINKSCAPE æ‰“å¼€.svgæ–‡ä»¶ å¦å­˜ä¸º.pdfæ–‡ä»¶ åœ¨Latexä¸­æ’å…¥.pdfæ–‡ä»¶ " }, { "title": "Follow!", "url": "/posts/Follow!/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, èµ„æ–™æ‚è®°", "tags": "follow", "date": "2021-04-29 19:25:00 +0800", "snippet": "ä¸šç•Œå¤§æ‹¿ä»¬ Song Han ä¸»é¡µ Google scholar Cewu Lu ä¸»é¡µ Google scholar Rongrong Ji ä¸»é¡µ Google scholar Yunhe Wang ä¸»é¡µ Google scholar çŸ¥ä¹ Kurt Keutzer ä¸»é¡µ Google scholar Kilian Q. Weinberger ä¸»é¡µ Google scholarä¸€äº›æ£’æ£’å“’åšä¸»ä»¬ Oldpançš„ä¸ªäººåšå®¢ &amp;amp; çŸ¥ä¹ å†™äº†éå¸¸ä¸é”™çš„éƒ¨ç½²ç›¸å…³çš„åšå®¢ï¼ˆåƒTensorRTè¯¦ç»†å…¥é—¨æŒ‡åŒ—ï¼‰ GiantPandaCV è‹å‰‘æ—-BoJone - ç§‘å­¦ç©ºé—´ Jonathan Hui polariszhao æ¥å‘€ï¼Œå¿«æ´»å‘€~ YaHei ä»é›¶å¼€å§‹çš„BLOG â€œä¸–äº‹éš¾æ–™ï¼Œä¿æŒä½è°ƒâ€çš„CSDNåšå®¢ Machine Learning@Berkeley é»æ˜ç°çƒ¬ æµ·æ»¨çš„Blog å­¦ä¹ èµ„æº Valse - Bilibili ä¸Šæµ·äº¤é€šå¤§å­¦IPADS - Bilibili " }, { "title": "å†é‡caffe", "url": "/posts/%E5%86%8D%E9%81%87caffe/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "caffe", "date": "2021-04-19 13:13:00 +0800", "snippet": "ä¸ºå•¥å«å†é‡caffeï¼Œæ˜¯å› ä¸ºè¿‘ä¸€å¹´å‰å› ä¸ºå®éªŒå®¤é¡¹ç›®éœ€è¦ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨åˆ°äº†caffeã€‚å½“æ—¶caffeçš„ç¯å¢ƒé…ç½®å’Œä¸å¤Ÿç›´è§‚æ˜“ç”¨ç®€ç›´è®©æˆ‘å¯¹caffeå°è±¡å¾ˆåâ€¦ç°åœ¨å› ä¸ºæ¶‰åŠéƒ¨ç½²ç›¸å…³çš„å·¥ä½œï¼Œå†æ¬¡æ¥è§¦åˆ°caffeã€‚ç°åœ¨å†çœ‹ï¼Œå€’è§‰å¾—caffeåƒæ˜¯æ·±åº¦å­¦ä¹ æ¡†æ¶ç‰¹åˆ«æœ´ç´ çº¯çœŸçš„æ ·å­ï¼Œä¹Ÿå­¦åˆ°äº†ä¸€äº›æ–°çš„caffeçš„ä½¿ç”¨æŠ€å·§ï¼Œä»¥åå¯èƒ½è¿˜ä¼šç”¨åˆ°ï¼Œåšä¸ªè®°å½•ã€‚Pythonç¯å¢ƒä¸‹ç›´æ¥ä½¿ç”¨opencvçš„dnnæ¨¡å—è¿è¡Œcaffeæ¨¡å‹å¶ç„¶å‘ç°opencvçš„dnnæ¨¡å—ç›´æ¥åŠ è½½å’Œä½¿ç”¨caffeæ¨¡å‹ï¼Œä»¥åé‡åˆ°ä»…æœ‰caffeé¢„è®­ç»ƒæ¨¡å‹çš„æƒ…å†µï¼Œå¯ä»¥ä¸å¿…é…ç½®caffeç¯å¢ƒï¼Œç›´æ¥ä½¿ç”¨opencvè¿è¡Œä½¿ç”¨å•¦ï¼ï¼ˆopencvæ°¸è¿œçš„ç¥ï¼ï¼‰ä¸€ä¸ªæ ·ä¾‹import cv2protoFile = &#39;path/to/xx.prototxt&#39;weightsFile = &#39;path/to/xx.caffemodel&#39;net = cv2.dnn.readNetFromCaffe(protoFile, weightsFile)# === CPU === # # net.setPreferableBackend(cv2.dnn.DNN_TARGET_CPU)# print(&quot;Using CPU device&quot;)# === GPU(not tested) === # # net.setPreferableBackend(cv2.dnn.DNN_BACKEND_CUDA)# net.setPreferableTarget(cv2.dnn.DNN_TARGET_CUDA)# print(&quot;Using GPU device&quot;)img = cv2.imread(&#39;path/to/img&#39;)inpBlob = cv2.dnn.blobFromImage(img, 1.0 / 255, (inWidth, inHeight), (0, 0, 0), swapRB=False, crop=False)net.setInput(inpBlob, &#39;image&#39;) # bind the input and input layeroutput = net.forward(&#39;net_output&#39;) # set to the layer of which you want the featureç›¸å…³å‡½æ•° Deep Neural Network module blobFromImage readNetFromCaffe setPreferableBackend cv::dnn::Net Class Reference setInput forward caffeæ¨¡å‹è½¬pytorchä¸€æ¬¡éœ€è¦æŠŠcaffeæ¨¡å‹è½¬åˆ°Pytorchå½¢å¼ï¼Œè®°å½•ä¸€ä¸‹å…·ä½“è½¬åŒ–çš„è¿‡ç¨‹ã€‚å·²çŸ¥ï¼šcaffeæ¨¡å‹å®šä¹‰æ–‡ä»¶model_deploy.prototxtï¼Œcaffeæƒé‡æ–‡ä»¶model_weight.caffemodel;ç›®æ ‡ï¼šPytorchæ¨¡å‹å®šä¹‰æ–‡ä»¶ï¼ˆmodel.pyï¼‰ä¸pytorchæƒé‡æ–‡ä»¶model.ptæµç¨‹ï¼š æƒé‡è½¬åŒ–ï¼šä½¿ç”¨caffemodel2pytorchå·¥å…·ï¼Œå°†caffeæƒé‡æ–‡ä»¶è½¬åŒ–ä½pytorchæƒé‡æ–‡ä»¶ã€‚ python caffemodel2pytorch.py model_weight.caffemodel -o model_weight.pt å¾—åˆ°pytorchæƒé‡æ–‡ä»¶model_weight.ptã€‚ å¾—åˆ°Pytorchæ¨¡å‹ç»“æ„å®šä¹‰ã€‚ ä½¿ç”¨netronå¯è§†åŒ–caffeæ¨¡å‹ç»“æ„; ç»“åˆå¯è§†åŒ–çš„ç½‘ç»œç»“æ„ï¼Œæ‰‹å†™pytorchæ¨¡å‹å®šä¹‰æ–‡ä»¶(æˆ‘çœŸçš„æ˜¯æ‰‹å†™ï¼Œä¸çŸ¥é“æ˜¯å¦æœ‰æ›´æ–¹ä¾¿çš„åŠæ³•ï¼Ÿ)ã€‚ è¾“å…¥åŒä¸€æ ·æœ¬ï¼Œæ£€æŸ¥caffeå’ŒPytorchä¸¤ç§æ¨¡å‹çš„è¾“å‡ºæ˜¯å¦ç›¸åŒã€‚ç›¸åŒä¾¿è½¬åŒ–æˆåŠŸï¼Œå¦‚ä¸ç›¸åŒåˆ™æ¯”å¯¹ç½‘ç»œå†…éƒ¨å¯¹åº”è¾“å‡ºï¼Œé€ç‚¹æ’æŸ¥ã€‚ img0 = cv2.imread(&#39;path/to/img&#39;)# get caffe outputnet = cv2.dnn.readNetFromCaffe(protoFile, weightsFile)inpBlob = cv2.dnn.blobFromImage(img0, 1.0 / 255, (inWidth, inHeight), (0, 0, 0), swapRB=False, crop=False)net.setInput(inpBlob, &#39;image&#39;) # bind the input and input layercaffe_out = net.forward(&#39;net_output&#39;) # set to the layer of which you want the feature# get pytorch outputmodel = Model()model.load_state_dict(torch.load(&#39;path/to/model.pt&#39;))img = cv2.resize(img0, ((inWidth, inHeight)))img = np.transpose(img, (2, 0, 1)).astype(np.float32) # HWC -&amp;gt; CWHimg = torch.from_numpy(img)img = img / 255img = torch.unsqueeze(img, 0)pytorch_out = model(img)ä¸€ä¸ªä¾›å‚è€ƒçš„pytorchæ¨¡å‹å®šä¹‰æ–‡ä»¶æ¡†æ¶# model.pyimport torchimport torch.nn as nnfrom collections import OrderedDictclass Pose25Model(nn.Module): def __init__(self): super(Pose25Model, self).__init__() self.get_module_dict() self.get_torch_module() # é…ç½®ç½‘ç»œå±‚åç§°åŠå…¶å‚æ•° def get_module_dict(self): ... for stage_id in range(0, 4): self.blocks[&#39;Mconv1_stage%d&#39; % stage_id] = OrderedDict([ # (&#39;conv_name&#39;: [in_channels, inner_channel, kernel_size, stride(default=1), padding(default=0)]) (&#39;Mconv1_stage%d&#39; % stage_id, [input_channel, inner_channel, 3, 1, 1]), ... ]) # ä¸ºç½‘ç»œå±‚åˆ†é…å®é™…çš„pytorchç½‘ç»œmodule def get_torch_module(self): for key in self.blocks.keys(): block_info = self.blocks[key] for layer_name, v in block_info.items(): # print(layer_name, v) if &#39;pool&#39; in layer_name: layer = nn.MaxPool2d(kernel_size=v[0], stride=v[1], padding=v[2], ceil_mode=True) self.add_module(layer_name, layer) else: layer = nn.Conv2d(in_channels=v[0], out_channels=v[1], kernel_size=v[2], stride=v[3], padding=v[4]) self.add_module(layer_name, layer) ReLU_name = &#39;relu&#39; + layer_name.split(&#39;conv&#39;)[1] self.add_module(ReLU_name, torch.nn.ReLU(inplace=True)) def forward(self, x): x = ... ... return xå¤§å°å‘ä»¬Qï¼šcaffeå’Œpytorchæ¨¡å‹å¾—åˆ°çš„è¾“å‡ºå¤§å°ä¸ä¸€è‡´ï¼ŸAï¼šçœ‹çœ‹Pytorchä¸­ï¼Œmaxpoolingå±‚çš„å®šä¹‰class torch.nn.MaxPool2d(kernel_size, stride=None, padding=0, dilation=1, return_indices=False, ceil_mode=False)Pytorchä¸­ceil_modeå‚æ•°é»˜è®¤ä¸ºFalseï¼Œåœ¨è®¡ç®—ç‰¹å¾å›¾æ—¶ï¼Œä¼šå‘ä¸‹å–æ•´ï¼›è€Œcaffeæ˜¯é»˜è®¤å‘ä¸Šå–æ•´çš„ã€‚å› æ­¤è‹¥ä½¿ç”¨Pytorchçš„é»˜è®¤å‚æ•°ï¼Œä¼šä½¿caffeå¾—åˆ°çš„ç‰¹å¾å›¾å°ºå¯¸æ¯”pytorchçš„è¦å¤§ã€‚åœ¨Pytorchä¸­ä¿®æ”¹ceil_mode=Trueå°±å¯ä»¥å•¦ã€‚å‚è€ƒQï¼šè½¬åŒ–å¾—åˆ°çš„ptæ–‡ä»¶æ˜¯æ­£ç¡®çš„ï¼ˆå¯ä»¥é€šè¿‡å°†å¯¹åº”å±‚çš„å‚æ•°æ‰“å°å‡ºæ¥æ¯”å¯¹ä¸‹ï¼‰ï¼ŒPytorchçš„æ¨¡å‹å®šä¹‰ä¼¼ä¹ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¾“å‡ºç»“æœå°±ä¸ä¸€æ ·å‘¢ï¼ŸAï¼šè¿™ä¸ªåŸå› å¯èƒ½æœ‰å¾ˆå¤šâ€¦æˆ‘çš„åŸå› æ˜¯catçš„æ‹¼æ¥é¡ºåºã€‚æ¯”å¦‚å¯¹ç‰¹å¾æ²¿channelç»´è¿›è¡Œæ‹¼æ¥æ—¶ï¼Œä¸åŒçš„æ‹¼æ¥é¡ºåºï¼Œå¾—åˆ°çš„ç»“æœè‚¯å®šä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥é‡åˆ°catæ“ä½œè¦å°å¿ƒï¼Œè¦çœ‹å‡†ç¡®çš„æ‹¼æ¥é¡ºåºï¼Œéœ€è¦åˆ°.prototxtä¸­å»çœ‹ï¼Œå¹¶æ®æ­¤å†™pytorchçš„catè¯­å¥ï¼Œnetronä½œå›¾æ˜¯ä¸ä¼šåæ˜ è¿™ä¸ªé¡ºåºçš„ï¼Œä¸å¯æƒ³å½“ç„¶å°±ç›´æ¥æŒ‰ç…§å®ƒç»™çš„é¡ºåºä»å·¦å‘å³ä¾æ¬¡æ‹¼æ¥äº†ã€‚" }, { "title": "TensorRTä½¿ç”¨", "url": "/posts/TensorRT%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "tensorrt", "date": "2021-04-16 09:43:00 +0800", "snippet": "TensorRTå®‰è£…æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¥ï¼Œä¸€èˆ¬æ²¡å•¥é—®é¢˜ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯taræ ¼å¼å®‰è£…ã€‚ ç”±äºTensorRT 7å¯¹CUDAç‰ˆæœ¬çš„è¦æ±‚ï¼Œæˆ‘åŸå…ˆæœåŠ¡å™¨çš„CUDAç‰ˆæœ¬ä¸º10.1ï¼Œå› æ­¤æ–°å®‰è£…äº†CUDA11.0å¹¶åšäº†åˆ‡æ¢ï¼ˆå¯ä»¥å‚è€ƒè¿™é‡Œï¼‰ TensorRTéœ€è¦å®‰è£…CuDNNï¼ˆåŒæ ·å‚ç…§CuDNNå®˜æ–¹æ–‡æ¡£ï¼‰ã€‚ 20210416ï¼šéœ€è¦æé†’çš„æ˜¯ï¼Œæ–‡æ¡£ä¸Šç»™äº†taræ–‡ä»¶å®‰è£…æŒ‡å¼•ï¼Œä½†æ˜¯CuDNNä¸‹è½½é¡µåªæä¾›äº†åç¼€ä¸º.solitairetheme8å’Œ.debçš„æ–‡ä»¶ä¸‹è½½ã€‚å¦‚æœä½¿ç”¨taræ–‡ä»¶æ–¹å¼ï¼Œéœ€è¦ä¸‹è½½.solitairetheme8æ ¼å¼çš„é‚£ä¸ªï¼Œä¸‹è½½åå°†å…¶åç¼€æ”¹ä¸º.tgzåæŒ‰taræ–‡ä»¶å®‰è£…æ–¹å¼æ¥å³å¯ã€‚ é‡åˆ°çš„é—®é¢˜Qï¼šImportError: libnvinfer.so.7: cannot open shared object file: No such file or directoryAï¼š å‚è€ƒï¼Œè¿™æ˜¯ç”±äºtensorrtçš„è·¯å¾„æ²¡æœ‰æ·»åŠ åˆ°è‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚è§£å†³æ–¹æ³•ä¸ºï¼š# æ‰“å¼€~/.bashrcvim ~/.bashrc# ç‚¹å‡»insertè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå°†ä¸‹é¢ä¸€è¡ŒåŠ å…¥ï¼ˆæ³¨æ„æ›¿æ¢è‡ªå·±çš„tensorRTè·¯å¾„ï¼‰export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:path/to/your_tensorRT/lib# ç¼–è¾‘å®Œæˆåï¼Œä¾æ¬¡é”®å…¥Esc, :wqé€€å‡º# åˆ·æ–°source ~/.bashrc # è¿™ä¸€æ­¥å¯èƒ½è¦ç­‰è¾ƒé•¿æ—¶é—´å¦ï¼Œå…³äºLinuxçš„ç¯å¢ƒå˜é‡ï¼Œå¯å‚è€ƒè¿™ç¯‡Pytorch æ¨¡å‹å‘TensorRTéƒ¨ç½²ä¸€ä¸ªå¾ˆå¥½çš„TensorRTå…¥é—¨èµ„æ–™ç›®å‰å·²ç»å°è¯•äº†ä¸¤ç§å¯è¡Œçš„æ–¹æ¡ˆï¼š ä½¿ç”¨NVIDIA-AI-IOT/torch2trt pytorch \\(\\rightarrow\\) onnx \\(\\rightarrow\\) TensorRTä½¿ç”¨torch2trtgithubdocumentå‡è®¾ç°åœ¨å·²ç»æœ‰äº†æ¨¡å‹çš„å®šä¹‰æ–‡ä»¶model.pyå’Œpytorchæƒé‡æ–‡ä»¶weight.ptåŸºç¡€æ“ä½œtorch2trtåŸºç¡€æ“ä½œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•import torchfrom torch2trt import torch2trtfrom torchvision.models.alexnet import alexnet# create some regular pytorch modelmodel = alexnet(pretrained=True).eval().cuda()# create a dummy input datax = torch.ones((1, 3, 224, 224)).cuda()# convert pytorch model to trt model (fp32) model_trt = torch2trt(model, [x])# excute and check the output of the converted trt_modely = model(x)y_trt = model_trt(x)print(torch.max(torch.abs(y - y_trt)))# save the trt model as a state_dict.torch.save(model_trt.state_dict(), &#39;alexnet_trt.pth&#39;)# load the saved model into a TRTModulefrom torch2trt import TRTModulemodel_trt = TRTModule()model_trt.load_state_dict(torch.load(&#39;alexnet_trt.pth&#39;))ä¸€äº›æ›´é«˜çº§ä¸€äº›çš„convertæ“ä½œå‚ç…§&amp;lt;torch2trt_root&amp;gt;/torch2trt/torch2trt.py#L482def torch2trt(module, inputs, input_names=None, output_names=None, log_level=trt.Logger.ERROR, max_batch_size=1, fp16_mode=False, max_workspace_size=1&amp;lt;&amp;lt;25, strict_type_constraints=False, keep_network=True, int8_mode=False, int8_calib_dataset=None, int8_calib_algorithm=DEFAULT_CALIBRATION_ALGORITHM, int8_calib_batch_size=1, use_onnx=False, **kwargs): ...è®¾å®šmax_batch_size# convert pytorch model to trt model (fp32) Max_batch_size = 8model_trt = torch2trt(model, [x], max_batch_size=Max_batch_size)convert to fp16 trt model# convert pytorch model to trt model (fp16) model_trt = torch2trt(model, [x], fp16_mode=True)convert to int8 modelè½¬åŒ–ä¸ºint8æ¨¡å‹éœ€è¦æ„å»ºcalibrateæ•°æ®é›†è¿›è¡Œæ ¡æ­£ï¼ŒæŒ‰ç…§è¿™é‡Œä½¿ç”¨Pytorchçš„datasetç±»æ„å»ºä¸€ä¸ªcali_datasetä¼ å…¥å³å¯ã€‚cali_dataset = Your_defined_cali_dataset# convert pytorch model to trt model (int8)model_trt = torch2trt(model, [x], int8_mode=True, int8_int8_calib_dataset=cali_dataset)æ³¨ï¼šå®˜æ–¹çš„__getitem__(self, index)å®ç°ä¸ºdef __getitem__(self, idx): image, _ = self.dataset[idx] image = image[None, ...] # add batch dimension return [image]ä½†æˆ‘è¿è¡Œèµ·æ¥ä¼šæœ‰ç»´åº¦ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæˆ‘åœ¨å®é™…ä½¿ç”¨æ—¶ä½¿ç”¨äº†å¦‚ä¸‹å®šä¹‰def __getitem__(self, idx): image, _ = self.dataset[idx] if self.transform is not None: image = self.transform(image) return [image]æ‰©å±•converterç›®å‰torch2trtæ”¯æŒçš„æ‰€æœ‰converterå¯ä»¥çœ‹è¿™é‡Œï¼Œä½†å¹¶æ²¡æœ‰æ¶µç›–æ‰€æœ‰TensorRTå·²ç»æ”¯æŒçš„æ‰€æœ‰ç®—å­ã€‚å½“æ‰€è½¬åŒ–çš„æ¨¡å‹ä¸­åŒ…å«ç›®å‰torch2trtçš„converteræ²¡æœ‰å®ç°çš„ç®—å­ï¼Œåˆ™ä¼šæŠ¥é”™å¹¶æ¨¡å‹è½¬åŒ–å¤±è´¥ï¼Œæ¯”å¦‚å¯¹torch.nn.MaxPool3dä¼šå‡ºç°warning: encountered known unsupported method torch.max_pool3dwarning: encountered known unsupported method torch.nn.fucntional.max_pool3d[TensorRT] ERROR: INVALID_ARGUMENT: Cannot find binding of given name: input_0ç†è®ºä¸Šï¼Œåªè¦æ˜¯TensorRTå·²ç»æ”¯æŒçš„ç®—å­ï¼Œå³ä½¿æ˜¯torch2trtæ²¡æœ‰å®šä¹‰å¯¹åº”çš„converterï¼Œæˆ‘ä»¬å‚ç…§torch2trtå·²ç»å®ç°çš„convererï¼Œè‡ªå·±ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†å…¶å®ç°ï¼Œå®˜æ–¹ç»™äº†ä¸€ä¸ªReLUç®—å­çš„converterä¾‹å­ã€‚è‡ªå®šä¹‰ä¸€ä¸ªconverterçš„æµç¨‹ä¸ºï¼š åœ¨&amp;lt;torch2trt_root&amp;gt;/torch2trt/conveters/ä¸‹æ–°å»ºä¸€ä¸ª&amp;lt;your_custom_converter&amp;gt;.py åœ¨&amp;lt;your_custom_converter&amp;gt;.pyä¸­å®ç°converter åœ¨&amp;lt;torch2trt_root&amp;gt;/torch2trt/conveters/__init__.pyä¸­importæ–°å®šä¹‰çš„converter é‡æ–°å®‰è£…torch2trtï¼špython setup.py installä»¥ä¸‹è®°å½•ä¸‹MaxPool3dçš„converterå®ç°æµç¨‹ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå‚ç…§äº†avg_pool.pyä¸­avg_pool3dçš„converterçš„å®ç°ã€‚ åœ¨&amp;lt;torch2trt_root&amp;gt;/torch2trt/conveters/ä¸‹æ–°å»ºä¸€ä¸ªmax_pool3d.py åœ¨max_pool3d.pyå®ç°torch.nn.MaxPool3dçš„converter # A CUSTOM ONE #from torch2trt.torch2trt import *from torch2trt.module_test import add_module_test @tensorrt_converter(&#39;torch.nn.functional.max_pool3d&#39;, enabled=trt_version() &amp;gt;= &#39;7.0&#39;)def convert_max_pool_trt7(ctx): # print(ctx.method_args) # parse args # refer to https://pytorch.org/docs/stable/generated/torch.nn.MaxPool3d.html input = get_arg(ctx, &#39;input&#39;, pos=0, default=None) kernel_size = get_arg(ctx, &#39;kernel_size&#39;, pos=1, default=None) stride = get_arg(ctx, &#39;stride&#39;, pos=2, default=None) padding = get_arg(ctx, &#39;padding&#39;, pos=3, default=0) dilation = get_arg(ctx, &#39;dilation&#39;, pos=4, default=False) return_indices = get_arg(ctx, &#39;return_indices&#39;, pos=5, default=True) ceil_mode = get_arg(ctx, &#39;ceil_mode&#39;, pos=6, default=True) # print(kernel_size, stride, padding, ceil_mode, count_include_pad) # get input trt tensor (or create constant if it doesn&#39;t exist) input_trt = add_missing_trt_tensors(ctx.network, [input])[0] output = ctx.method_return input_dim = input.dim() - 2 # get kernel size if not isinstance(kernel_size, tuple): kernel_size = (kernel_size,) * input_dim # get stride if not isinstance(stride, tuple): stride = (stride,) * input_dim # get padding if not isinstance(padding, tuple): padding = (padding,) * input_dim # For type, check the TensorRT Python API document layer = ctx.network.add_pooling_nd( input=input_trt, type=trt.PoolingType.MAX, window_size=kernel_size) layer.stride_nd = stride layer.padding_nd = padding if ceil_mode: layer.padding_mode = trt.PaddingMode.EXPLICIT_ROUND_UP output._trt = layer.get_output(0) çœ‹èµ·æ¥å¾ˆç®€å•çš„å¯¹ä¸ï¼Ÿéœ€è¦æé†’çš„æ˜¯æœ€å¼€å§‹è·å–å½“å‰layerçš„å‚æ•° input = get_arg(ctx, &#39;input&#39;, pos=0, default=None)...ceil_mode = get_arg(ctx, &#39;ceil_mode&#39;, pos=6, default=True) ä»torch2trt.torch2trt.pyçœ‹åˆ°get_argçš„å®šä¹‰ def get_arg(ctx, name, pos, default): if name in ctx.method_kwargs: return ctx.method_kwargs[name] elif len(ctx.method_args) &amp;gt; pos: return ctx.method_args[pos] else: return default è¿™é‡Œçš„method_kwargså’ŒPytorchå¯¹åº”çš„ç®—å­è¾“å…¥å‚æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼ï¼ˆä»è¿™ä¸ªå‡½æ•°çš„poså‚æ•°æ¥çœ‹ï¼Œé™¤äº†ç¬¬0ä½æŒ¤å…¥äº†inputï¼Œå…¶ä»–å‚æ•°éƒ½æ˜¯ä¾æ¬¡å‘åæ’å¼€çš„ï¼‰æ‰€ä»¥è¦è½¬åŒ–æŸä¸€ä¸ªç®—å­ï¼Œéœ€è¦åˆ°Pytorchå®˜ç½‘å»çœ‹çœ‹è¿™ä¸ªç®—å­çš„å‚æ•°è¡¨ï¼Œæ¯”å¦‚torch.nn.MaxPool3d åœ¨&amp;lt;torch2trt_root&amp;gt;/torch2trt/conveters/__init__.pyä¸­importæ–°å®šä¹‰çš„converter from .max_pool3d import * é‡æ–°å®‰è£…torch2trtï¼špython setup.py install å†æ¬¡å°è¯•è½¬åŒ–å«torch.nn.MaxPool3dçš„æ¨¡å‹ï¼ŒæŠ¥é”™æ¶ˆå¤±ï¼Œè½¬åŒ–åçš„æ¨¡å‹è¿è¡Œä¹Ÿæ­£å¸¸ï¼Œé—®é¢˜è§£å†³~ï¼Pytorch \\(\\rightarrow\\) ONNX \\(\\rightarrow\\) TensorRTå…¶ä»– ç«Ÿç„¶è¿˜å¯ä»¥ç”¨pipå®‰è£…tensorRT?! here" }, { "title": "pybind11ä½¿ç”¨", "url": "/posts/pybind11%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "pybind", "date": "2021-04-13 19:58:00 +0800", "snippet": "pybind11å®ç°pythonå’ŒC++ä¹‹é—´çš„æ•°æ®é€šä¿¡ã€‚è¿™æ˜¯æ–‡æ¡£ã€‚Pytorchçš„æ–‡æ¡£CUSTOM C++ AND CUDA EXTENSIONSä¹Ÿæåˆ°äº†å¦‚ä½•è¿›è¡Œç»‘å®šï¼Œç»“åˆèµ·æ¥ä¸€ä¸ªç®€å•çš„ç»‘å®šä¾‹å­æ˜¯æ–‡ä»¶ç»“æ„extend_demo/ setup.py op.cpp op_test.py# setup.pyfrom setuptools import setup, Extensionfrom torch.utils import cpp_extensionsetup(name=&#39;simpleOp&#39;, ext_modules=[cpp_extension.CppExtension(&#39;simpleOp&#39;, [&#39;op.cpp&#39;])], cmdclass={&#39;build_ext&#39;: cpp_extension.BuildExtension})// op.cpp#include &amp;lt;torch/extension.h&amp;gt;#include &amp;lt;iostream&amp;gt;int add(int x, int y){ return x + y;}PYBIND11_MODULE(TORCH_EXTENSION_NAME, m) { m.def(&quot;add&quot;, &amp;amp;add, &quot;add two number&quot;);}æ‰§è¡Œpython setup.py installï¼Œå¼€å§‹ç¼–è¯‘ã€‚ç¼–è¯‘æˆåŠŸåï¼Œçœ‹çœ‹conda listé‡Œæœ‰simpleOp 0.0.0 &amp;lt;pip&amp;gt;ç„¶åå°±å¯ä»¥åƒå¯¼å…¥ä¸€ä¸ªæ™®é€šçš„åŒ…æ¥è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„æ¨¡å—å•¦ï¼š# op_test.pyimport torch # torch should be imported first !import simpleOpa = 1b = 1c = simpleOp.add(a, b)print(a, b, c) # 1 1 2å‚è€ƒPytorchå­¦ä¹  (äºŒåä¸€) â€”â€”è‡ªå®šä¹‰C++/ATenæ‰©å±•" }, { "title": "C++ç§¯ç´¯", "url": "/posts/C++%E7%A7%AF%E7%B4%AF/", "categories": "ä¸“ä¸šç§¯ç´¯, ç¼–ç¨‹ç§¯ç´¯", "tags": "c++", "date": "2021-04-10 10:16:00 +0800", "snippet": "C++è®¡æ—¶å‚è€ƒ#include &amp;lt;iostream&amp;gt;#include &amp;lt;chrono&amp;gt; long fibonacci(unsigned n){ if (n &amp;lt; 2) return n; return fibonacci(n-1) + fibonacci(n-2);} int main(){ auto start = std::chrono::steady_clock::now(); std::cout &amp;lt;&amp;lt; &quot;f(42) = &quot; &amp;lt;&amp;lt; fibonacci(42) &amp;lt;&amp;lt; &#39;\\n&#39;; auto end = std::chrono::steady_clock::now(); std::chrono::duration&amp;lt;double&amp;gt; elapsed_seconds = end-start; std::cout &amp;lt;&amp;lt; &quot;elapsed time: &quot; &amp;lt;&amp;lt; elapsed_seconds.count() &amp;lt;&amp;lt; &quot;s\\n&quot;;}// output// f(42) = 267914296// elapsed time: 1.88232sC++è®¡æ—¶ä¹Ÿå¯ä½¿ç”¨clock_tï¼Œä½†æ˜¯å½“ä½¿ç”¨å¤šæ ¸å¤šçº¿ç¨‹æ—¶å¯èƒ½ä¼šè®¡æ—¶æœ‰è¾ƒå¤§åå·®ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡çœ‹èµ·æ¥æ¯”è¾ƒå¥½çš„C++æ—¥æœŸå’Œæ—¶é—´æ€»ç»“ã€‚C/C++å¤šæ–‡ä»¶å…±äº«å…¨å±€å˜é‡æ—¶ï¼Œä½¿ç”¨externçš„è§„èŒƒå‚è€ƒexternçš„ä½¿ç”¨è§„èŒƒï¼Œå†…å®¹å¦‚ä¸‹ï¼š1ã€åœ¨å®šä¹‰æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡, æ¯”å¦‚A.cppä¸­å®šä¹‰å…¨å±€å˜é‡ int a;2ã€åœ¨å¯¹åº”çš„å¤´æ–‡ä»¶A.hä¸­å£°æ˜å¤–éƒ¨å˜é‡extern int a;3ã€åœ¨å¼•ç”¨aå˜é‡çš„æ–‡ä»¶ä¸­# include &quot;A.h&quot;;lambdaè¡¨è¾¾å¼çŸ¥ä¹-Lambda è¡¨è¾¾å¼æœ‰ä½•ç”¨å¤„ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼ŸC++ 11 Lambdaè¡¨è¾¾å¼C++ lambdaè¡¨è¾¾å¼ä¸å‡½æ•°å¯¹è±¡C++ç±»å‹è½¬æ¢ï¼šstring -&amp;gt; charstd::string str(&quot;abc&quot;);fprintf(f, &quot;%s\\n&quot;, str.c_str());C++ å¤´æ–‡ä»¶ç†è§£ç†è§£ C++ ä¸­çš„å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶çš„ä½œç”¨C++ printfå‡½æ•°æ ¼å¼åŒ–è¾“å‡ºç¬¦å·è¯´æ˜å‚è€ƒ" }, { "title": "OpenCVå¸¸ç”¨ä»£ç æ®µ-Python", "url": "/posts/OpenCV%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%AE%B5-Python/", "categories": "ä¸“ä¸šç§¯ç´¯, æ‚è®°", "tags": "python, opencv", "date": "2021-03-23 10:35:00 +0800", "snippet": " NOTEï¼šopencvä¸­çš„ä½ç½®ç´¢å¼•éƒ½æ˜¯å…ˆxæ–¹å‘åyæ–¹å‘çš„ï¼Œæ¯”å¦‚ç»˜åˆ¶å‡½æ•°æ—¶ç‚¹çš„ä½ç½®è¡¨ç¤ºä¸ºï¼ˆx, yï¼‰, resizeä¸­æ–°å°ºå¯¸å¤§å°æŒ‡å®šæ ¼å¼ä¸ºï¼ˆwidth, heightï¼‰ç­‰ç­‰ã€‚è¿™ä¸ªå’Œnumpyä¸­å…ˆyæ–¹å‘åxæ–¹å‘ä¸åŒï¼Œè¦æ³¨æ„åŒºåˆ†ã€‚å›¾åƒè¯»å–ä¸ä¿å­˜å‚è€ƒï¼šGeeksforGeeks, CSDNimport cv2# è¯»å–img_path = &#39;&#39;img = cv2.imread(img_path) # BGR (default)# è·å–å°ºå¯¸ä¿¡æ¯height, width, channel = img.shape# ä¿å­˜cv2.imwrite(&#39;save_name.png&#39;, img)å€¼å¾—æ³¨æ„çš„æ˜¯cv2.imread(path, flag)å‡½æ•°åœ¨ä¸€äº›åœºæ™¯ä¸‹å¯èƒ½è¦æŒ‡å®šflagï¼Œå¯é€‰çš„flagæœ‰ cv2.IMREAD_COLORï¼šå½“åŠ è½½å½©è‰²å›¾ç‰‡æ—¶ã€‚è¿™æ˜¯é»˜è®¤å€¼ï¼Œç­‰ä»·çš„æ“ä½œä¸ºç›´æ¥ä¼ å…¥1ï¼› cv2.IMREAD_GRAYSCALEï¼šå½“åŠ è½½ç°åº¦å›¾æ—¶ã€‚ç­‰ä»·çš„æ“ä½œä¸ºç›´æ¥ä¼ å…¥0ï¼› è¯»å–ç°åº¦å›¾è‹¥ä¸æŒ‡å®šflagï¼Œåˆ™è¯»å–çš„ç°åº¦å›¾ä¹Ÿä¼šé»˜è®¤è½¬åŒ–ä¸º3é€šé“ï¼ cv2.IMREAD_UNCHANGEDï¼šæŒ‰ç…§åŸå›¾çš„æ ¼å¼è¯»å–ã€‚ç­‰ä»·çš„æ“ä½œä¸ºç›´æ¥ä¼ å…¥-1. æ¯”å¦‚è¦è¯»å–16ä½çš„.tiffæ•°æ®æ—¶ã€‚ å›¾åƒå˜å½¢å‚è€ƒ1 å‚è€ƒ2 å†…æ’æ–¹å¼æœ‰ä¸‰ç§ï¼šcv2.INTER_AREA, cv2.INTER_CUBICå’Œcv2.INTER_LINEAR(default)ã€‚ ç¼©å°å›¾ç‰‡æ—¶ï¼Œå†…æ’æ–¹å¼ä¸€èˆ¬ä½¿ç”¨cv2.INTER_AREAä¼šæœ€å¥½ï¼›æ”¾å¤§å›¾ç‰‡æ—¶ï¼Œä½¿ç”¨cv2.INTER_CUBICä¼šæ•ˆæœæœ€å¥½ï¼ˆä½†æ˜¯æ…¢ï¼‰ï¼Œä½¿ç”¨cv2.INTER_LINEARä¼šè¾ƒå¿«ï¼Œå¹¶ä¸”çœ‹èµ·æ¥è¿˜OK.æŒ‡å®šå°ºå¯¸resized = cv2.resize(img, dsize=(width, height), interpolation)æŒ‡å®šç¼©æ”¾æ¯”ä¾‹half = cv2.resize(image, (0, 0), fx=0.5, fy=0.5)å›¾åƒç»˜åˆ¶å‚è€ƒç”»æ¡†img = cv2.rectangle(img, (x1, y1), (x2, y2), color=(0, 0, 255), thickness=2)# img = cv2.rectangle(img, (int(x1), int(y1)), (int(x2), int(y2)), color=(0, 0, 255), thickness=2)# img = cv2.rectangle(img, (int(x), int(y)), (int(x+w), int(y+h)), color=(0, 0, 255), thickness=2)ç”»åœ†img = cv2.circle(img, center, radius, color, thickness)ç”»çº¿img = cv2.line(img, start_point, end_point, color, thickness)å†™æ–‡å­—img = cv2.putText(img, &#39;text&#39;, (50,150), cv2.FONT_HERSHEY_COMPLEX, 1, (0,0,255), 1)å„å‚æ•°ä¾æ¬¡æ˜¯ï¼šç…§ç‰‡/æ·»åŠ çš„æ–‡å­—/å·¦ä¸Šè§’åæ ‡/å­—ä½“/å­—ä½“å¤§å°/é¢œè‰²/å­—ä½“ç²—ç»†å…¶ä»–BGR =&amp;gt; RGBopencvè¯»å–çš„å›¾ç‰‡æ˜¯BGRæ ¼å¼çš„ï¼Œå¦‚æœéœ€è¦RGBæ ¼å¼ï¼ˆå¦‚numpyå¯è§†åŒ–ï¼‰çš„è¯ï¼Œè¦åšä¸€ä¸‹è½¬æ¢# way1img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)# way2image = image[:, :, ::-1]opencvè°ƒç”¨æ‘„åƒå¤´å‚è€ƒä¸Šdemo:import cv2# camera_addr = 0 # æœ¬æœºæ‘„åƒå¤´camera_addr = &#39;rtsp://username:password@ip&#39; # ç½‘ç»œæ‘„åƒå¤´cap = cv2.VideoCapture(camera_addr)assert cap.isOpened(), &#39;Failed to open %s&#39; % camera_addrw = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH))h = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT))fps = cap.get(cv2.CAP_PROP_FPS)print(&#39;success (%gx%g at %.2f fps).&#39; % (w, h, fps))while True: ret, frame = cap.read() cv2.imshow(&#39;Video&#39;, frame) cv2.waitKey(1)è¿™é‡Œæœ‰ä¸€ä¸ªopencvçš„å‚æ•°åˆ—è¡¨ï¼Œè·å–ä¸€æ®µè§†é¢‘çš„æ€»å¸§æ•°ä¸ºframes_num=cap.get(cv2.CAP_PROP_FRAME_COUNT)" }, { "title": "Pythonå¸¸ç”¨ä»£ç æ®µ", "url": "/posts/Python%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%AE%B5/", "categories": "ä¸“ä¸šç§¯ç´¯, æ‚è®°", "tags": "python", "date": "2021-03-23 10:34:00 +0800", "snippet": "åœ¨ç¨‹åºä¸­è¾“å‡ºä¸´æ—¶æ–‡ä»¶å¤§å°def print_size_of_model(model): torch.save(model.state_dict(), &quot;temp.p&quot;) print(&#39;Size (MB):&#39;, os.path.getsize(&quot;temp.p&quot;)/2**20) os.remove(&#39;temp.p&#39;)print_size_of_model(model)" }, { "title": "æ¨¡å‹å‹ç¼©å®æˆ˜", "url": "/posts/%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9%E5%AE%9E%E6%88%98/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "å®è·µ", "date": "2021-03-16 09:08:00 +0800", "snippet": "666DZY666/micronet github repo Pytorch official Quantization intro çŸ¥ä¹ - Gemfield - PyTorchçš„é‡åŒ– A developer-friendly guide to model quantization with PyTorch FBGEMM - Blog PruningTensorflow officialè…¾è®¯ PocketFlowåŸºäºTensorflowå¼€å‘ï¼Œé›†æˆäº†å½“å‰ä¸»æµä¸è…¾è®¯AI Labè‡ªç ”çš„å¤šä¸ªæ¨¡å‹å‹ç¼©ä¸è®­ç»ƒç®—æ³•ï¼Œæ–¹ä¾¿å¿«é€Ÿåœ°éƒ¨ç½²åˆ°ç§»åŠ¨ç«¯äº§å“ä¸Šã€‚ github repo å¦‚ä½•çœ‹å¾…è…¾è®¯ AI Lab å¼€æºçš„ PocketFlowï¼Ÿ ä»£ç é£æ ¼ï¼Œæ–‡æ¡£ï¼Œç®—æ³•æ•°ç›®ã€‚çœ‹çŸ¥ä¹çš„è¯„è®ºå¥½åƒç°åœ¨è¿˜ä¸æ˜¯å¾ˆå¥½ç”¨ã€‚ Intel DistilleråŸºäº PyTorch çš„å¼€æºç¥ç»ç½‘ç»œå‹ç¼©æ¡†æ¶ï¼ŒDistiller æ˜¯ç”± Intel AI Lab ç»´æŠ¤çš„åŸºäº PyTorch çš„å¼€æºç¥ç»ç½‘ç»œå‹ç¼©æ¡†æ¶ã€‚ä¸»è¦åŒ…æ‹¬ï¼š ç”¨äºé›†æˆå‰ªæï¼Œæ­£åˆ™åŒ–å’Œé‡åŒ–ç®—æ³•çš„æ¡†æ¶ã€‚ ä¸€å¥—ç”¨äºåˆ†æå’Œè¯„ä¼°å‹ç¼©æ€§èƒ½çš„å·¥å…·ã€‚ ç°æœ‰æŠ€æœ¯å‹ç¼©ç®—æ³•çš„ç¤ºä¾‹å®ç°ã€‚ github repo Distiller æ¨¡å‹å‰ªææ•™ç¨‹ CSDN-Distiller:ç¥ç»ç½‘ç»œå‹ç¼©ç ”ç©¶æ¡†æ¶ç™¾åº¦PaddleSlimPaddlePaddleå®ç°äº†ç›®å‰ä¸»æµçš„ç½‘ç»œé‡åŒ–ã€å‰ªæã€è’¸é¦ä¸‰ç§å‹ç¼©ç­–ç•¥ï¼Œå¹¶å¯å¿«é€Ÿé…ç½®å¤šç§å‹ç¼©ç­–ç•¥ç»„åˆä½¿ç”¨ã€‚é’ˆå¯¹ä½“ç§¯å·²ç»å¾ˆå°çš„ MobileNet æ¨¡å‹ï¼Œåœ¨æ¨¡å‹æ•ˆæœä¸æŸå¤±çš„å‰æä¸‹å®ç° 70% ä»¥ä¸Šçš„ä½“ç§¯å‹ç¼©ã€‚ github repo ç²¾åº¦æ— æŸï¼Œä½“ç§¯å‹ç¼©70%ä»¥ä¸Šï¼Œç™¾åº¦PaddleSlimä¸ºä½ çš„æ¨¡å‹ç˜¦èº« æ·±åº¦å­¦ä¹ -æ¨¡å‹å‹ç¼©-PaddleSlim å¾®è½¯NNIgithub repoè‡ªåŠ¨æœºå™¨å­¦ä¹ (AutoML)å·¥å…·å’Œæ¡†æ¶ï¼Œå…¶ä¸­é›†æˆäº†å¤šç§æ¨¡å‹å‹ç¼©ç®—æ³•ï¼Œå¹¶æ”¯æŒPyTorchï¼ŒTensorFlowï¼ŒMXNetï¼ŒCaffe2ç­‰å¤šä¸ªå¼€æºæ¡†æ¶ã€‚ä¸è¿‡é‡ç‚¹ä¸æ˜¯æ¨¡å‹å‹ç¼©ã€‚ä¸Šæ–°äº†ï¼ŒNNIï¼å¾®è½¯å¼€æºè‡ªåŠ¨æœºå™¨å­¦ä¹ å·¥å…·NNIæ¦‚è§ˆåŠæ–°åŠŸèƒ½è¯¦è§£TensorRTï¼ˆæ¨ç†ï¼‰ä¸€ä¸ªé«˜æ€§èƒ½çš„æ·±åº¦å­¦ä¹ æ¨ç†ï¼ˆInferenceï¼‰ä¼˜åŒ–å™¨ï¼Œå¯ä»¥ä¸ºæ·±åº¦å­¦ä¹ åº”ç”¨æä¾›ä½å»¶è¿Ÿã€é«˜ååç‡çš„éƒ¨ç½²æ¨ç†ã€‚ TensorRT(1)-ä»‹ç»-ä½¿ç”¨-å®‰è£… å¦‚ä½•ä½¿ç”¨TensorRTå¯¹è®­ç»ƒå¥½çš„PyTorchæ¨¡å‹è¿›è¡ŒåŠ é€Ÿ? - ä¼¯æ©legacyçš„æ–‡ç«  - çŸ¥ä¹è…¾è®¯NCNNï¼ˆæ¨ç†ï¼‰çº¯ C++ å®ç°ï¼Œè·¨å¹³å°ï¼Œæ”¯æŒ android iosncnn æ˜¯ä¸€ä¸ªä¸ºæ‰‹æœºç«¯æè‡´ä¼˜åŒ–çš„é«˜æ€§èƒ½ç¥ç»ç½‘ç»œå‰å‘è®¡ç®—æ¡†æ¶ã€‚ncnn ä»è®¾è®¡ä¹‹åˆæ·±åˆ»è€ƒè™‘æ‰‹æœºç«¯çš„éƒ¨ç½²å’Œä½¿ç”¨ã€‚æ‰‹æœºç«¯ cpu çš„é€Ÿåº¦å¿«äºç›®å‰æ‰€æœ‰å·²çŸ¥çš„å¼€æºæ¡†æ¶ã€‚æ³¨ï¼šåªåŒ…å«å‰å‘è®¡ç®—ï¼Œå› æ­¤æ— æ³•è¿›è¡Œè®­ç»ƒï¼Œéœ€è¦å¯¼å…¥å…¶ä»–æ¡†æ¶è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°ã€‚ github repo ç§»åŠ¨ç«¯æœºå™¨å­¦ä¹ æ¡†æ¶ncnnç®€ä»‹ä¸å®è·µ pytorchæ¨¡å‹çš„éƒ¨ç½²ï¼ˆç³»åˆ—ä¸€ï¼‰â€“ncnnçš„ç¼–è¯‘å’Œä½¿ç”¨ - limzeroçš„æ–‡ç«  - çŸ¥ä¹ https://zhuanlan.zhihu.com/p/137458205 nihui-è§†é¢‘-è°ˆè°ˆncnnçš„è®¾è®¡ç†å¿µå’Œè½¯ä»¶å·¥ç¨‹ https://github.com/zchrissirhcz/awesome-ncnn ğŸ˜ A Collection of Awesome NCNN-based Projects çŸ¥ä¹ä¸“æ -ncnnåˆæ¢ å…³æ³¨nihuiå¤§ä½¬çŸ¥ä¹ä¸è¿·è·¯ :star: å¦‚ä½•é˜…è¯»ä¸€ä¸ªå‰å‘æ¨ç†æ¡†æ¶ï¼Ÿä»¥ NCNN ä¸ºä¾‹ã€‚è…¾è®¯TNN github repo" }, { "title": "ResNetæºç é˜…è¯»", "url": "/posts/ResNet%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/", "categories": "ä¸“ä¸šç§¯ç´¯, æ‚è®°", "tags": "æºç ", "date": "2021-03-11 21:42:00 +0800", "snippet": "æœ¬æ–‡å¯¹ResNetæºç (Pytorch)è¿›è¡Œè§£è¯»ã€‚è®¸å¤šç½‘ç»œç»“æ„çš„æ”¹è¿›æ˜¯åœ¨å…¶åŸºç¡€ä¸Šåšçš„ï¼Œå› æ­¤æœ‰å¿…è¦ä»”ç»†ç†è§£ä¸‹ã€‚ æ³¨ï¼šä¸ºäº†å¢å¼ºä»£ç çš„æ˜“è¯»æ€§ï¼Œæœ¬æ–‡æ‰€å±•ç¤ºçš„ä»£ç åŸºäº2021å¹´3æœˆ11æ—¥çš„torchvisionä»£ç åˆ å‡å¾—åˆ°çš„ï¼Œå› æ­¤å’Œæºç å¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œéœ€è¦çš„è¯»è€…å¯ä»¥å‰å¾€æŸ¥çœ‹torchvisionçš„ResNetæºç ã€‚é¦–å…ˆå®šä¹‰äº†é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½åœ°å€ï¼Œå°è£…äº†3x3å’Œ1x1çš„å·ç§¯æ ¸model_urls = { &#39;resnet18&#39;: &#39;https://download.pytorch.org/models/resnet18-5c106cde.pth&#39;, ... &#39;resnext50_32x4d&#39;: &#39;https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth&#39;, ... &#39;wide_resnet50_2&#39;: &#39;https://download.pytorch.org/models/wide_resnet50_2-95faca4d.pth&#39;, ...}# basic 3x3 conv wrapperdef conv3x3(in_planes: int, out_planes: int, stride: int = 1, groups: int = 1, dilation: int = 1) -&amp;gt; nn.Conv2d: &quot;&quot;&quot;3x3 convolution with padding&quot;&quot;&quot; return nn.Conv2d(in_planes, out_planes, kernel_size=3, stride=stride, padding=dilation, groups=groups, bias=False, dilation=dilation)# basic 1x1 conv wrapperdef conv1x1(in_planes: int, out_planes: int, stride: int = 1) -&amp;gt; nn.Conv2d: &quot;&quot;&quot;1x1 convolution&quot;&quot;&quot; return nn.Conv2d(in_planes, out_planes, kernel_size=1, stride=stride, bias=False)æ¥ä¸‹æ¥æ­£å¼å¼€å§‹ç½‘ç»œçš„å®šä¹‰ã€‚ä¸¤ç§åŸºæœ¬æ¨¡å—ResNetä¸»è¦æ˜¯ç”±ä¸¤ç§åŸºæœ¬æ¨¡å—å †å è€Œæˆçš„ï¼šBasicBlockå’ŒBottleNeckï¼Œæ¨¡å—ç»“æ„å®šä¹‰å¦‚ä¸‹# Naive residual block for Renset18/34class BasicBlock(nn.Module): expansion = 1 def __init__( self, inplanes, planes, stride=1, downsample=None, ): super(BasicBlock, self).__init__() # Both self.conv1 and self.downsample layers downsample the input when stride != 1 self.conv1 = conv3x3(inplanes, planes, stride) self.bn1 = nn.BatchNorm2d(planes) self.relu = nn.ReLU(inplace=True) self.conv2 = conv3x3(planes, planes) self.bn2 = nn.BatchNorm2d(planes) self.downsample = downsample self.stride = stride def forward(self, x): identity = x # Conv + BatchNorm + RelU out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) if self.downsample is not None: identity = self.downsample(x) out += identity out = self.relu(out) return out# BottleNeck Residual block for Renset50/101/152class Bottleneck(nn.Module): # Bottleneck in torchvision places the stride for downsampling at 3x3 convolution(self.conv2) # while original implementation places the stride at the first 1x1 convolution(self.conv1) # according to &quot;Deep residual learning for image recognition&quot;https://arxiv.org/abs/1512.03385. # This variant is also known as ResNet V1.5 and improves accuracy according to # https://ngc.nvidia.com/catalog/model-scripts/nvidia:resnet_50_v1_5_for_pytorch. expansion = 4 def __init__( self, inplanes, planes, stride=1, downsample=None ): super(Bottleneck, self).__init__() # Both self.conv2 and self.downsample layers downsample the input when stride != 1 self.conv1 = conv1x1(inplanes, planes) self.bn1 = nn.BatchNorm2d(planes) self.conv2 = conv3x3(planes, planes, stride) self.bn2 = nn.BatchNorm2d(planes) self.conv3 = conv1x1(planes, planes * self.expansion) self.bn3 = nn.BatchNorm2d(planes * self.expansion) self.relu = nn.ReLU(inplace=True) self.downsample = downsample self.stride = stride def forward(self, x): identity = x out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) out = self.relu(out) out = self.conv3(out) out = self.bn3(out) if self.downsample is not None: identity = self.downsample(x) out += identity out = self.relu(out) return out ä¸¤ä¸ªæ¨¡å—çš„å®ç°å‡æ¯”è¾ƒç›´ç™½ï¼Œç”»å‡ºç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å›¾1 å·¦ï¼šBasicBlock, å³ï¼šBottleNeck. é€”ä¸­æ ‡é»„ä»£è¡¨ç‰¹å¾å›¾ç»´åº¦æ•°å¯ä»¥æ€»ç»“ä¸ºï¼Œä¸¤ä¸ªblockç±»å‹éƒ½æ˜¯è¾“å…¥ä¸€ä¸ªinplanesç»´çš„ç‰¹å¾å›¾ï¼Œè¾“å‡ºä¸€ä¸ªplanes*block.expansionç»´çš„ç‰¹å¾å›¾ï¼ˆæ³¨æ„è€Œä¸æ˜¯planesã€‚BasicBlockçš„expansion=1ï¼‰ã€‚downsampleæ“ä½œæ˜¯ä¸ºäº†å¯¹shortcutæ”¯è·¯è¿›è¡Œå¤§å°æˆ–ç»´åº¦ä¸Šçš„è°ƒæ•´ï¼Œä»¥ä½¿å¾—è¯¥è·¯è¾“å‡ºä¸residualè·¯æ”¯è·¯è¾“å‡ºä¿æŒç»´åº¦ä¸€è‡´ï¼Œä»¥æ‰§è¡Œç›¸åŠ æ“ä½œã€‚downsampleçš„å…·ä½“å®šä¹‰ä¼šåœ¨ä¸‹æ–‡æ„å»ºæ•´ä¸ªResNetç½‘ç»œæ—¶æåˆ°ã€‚ResNetç½‘ç»œæ•´ä½“ç»“æ„class ResNet(nn.Module): def __init__( self, block, layers, num_classes=1000, zero_init_residual=False ): super(ResNet, self).__init__() self.inplanes = 64 self.conv1 = nn.Conv2d(3, self.inplanes, kernel_size=7, stride=2, padding=3, bias=False) self.bn1 = nn.BatchNorm2d(self.inplanes) self.relu = nn.ReLU(inplace=True) self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1) self.layer1 = self._make_layer(block, 64, layers[0]) self.layer2 = self._make_layer(block, 128, layers[1], stride=2) self.layer3 = self._make_layer(block, 256, layers[2], stride=2) self.layer4 = self._make_layer(block, 512, layers[3], stride=2) self.avgpool = nn.AdaptiveAvgPool2d((1, 1)) self.fc = nn.Linear(512 * block.expansion, num_classes) for m in self.modules(): if isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode=&#39;fan_out&#39;, nonlinearity=&#39;relu&#39;) elif isinstance(m, (nn.BatchNorm2d)): nn.init.constant_(m.weight, 1) nn.init.constant_(m.bias, 0) # Zero-initialize the last BN in each residual branch, # so that the residual branch starts with zeros, and each residual block behaves like an identity. # This improves the model by 0.2~0.3% according to https://arxiv.org/abs/1706.02677 if zero_init_residual: for m in self.modules(): if isinstance(m, Bottleneck): nn.init.constant_(m.bn3.weight, 0) # type: ignore[arg-type] elif isinstance(m, BasicBlock): nn.init.constant_(m.bn2.weight, 0) # type: ignore[arg-type] # construct layer/stage conv2_x,conv3_x,conv4_x,conv5_x def _make_layer(self, block, planes, blocks, stride=1): downsample = None # when need to downsample if stride != 1 or self.inplanes != planes * block.expansion: downsample = nn.Sequential( conv1x1(self.inplanes, planes * block.expansion, stride), nn.BatchNorm2d(planes * block.expansion), ) layers = [] layers.append(block(self.inplanes, planes, stride, downsample)) # inplanes are expanded / self.inplanes is freshed for next block self.inplanes = planes * block.expansion for _ in range(1, blocks): layers.append(block(self.inplanes, planes)) return nn.Sequential(*layers) def forward(self, x): x = self.conv1(x) x = self.bn1(x) x = self.relu(x) x = self.maxpool(x) x = self.layer1(x) x = self.layer2(x) x = self.layer3(x) x = self.layer4(x) x = self.avgpool(x) # For `torch.flatten`, this blog may help: https://blog.csdn.net/GhostintheCode/article/details/102530451 # so `x = torch.flatten(x, 1)` is equivalent to `x = x.view(x.size(0), -1)` in the previous versions, where `x.size(0)` is the batch_size x = torch.flatten(x, 1) x = self.fc(x) return xå¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆä¸€ä¸ª7 x 7çš„å·ç§¯ä½œç”¨åœ¨è¾“å…¥çš„3ç»´å›¾ç‰‡ä¸Šï¼Œå¹¶è¾“å…¥ä¸€ä¸ª64ç»´çš„ç‰¹å¾å›¾ï¼ˆ64ä¹Ÿå°±ä¸ºself.inplanesçš„åˆå§‹å€¼ï¼‰ï¼Œé€šè¿‡BatchNormå±‚ï¼ŒReLUå±‚ï¼ŒMaxPoolå±‚ï¼›ç„¶åç»è¿‡4å±‚layerï¼Œè¿™4å±‚layeré€šè¿‡_make_layer()å‡½æ•°æ„å»ºï¼Œæ˜¯ä¸Šè¿°ä¸¤ç§æ¨¡å—çš„å †å ï¼Œä¸‹æ–‡å°†è¯¦ç»†ä»‹ç»ï¼›æœ€åç»è¿‡ä¸€ä¸ªAveragePoolingå±‚ï¼Œå†ç»è¿‡ä¸€ä¸ªfcå±‚å¾—åˆ°åˆ†ç±»è¾“å‡ºã€‚å¦å¤–åœ¨ç½‘ç»œæ­å»ºèµ·æ¥åï¼Œè¿˜å¯¹æ¨¡å‹çš„å‚æ•°(Conv2dã€BatchNorm2dã€last BN)è¿›è¡Œäº†åˆå§‹åŒ–ã€‚_make_layer()å‡½æ•°æ˜¯ç†è§£ç½‘ç»œç»“æ„çš„å…³é”®ã€‚å•ç‹¬æ‹å‡ºæ¥çœ‹ä¸€ä¸‹ï¼šdef _make_layer(self, block, planes, blocks, stride=1): downsample = None if stride != 1 or self.inplanes != planes * block.expansion: downsample = nn.Sequential( conv1x1(self.inplanes, planes * block.expansion, stride), nn.BatchNorm2d(planes * block.expansion), ) layers = [] layers.append(block(self.inplanes, planes, stride, downsample)) self.inplanes = planes * block.expansion for _ in range(1, blocks): layers.append(block(self.inplanes, planes)) return nn.Sequential(*layers)ä¸€ä¸ª_make_layer()æ„å»ºä¸€ä¸ªlayerå±‚ï¼Œæ¯ä¸€ä¸ªlayerå±‚æ˜¯ä¸Šè¿°ä¸¤ç§æ¨¡å—çš„å †å ã€‚è¾“å…¥å‚æ•°ä¸­blockä»£è¡¨è¯¥layerå †å æ¨¡å—çš„ç±»å‹ï¼Œå¯é€‰BasicBlockæˆ–è€…BottleNeckï¼›blocksä»£è¡¨è¯¥layerä¸­å †å çš„blockçš„æ•°ç›®ï¼›planesä¸è¯¥layeræœ€ç»ˆè¾“å‡ºçš„ç»´åº¦æ•°æœ‰å…³ï¼Œæ³¨æ„æœ€ç»ˆè¾“å‡ºçš„ç»´åº¦æ•°=planes * block.expansion.é¦–å…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦downsampleæ“ä½œã€‚å¦‚å‰æ‰€è¿°ï¼Œdownsampleæ“ä½œæ˜¯ä¸ºäº†å¯¹shortcutæ”¯è·¯è¿›è¡Œå¤§å°æˆ–ç»´åº¦ä¸Šçš„è°ƒæ•´ï¼Œä»¥ä½¿å¾—è¯¥è·¯è¾“å‡ºä¸residualæ”¯è·¯è¾“å‡ºä¿æŒä¸€è‡´ï¼Œä¿è¯å¯ä»¥æ‰§è¡Œç›¸åŠ æ“ä½œã€‚å› æ­¤æœ‰ä¸¤ç§æƒ…å†µéœ€è¦å¯¹blockçš„shortcutæ”¯è·¯æ‰§è¡Œdownsampleæ“ä½œï¼š stride != 1ï¼šéœ€è¦å¯¹shortcutæ”¯è·¯ç‰¹å¾å›¾è¿›è¡Œå¤§å°ä¸Šçš„è°ƒæ•´ã€‚åœ¨æ•´ä¸ªä»£ç»“æ„ä¸­ï¼Œå·ç§¯çš„strideå€¼éƒ½æ˜¯é»˜è®¤ä¸º1çš„ï¼Œåœ¨åŒæ ·é»˜è®¤ä¸º1çš„paddingä½œç”¨ä¸‹ï¼Œå¾—åˆ°çš„ç‰¹å¾å›¾å¤§å°å°†ä¿æŒä¸å˜ã€‚ä½†å¯ä»¥çœ‹åˆ°ï¼Œlayer2ï¼Œlayer3ï¼Œlayer4åœ¨æ„å»ºæ—¶ï¼ŒæŒ‡å®šäº†strideä¸º2ï¼ˆåªå¯¹è¯¥layerçš„ç¬¬ä¸€ä¸ªblockç”Ÿæ•ˆï¼‰ï¼Œè¿™å°†ä½¿å¾—residualæ”¯è·¯çš„è¾“å‡ºç‰¹å¾å›¾åœ¨å¤§å°ä¸Šå°äºshortcutæ”¯è·¯ï¼Œå› æ­¤éœ€è¦å¯¹shortcutæ”¯è·¯å¢åŠ ä¸€ä¸ªdownsampleæ”¯è·¯ï¼Œä¹Ÿåšä¸€ä¸‹stride=2çš„å·ç§¯ï¼Œä¿è¯ä¸¤æ”¯è·¯è¾“å‡ºå¤§å°ä¸€è‡´ï¼Œå³ conv1x1(self.inplanes, planes * block.expansion, [stride=2]) self.inplanes != planes * block.expansionï¼šéœ€è¦å¯¹shortcutæ”¯è·¯ç‰¹å¾å›¾è¿›è¡Œç»´åº¦æ•°ç›®ä¸Šçš„è°ƒæ•´ã€‚shortcutæ”¯è·¯çš„è¾“å‡ºç»´åº¦ä¸ºå³ä¸ºè¾“å…¥ç»´åº¦self.inplanesï¼Œè€Œresidualæ”¯è·¯çš„è¾“å‡ºç»´åº¦ä¸ºplane * block.expansionï¼ŒäºŒè€…å¯èƒ½ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯self.inplanes != planes * block.expansionï¼Œå½“è¯¥æƒ…å†µå‘ç”Ÿï¼Œå¯¹shortcutæ”¯è·¯è¾“å‡ºè¿›è¡Œç»´åº¦ä¸Šçš„è°ƒæ•´ï¼Œä»self.inplanesè°ƒæ•´è‡³planes * block.expansionï¼Œå³ conv1x1(self.inplanes, [planes * block.expansion], stride) å½“ä¸€ä¸ªlayeråŒ…å«å¤šä¸ªblockæ—¶ï¼Œæ˜¯é€šè¿‡å‘layersåˆ—è¡¨ä¸­ä¾æ¬¡åŠ å…¥æ¯ä¸ªblockï¼Œæ¥å®ç°blockçš„å †å çš„ã€‚ç¬¬ä¸€ä¸ªblockéœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œè¯¥blockä¾æ®ä¼ å…¥çš„self.inplanes, planesä»¥åŠstrideåˆ¤æ–­ï¼Œå¯èƒ½å«æœ‰downsampleæ”¯è·¯ï¼›è¿™ä¸ªblockçš„è¾“å‡ºç»´åº¦æ˜¯planes*block.expansionã€‚ç´§æ¥ç€ä¾¿æŠŠself.inplanesæ›´æ–°ä¸ºæ­¤å€¼ä½œä¸ºåç»­blockçš„è¾“å…¥ç»´åº¦ã€‚åé¢çš„blockçš„strideä¸ºé»˜è®¤å€¼1ï¼ŒåŒæ—¶ï¼Œç”±äºè¾“å…¥ä¸ºself.inplanesï¼Œè¾“å‡ºä¸ºplanes*block.expansionï¼Œè€Œself.inplanes = planes * block.expansionï¼Œå› æ­¤ä¸ä¼šå‡ºç°ç‰¹å¾å›¾å¤§å°æˆ–è€…å°ºå¯¸ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¸å¯èƒ½å‡ºç°downsampleæ“ä½œï¼Œå°±å¯ä»¥æ”¾å¿ƒforå¾ªç¯åŠ è¿›åˆ—è¡¨å•¦ã€‚ResNetå®ä¾‹åŒ–def resnet18(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-18 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(BasicBlock, [2, 2, 2, 2], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet18&#39;])) return modeldef resnet34(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-34 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(BasicBlock, [3, 4, 6, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet34&#39;])) return modeldef resnet50(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-50 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 4, 6, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet50&#39;])) return modeldef resnet101(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-101 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 4, 23, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet101&#39;])) return modeldef resnet152(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-152 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 8, 36, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet152&#39;])) return modelé€šè¿‡æŒ‡å®šblockçš„ç±»åˆ«(å¦‚BasicBlock)ï¼Œå››ä¸ªlayerä¾æ¬¡å †å çš„blockæ•°ç›®(å¦‚[2, 2, 2, 2])ï¼Œä»¥åŠä¸€äº›å­—å…¸ç±»å‹å‚æ•°**kwargsï¼Œå°±å¯ä»¥å®ä¾‹åŒ–å‡ºä¸€ä¸ªResNetæ¨¡å‹å•¦ã€‚å®Œæ•´ä»£ç  éœ€è¦å†æ¬¡å¼ºè°ƒçš„æ˜¯ï¼Œæœ¬æ–‡æ‰€å±•ç¤ºçš„ä»£ç åŸºäº2021å¹´3æœˆ11æ—¥çš„torchvisionä»£ç åˆ å‡å¾—åˆ°çš„ï¼Œå› æ­¤å’Œæºç å¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œéœ€è¦çš„è¯»è€…å¯ä»¥å‰å¾€æŸ¥çœ‹torchvisionçš„ResNetæºç ã€‚import torchimport torch.nn as nnimport torch.utils.model_zoo as model_zoo__all__ = [&#39;ResNet&#39;, &#39;resnet18&#39;, &#39;resnet34&#39;, &#39;resnet50&#39;, &#39;resnet101&#39;, &#39;resnet152&#39;, &#39;resnext50_32x4d&#39;, &#39;resnext101_32x8d&#39;, &#39;wide_resnet50_2&#39;, &#39;wide_resnet101_2&#39;]model_urls = { &#39;resnet18&#39;: &#39;https://download.pytorch.org/models/resnet18-5c106cde.pth&#39;, &#39;resnet34&#39;: &#39;https://download.pytorch.org/models/resnet34-333f7ec4.pth&#39;, &#39;resnet50&#39;: &#39;https://download.pytorch.org/models/resnet50-19c8e357.pth&#39;, &#39;resnet101&#39;: &#39;https://download.pytorch.org/models/resnet101-5d3b4d8f.pth&#39;, &#39;resnet152&#39;: &#39;https://download.pytorch.org/models/resnet152-b121ed2d.pth&#39;, &#39;resnext50_32x4d&#39;: &#39;https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth&#39;, &#39;resnext101_32x8d&#39;: &#39;https://download.pytorch.org/models/resnext101_32x8d-8ba56ff5.pth&#39;, &#39;wide_resnet50_2&#39;: &#39;https://download.pytorch.org/models/wide_resnet50_2-95faca4d.pth&#39;, &#39;wide_resnet101_2&#39;: &#39;https://download.pytorch.org/models/wide_resnet101_2-32ee1156.pth&#39;,}def conv3x3(in_planes: int, out_planes: int, stride: int = 1, groups: int = 1, dilation: int = 1) -&amp;gt; nn.Conv2d: &quot;&quot;&quot;3x3 convolution with padding&quot;&quot;&quot; return nn.Conv2d(in_planes, out_planes, kernel_size=3, stride=stride, padding=dilation, groups=groups, bias=False, dilation=dilation)def conv1x1(in_planes: int, out_planes: int, stride: int = 1) -&amp;gt; nn.Conv2d: &quot;&quot;&quot;1x1 convolution&quot;&quot;&quot; return nn.Conv2d(in_planes, out_planes, kernel_size=1, stride=stride, bias=False)class BasicBlock(nn.Module): expansion = 1 def __init__( self, inplanes, planes, stride=1, downsample=None, ): super(BasicBlock, self).__init__() # Both self.conv1 and self.downsample layers downsample the input when stride != 1 self.conv1 = conv3x3(inplanes, planes, stride) self.bn1 = nn.BatchNorm2d(planes) self.relu = nn.ReLU(inplace=True) self.conv2 = conv3x3(planes, planes) self.bn2 = nn.BatchNorm2d(planes) self.downsample = downsample self.stride = stride def forward(self, x): identity = x out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) if self.downsample is not None: identity = self.downsample(x) out += identity out = self.relu(out) return outclass Bottleneck(nn.Module): # Bottleneck in torchvision places the stride for downsampling at 3x3 convolution(self.conv2) # while original implementation places the stride at the first 1x1 convolution(self.conv1) # according to &quot;Deep residual learning for image recognition&quot;https://arxiv.org/abs/1512.03385. # This variant is also known as ResNet V1.5 and improves accuracy according to # https://ngc.nvidia.com/catalog/model-scripts/nvidia:resnet_50_v1_5_for_pytorch. expansion = 4 def __init__( self, inplanes, planes, stride=1, downsample=None ): super(Bottleneck, self).__init__() # Both self.conv2 and self.downsample layers downsample the input when stride != 1 self.conv1 = conv1x1(inplanes, planes) self.bn1 = nn.BatchNorm2d(planes) self.conv2 = conv3x3(planes, planes, stride) self.bn2 = nn.BatchNorm2d(planes) self.conv3 = conv1x1(planes, planes * self.expansion) self.bn3 = nn.BatchNorm2d(planes * self.expansion) self.relu = nn.ReLU(inplace=True) self.downsample = downsample self.stride = stride def forward(self, x): identity = x out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) out = self.relu(out) out = self.conv3(out) out = self.bn3(out) if self.downsample is not None: identity = self.downsample(x) out += identity out = self.relu(out) return outclass ResNet(nn.Module): def __init__( self, block, layers, num_classes=1000, zero_init_residual: bool = False ): super(ResNet, self).__init__() self.inplanes = 64 self.conv1 = nn.Conv2d(3, self.inplanes, kernel_size=7, stride=2, padding=3, bias=False) self.bn1 = nn.BatchNorm2d(self.inplanes) self.relu = nn.ReLU(inplace=True) self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1) self.layer1 = self._make_layer(block, 64, layers[0]) self.layer2 = self._make_layer(block, 128, layers[1], stride=2) self.layer3 = self._make_layer(block, 256, layers[2], stride=2) self.layer4 = self._make_layer(block, 512, layers[3], stride=2) self.avgpool = nn.AdaptiveAvgPool2d((1, 1)) self.fc = nn.Linear(512 * block.expansion, num_classes) for m in self.modules(): if isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode=&#39;fan_out&#39;, nonlinearity=&#39;relu&#39;) elif isinstance(m, (nn.BatchNorm2d)): nn.init.constant_(m.weight, 1) nn.init.constant_(m.bias, 0) # Zero-initialize the last BN in each residual branch, # so that the residual branch starts with zeros, and each residual block behaves like an identity. # This improves the model by 0.2~0.3% according to https://arxiv.org/abs/1706.02677 if zero_init_residual: for m in self.modules(): if isinstance(m, Bottleneck): nn.init.constant_(m.bn3.weight, 0) # type: ignore[arg-type] elif isinstance(m, BasicBlock): nn.init.constant_(m.bn2.weight, 0) # type: ignore[arg-type] def _make_layer(self, block, planes, blocks, stride=1): downsample = None if stride != 1 or self.inplanes != planes * block.expansion: downsample = nn.Sequential( conv1x1(self.inplanes, planes * block.expansion, stride), nn.BatchNorm2d(planes * block.expansion), ) layers = [] layers.append(block(self.inplanes, planes, stride, downsample)) self.inplanes = planes * block.expansion for _ in range(1, blocks): layers.append(block(self.inplanes, planes)) return nn.Sequential(*layers) def forward(self, x): x = self.conv1(x) x = self.bn1(x) x = self.relu(x) x = self.maxpool(x) x = self.layer1(x) x = self.layer2(x) x = self.layer3(x) x = self.layer4(x) x = self.avgpool(x) # For `torch.flatten`, this blog may help: https://blog.csdn.net/GhostintheCode/article/details/102530451 # so `x = torch.flatten(x, 1)` is equivalent to `x = x.view(x.size(0), -1)` in the previous versions, where `x.size(0)` is the batch_size x = torch.flatten(x, 1) x = self.fc(x) return xdef resnet18(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-18 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(BasicBlock, [2, 2, 2, 2], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet18&#39;])) return modeldef resnet34(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-34 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(BasicBlock, [3, 4, 6, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet34&#39;])) return modeldef resnet50(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-50 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 4, 6, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet50&#39;])) return modeldef resnet101(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-101 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 4, 23, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet101&#39;])) return modeldef resnet152(pretrained=False, **kwargs): &quot;&quot;&quot;Constructs a ResNet-152 model. Args: pretrained (bool): If True, returns a model pre-trained on ImageNet &quot;&quot;&quot; model = ResNet(Bottleneck, [3, 8, 36, 3], **kwargs) if pretrained: model.load_state_dict(model_zoo.load_url(model_urls[&#39;resnet152&#39;])) return modelif __name__ == &#39;__main__&#39;: model = resnet18() print(model)å‚è€ƒResNet Pytorchå®˜æ–¹å®ç°æºç è§£æ" }, { "title": "visdomä½¿ç”¨", "url": "/posts/Visdom%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "pytorch, visdom", "date": "2021-03-06 11:42:00 +0800", "snippet": "å®˜æ–¹github repoé¦–å…ˆåœ¨æœåŠ¡å™¨ç«¯å®‰è£…visdompip install visdomä½¿ç”¨æµç¨‹ç®€è¿° æœåŠ¡å™¨ç«¯å¯åŠ¨visdomï¼ˆå»ºè®®åœ¨screenä¸‹è¿›è¡Œï¼‰ visdom # equivalent to running python -m visdom.server. å½“ä½¿ç”¨VS codeæ—¶ï¼Œåœ¨ç»ˆç«¯çª—å£portæ å³å¯çœ‹åˆ°8097çš„portï¼Œç‚¹å‡»Open in Browserå³å¯æ‰“å¼€æµè§ˆå™¨æ˜¾ç¤ºvisdomç•Œé¢ã€‚ å¦‚æœä¸æ˜¯ä½¿ç”¨VS codeæˆ–è€…ç™»å…¥http://localhost:8097/æ²¡æ³•æ˜¾ç¤ºåˆ°visdomç•Œé¢ï¼Œå¯å°è¯•åšå¥½ç«¯å£æ˜ å°„ã€‚åœ¨æœ¬æœºæ‰§è¡Œ ssh -C -f -N -g -L 8097:localhost:8097 -p &amp;lt;your_server_port&amp;gt; &amp;lt;user_name&amp;gt;@&amp;lt;ip&amp;gt; é»˜è®¤ç«¯å£ä¸º8097ï¼Œè‹¥éœ€è¦æŒ‡å®šç«¯å£ï¼Œå¯æ‰§è¡Œvisdom -port &amp;lt;new_port&amp;gt; æœåŠ¡å™¨ç«¯è¿è¡Œä»£ç  # filename: vis_exp.py# This is a toy example import visdomviz = visdom.Visdom(env=&#39;&amp;lt;your_env_name&amp;gt;&#39;) iter_set = []loss_set = [] for iter in total_iter: loss = ... iter_set.append(iter) loss_set.append(loss) viz.line(X=iter_set, Y=loss_set, win=&#39;&amp;lt;your_win_name&amp;gt;&#39;) åœ¨æœåŠ¡å™¨ç«¯å·²å¯åŠ¨visdomåï¼ˆç¬¬1æ­¥ï¼‰ï¼Œè¿è¡Œè¯¥ç¨‹åºï¼š python vis_exp.py æœ¬æœºæµè§ˆå™¨ç™»å…¥localhost:8097ï¼Œå³å¯è§‚å¯Ÿåˆ°ä¸Šè¿°å®šä¹‰çš„æ›²çº¿ã€‚ Demoså®˜æ–¹githubç»™äº†ä¸€äº›demoï¼Œå¯å‚ç…§ï¼Œå¦å¯å‚è€ƒçŸ¥ä¹ã€‚ä»¥ä¸‹çºªå½•ä¸€äº›å¸¸ç”¨æ“ä½œï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨ã€‚ æŒ‡å®šwinä¸ºæŸä¸€åç§°ï¼Œåˆ™å¯åœ¨æ‰€åœ¨çª—å£è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸æ˜¯æ–°å»ºä¸€ä¸ªçª—å£ä½œå›¾ï¼Œå‚è§è¿™é‡Œç»˜åˆ¶æ›²çº¿ç»˜åˆ¶å•æ¡æ›²çº¿viz.line(X=x_vec, Y=y_vec, win=&#39;win_name&#39;, # åœ¨æ‰€åœ¨çª—å£è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸æ˜¯æ–°å»ºä¸€ä¸ªçª—å£ä½œå›¾ opts=dict(xlabel=&#39;xlabel&#39;, ylabel=&#39;ylabel&#39;,title=&#39;title&#39;))ç»˜åˆ¶å¤šæ¡æ›²çº¿å¹¶åŠ ä¸Šå›¾ä¾‹import numpy as npviz.line(X=np.column_stack((X_tensor_set_1, X_tensor_set_2)), Y=np.column_stack((Y_tensor_set_1, Y_tensor_set_2)), win=&#39;win_name&#39;, opts=dict(xlabel=&#39;xlabel&#39;, ylabel=&#39;ylabel&#39;,title=&#39;title&#39; legend=[&#39;legend1&#39;, &#39;legend2&#39;]) )æ–‡æœ¬æ¡†# append mannertextwindow = viz.text(&#39;Hello World! More text should be here&#39;)viz.text(&#39;And here it is&#39;, win=textwindow, append=True)# not append mannerviz.text(&amp;lt;your_text&amp;gt;, win=&#39;&amp;lt;your_win_name&amp;gt;&#39;)å›¾ç‰‡# æ³¨æ„è¿™é‡Œä¼ å…¥çš„å›¾ç‰‡åº”ä¸ºCHWæ ¼å¼çš„# å•å¼ viz.image( np.random.rand(3, 512, 256), opts=dict(title=&#39;Random!&#39;, caption=&#39;How random.&#39;),)# å¤šå¼ viz.images( np.random.randn(20, 3, 64, 64), opts=dict(title=&#39;Random images&#39;, caption=&#39;How random.&#39;))å…¶ä»–å…³é—­çª—å£å‚è€ƒ# é€šè¿‡æŒ‡å®šwinæ¥å…³é—­å¯¹åº”çª—å£ã€‚å½“winä¸ºNoneæ—¶ï¼Œå…³é—­å½“å‰ç¯å¢ƒä¸‹æ‰€æœ‰çª—å£vis.close(win=None)ä¿å­˜å’Œæœ¬åœ°åŠ è½½visdomå®éªŒç»“æœThis github repo theevann/visdom-save helps." }, { "title": "æ¨¡å‹å‹ç¼©è‡ªå·±çš„æ€»ç»“", "url": "/posts/%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%80%BB%E7%BB%93/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "", "date": "2021-03-03 08:45:00 +0800", "snippet": "å…³äºSTE(straight through estimator)ä»¥äºŒå€¼ç½‘ç»œä¸ºä¾‹ï¼Œå¯¹ç½‘ç»œè¿›è¡Œè®­ç»ƒæ—¶ï¼Œéœ€è¦å¯¹å‚æ•°åš\\(sign\\)æ“ä½œåå‚ä¸è¿ç®—ï¼Œæœ‰\\[q = sign(r)\\]ä½†ç”±äº\\(sign\\)å‡½æ•°åœ¨\\(r=0\\)å¤„ä¸å¯å¯¼ï¼Œåœ¨\\(r \\neq 0\\)å¤„å¯¼æ•°ä¸º\\(0\\)ï¼Œå› æ­¤åå‘ä¼ æ’­åœ¨è¿™ä¸€æ­¥æ˜¯å¤±æ•ˆçš„ï¼Œä¸èƒ½æœ‰æ•ˆå®ç°å‚æ•°çš„æ›´æ–°ã€‚STEæœ¬èº«çš„æ¨¡æ ·straight through estimatorï¼Œç›´é€šä¼°è®¡ã€‚éå¸¸ç›´ç™½ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åœ¨åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œå½“æ¢¯åº¦ä¼ é€’é‡åˆ°\\(sign\\)å‡½æ•°æ—¶ï¼Œç›´æ¥è·³è¿‡\\(sign\\)å‡½æ•°ï¼ŒæŠŠäºŒå€¼å‚æ•°çš„æ¢¯åº¦ä½œä¸ºå¯¹åº”çš„æµ®ç‚¹å‹å‚æ•°çš„æ¢¯åº¦æ¥è¿›è¡Œå‚æ•°æ›´æ–°ï¼Œå³\\[g_r = g_q\\]ç›´é€šä¼°è®¡(STE)ç¤ºæ„æ”¹è‰¯â€”â€”â€œé¥±å’ŒSTEâ€åœ¨BinaryNetä¸­ä½œè€…å‘ç°ï¼Œå¯¹activationè¿›è¡ŒäºŒå€¼åŒ–æ—¶ï¼ˆå¯è§†ä¸ºæ¿€æ´»å‡½æ•°ï¼‰ï¼Œå½“\\(sign\\)å‡½æ•°çš„è¾“å…¥çš„ç»å¯¹å€¼å¤§äº1çš„æ—¶å€™ï¼Œå°†æ¢¯åº¦ç½®0ï¼Œå¯ä»¥å¾—åˆ°æ›´å¥½çš„å®éªŒç»“æœï¼Œå³\\[g_r = g_q \\mathbf{1}_{|r \\le 1|}\\]æš‚ä¸”å¯ä»¥å«åšâ€œé¥±å’ŒSTEâ€ï¼Œè¿™ä¹Ÿæ˜¯åé¢ä¸å°‘å·¥ä½œå¯¹activationæ²¿ç”¨çš„å¤„ç†æ–¹æ³•ã€‚å…³äºæ—©æœŸé‡åŒ–æ–‡ç« çš„è¿·æ€ä¸»è¦æ˜¯BinaryConnectå’ŒBinaryNetè¿™ä¸¤ç¯‡ã€‚ BinaryConnectåªå¯¹weightä½¿ç”¨è¿›è¡Œé‡åŒ–ã€‚åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æœ€åŸå§‹çš„STEã€‚å¦å¤–ï¼Œå¯¹å®å€¼çš„weightså•ç‹¬åŠ äº†ä¸€ä¸ªæˆªæ–­å‡½æ•°clip(x,-1,1)ã€‚ BinaryNetåŒæ—¶å¯¹weightå’Œactivationè¿›è¡Œé‡åŒ–ã€‚åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œå¯¹activationä½¿ç”¨é¥±å’ŒSTEã€‚å¯¹å®å€¼çš„weightsåŒæ ·åŠ äº†ä¸€ä¸ªæˆªæ–­å‡½æ•°clip(x,-1,1)ã€‚ QAã€Qã€‘ï¼šå¯¹weightsæ–½åŠ æˆªæ–­å‡½æ•°clip(x,-1,1)çš„ç›®çš„ï¼Ÿã€Aã€‘ï¼šå¦‚æœå®å€¼weightsæ˜¯æ²¡æœ‰è®¾ç½®è¾¹ç•Œçš„ï¼Œè¿™æ ·å®ƒå°±æœ‰å¯èƒ½ä¼šä¸€ç›´ç´¯åŠ åˆ°ç‰¹åˆ«å¤§çš„å€¼ï¼Œä»è€Œä¸äºŒå€¼åŒ–çš„weightsä¹‹é—´çš„é‡åŒ–è¯¯å·®è¶Šæ¥è¶Šå¤§ï¼Œç§¯é‡éš¾è¿”ï¼Œæ‰€ä»¥ä½œè€…å¯¹å®å€¼çš„weightså•ç‹¬åŠ äº†ä¸€ä¸ªæˆªæ–­å‡½æ•°clip(x,-1,1)ï¼Œå°†å…¶é™åˆ¶åœ¨-1å’Œ+1ä¹‹é—´ï¼Œè¿™æ ·ä½¿å¾—å®å€¼weightså’ŒäºŒå€¼åŒ–weightsçš„è·ç¦»æ›´è¿‘ã€‚å‚è€ƒå‚è€ƒäºŒå€¼ç½‘ç»œï¼Œå›´ç»•STEçš„é‚£äº›äº‹å„¿äºŒå€¼åŒ–ç¥ç»ç½‘ç»œ(BNN)ç»¼è¿°" }, { "title": "æ¨¡å‹å‹ç¼©èµ„æ–™ç§¯ç´¯", "url": "/posts/%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9%E8%B5%84%E6%96%99%E7%A7%AF%E7%B4%AF/", "categories": "ä¸“ä¸šç§¯ç´¯, æ¨¡å‹å‹ç¼©", "tags": "", "date": "2021-02-27 22:41:00 +0800", "snippet": "æ·±åº¦å­¦ä¹ çš„æ¨¡å‹å‹ç¼©å¯èƒ½å°±æ˜¯è‡ªå·±ç¡•å£«é˜¶æ®µçš„ç ”ç©¶è¯¾é¢˜å•¦ï¼Œè¿™ç¯‡åšå®¢è®°å½•åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„æ¯”è¾ƒå¥½çš„èµ„æ–™ï¼Œä½œä¸ºç§¯ç´¯å’Œå¤‡å¿˜ã€‚github awesome collections htqin/awesome-model-quantization A list of papers, docs, codes about model quantization. This repo is aimed to provide the info for model quantization research. csyhhu/Awesome-Deep-Neural-Network-Compression Summary, Code for Deep Neural Network Quantization chester256/Model-Compression-Papers Papers for deep neural network compression and acceleration juliagusak/model-compression-and-acceleration-progress he-y/Awesome-Pruning A curated list of neural network pruning resources. FLHonker/Awesome-Knowledge-Distillation Awesome Knowledge-Distillation. åˆ†ç±»æ•´ç†çš„çŸ¥è¯†è’¸é¦paper(2014-2021)ã€‚ github project repo IntelLabs/distiller Neural Network Distiller by Intel AI Lab: a Python package for neural network compression research. j-marple-dev/model_compression lucamocerino/Binary-Neural-Networks-PyTorch-1.0 BNNs (XNOR, BNN and DoReFa) implementation for PyTorch 1.0+ jiecaoyu/XNOR-Net-PyTorch 666DZY666/micronet å¯ä¾›æ¨¡å‹å‹ç¼©åŠ é€Ÿå…¥é—¨å‚è€ƒ JDAI-CV/dabnn dabnn is an accelerated binary neural networks inference framework for mobile platform flame/how-to-optimize-gemm A step-by-step gemm optimization tutorial Attractive blogsé‡åŒ– :star: äºŒå€¼åŒ–ç¥ç»ç½‘ç»œ(BNN)ç»¼è¿° - Ironboyçš„æ–‡ç«  - çŸ¥ä¹ ç¥ç»ç½‘ç»œæ¨¡å‹é‡åŒ–æ–¹æ³•ç®€ä»‹ æ¨¡å‹å‹ç¼©ç®—æ³•æ±‡æ€» Making Neural Nets Work With Low Precision Compression and Acceleration of High-dimensional Neural Networks distiller - éå¯¹ç§°é‡åŒ–å’Œå¯¹ç§°é‡åŒ–çš„ç†è®ºæ¨å¯¼ NVIDIA Deep Learning Performance Documentation â€”â€”è‹±ä¼Ÿè¾¾yyds! é—²è¯æ¨¡å‹å‹ç¼©ä¹‹é‡åŒ–ï¼ˆQuantizationï¼‰ç¯‡ Anatomy of a High-Speed Convolutionå‰ªæ è®ºæ–‡æ€»ç»“ - æ¨¡å‹å‰ªæ Model Pruning é—²è¯æ¨¡å‹å‹ç¼©ä¹‹ç½‘ç»œå‰ªæï¼ˆNetwork Pruningï¼‰ç¯‡ https://www.yuque.com/yahei/hey-yahei/opsummary.mxnet) https://segmentfault.com/a/1190000020993594) BiliBilié‡åŒ– ç¥ç»ç½‘ç»œé‡åŒ– BiliBili code Google Developer Days - æ¨¡å‹ä¼˜åŒ–ä¸é‡åŒ– :star: å“ˆä½›å¤§å­¦åœ¨è¯»åšå£«è‘£é‘«ï¼šæ¨¡å‹é‡åŒ–â€”æ›´å°æ›´å¿«æ›´å¼º " }, { "title": "èµ„æ–™æ‚è®°", "url": "/posts/%E8%B5%84%E6%96%99%E6%9D%82%E8%AE%B0/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, èµ„æ–™æ‚è®°", "tags": "github", "date": "2021-02-20 14:31:00 +0800", "snippet": "github repo lufficc/SSD ä¸€ä¸ªSSDç®—æ³•çš„å®ç° jbhuang0604/awesome-computer-vision A curated list of awesome computer vision resources AgaMiko/data-augmentation-review List of useful data augmentation resources. You will find here some not common techniques, libraries, links to github repos, papers and others. aleju/imgaug Image augmentation for machine learning experiments. Paperspace/DataAugmentationForObjectDetection Data Augmentation For Object Detection https://github.com/amusi Mnistæ•°æ®é›†é“¾æ¥å¯ä»¥ç”¨è¿™é‡Œ æ›¿ä»£å·²ç»å¤±æ•ˆçš„lecunç½‘å€ ysh329/deep-learning-model-convertor The convertor/conversion of deep learning models for different deep learning frameworks/softwares. Mathematics for Machine Learning We wrote a book on Mathematics for Machine Learning that motivates people to learn mathematical concepts. The book is not intended to cover advanced machine learning techniques because there are already plenty of books doing this. Instead, we aim to provide the necessary mathematical skills to read those other books. FLHonker/ZAQ-code CVPR 2021 : Zero-shot Adversarial Quantization (ZAQ)ï¼ŒåŒ…å«ä¸€äº›é‡åŒ–çš„è‡ªä¸»å®ç°ï¼Œå¯å‚è€ƒç†è§£åŸç†ã€‚ Openposeä½œè€…æœ¬è€…å¼€çš„Openpose repo ç›¸æ¯”äºCMU-Labçš„è¿™ä¸ªç›¸æ¯”æ›´åPython jbhuang0604/awesome-tips A curated list of tips on various topics. Website stanford CS231n Convolutional Neural Networks for Visual Recognition ConvNetJS - Deep Learning in your browser Webå…¥é—¨ è‹±ä¼Ÿè¾¾æ˜¾å¡è®¡ç®—èƒ½åŠ›(Compute Capability)æŸ¥è¯¢ä¸æ”¯æŒçš„è¿ç®—ç±»å‹æŸ¥è¯¢ CVonline: Image Databases a collated list of image and video databases that people have found useful for computer vision research and algorithm evaluation. å¦‚ä½•è§£å†³ç¥ç»ç½‘ç»œè®­ç»ƒæ—¶lossä¸ä¸‹é™çš„é—®é¢˜ å½“å‡ºç°lossä¸ä¸‹é™æ—¶ï¼Œå¯ä»¥å¯¹ç…§ä¸€ä¸‹ The Missing Semester of Your CS EducationçŸ¥ä¹ å¦‚ä½•ç¡®å®šè‡ªå·±çš„ç§‘ç ”è¯¾é¢˜ï¼Ÿ - ç‹æ ‘ä¹‰çš„å›ç­” ç¥ç»ç½‘ç»œè®­ç»ƒä¸­çš„æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸è§†é¢‘3Blue1Brown series åå‘ä¼ æ’­æ¼”ç®—ï¼ˆç¬¬ 3 å­£ â€¢ ç¬¬ 4 é›†ï¼‰Blog Graph Convolutional Networks (GCN) &amp;amp; Pooling Object Detection Paper collection Self-Supervised Representation Learning å°æ¹¾æ¸…åå½­æ˜è¾‰æ•™æˆçš„ç ”ç©¶ç”Ÿæ‰‹å†Œ(ç®€ä½“å®Œå…¨ç‰ˆ) A Beginnerâ€™s Guide To Understanding Convolutional Neural Networks(è¿™ä¸ªåšä¸»å†™çš„æ–‡ç« æŒºä¸é”™çš„) ä¸€æ–‡ææ‡‚äº¤å‰ç†µåœ¨æœºå™¨å­¦ä¹ ä¸­çš„ä½¿ç”¨ï¼Œé€å½»ç†è§£äº¤å‰ç†µèƒŒåçš„ç›´è§‰ The Illustrated Transformer Do We Really Need Model Compression? Object Detection Series of Lilâ€™Log: part1 part2 part3 part4 ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢ debug DNN model Checklist for debugging neural networks Debugging Neural Networks with PyTorch and W&amp;amp;B Using Gradients and Visualizations ä¸€ç¯‡å†æ—¶äº”å¹´çš„å¿ƒå¾—ä½“ä¼šï¼šå…³äºAIéƒ¨ç½²ã€å…³äºé€‰æ‹©æ–¹å‘ã€å…³äºå°±ä¸šTEDs Julian Treasure: How to speak so that people want to listen Kai-Fu Lee: How AI can save our humanity Projects mediapipeï¼šè¿™ä¹Ÿå¤ªç‰›:cow:äº†å§ï¼ç¯å¢ƒé…ç½® Windowsä¸‹C++ç¼–è¯‘å™¨ä¸‹è½½ä¸é…ç½®ï¼šMinGW C++ Download and Installation æ›´æ¢pipæº åŸºäºChromeè·å–Andriodç«¯æµè§ˆå™¨logï¼šHow to get the web console log in Chrome for Android" }, { "title": "å…³äºPythonè£…é¥°å™¨", "url": "/posts/%E5%85%B3%E4%BA%8EPython%E8%A3%85%E9%A5%B0%E5%99%A8/", "categories": "ä¸“ä¸šç§¯ç´¯, ç¼–ç¨‹ç§¯ç´¯", "tags": "python, è½¬è½½", "date": "2021-02-15 21:01:00 +0800", "snippet": " æœ¬æ–‡çš„å†…å®¹ä¸»è¦è½¬è½½è‡ªrunoob-Python å‡½æ•°è£…é¥°å™¨â€¦çš„è¯„è®ºåŒºç¬”è®°ï¼ŒåŸå§‹å‡ºå¤„ä¸æ˜ï¼Œä½†å†™å¾—ç¡®å®éå¸¸å¥½ï¼Œå› æ­¤æ‘˜å½•äºæ­¤ã€‚å¼•å…¥è®²Pythonè£…é¥°å™¨å‰ï¼Œæˆ‘æƒ³å…ˆä¸¾ä¸ªä¾‹å­ï¼Œè™½æœ‰ç‚¹æ±¡ï¼Œä½†è·Ÿè£…é¥°å™¨è¿™ä¸ªè¯é¢˜å¾ˆè´´åˆ‡ã€‚æ¯ä¸ªäººéƒ½æœ‰çš„å†…è£¤ä¸»è¦åŠŸèƒ½æ˜¯ç”¨æ¥é®ç¾ï¼Œä½†æ˜¯åˆ°äº†å†¬å¤©å®ƒæ²¡æ³•ä¸ºæˆ‘ä»¬é˜²é£å¾¡å¯’ï¼Œå’‹åŠï¼Ÿæˆ‘ä»¬æƒ³åˆ°çš„ä¸€ä¸ªåŠæ³•å°±æ˜¯æŠŠå†…è£¤æ”¹é€ ä¸€ä¸‹ï¼Œè®©å®ƒå˜å¾—æ›´åšæ›´é•¿ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå®ƒä¸ä»…æœ‰é®ç¾åŠŸèƒ½ï¼Œè¿˜èƒ½æä¾›ä¿æš–ï¼Œä¸è¿‡æœ‰ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªå†…è£¤è¢«æˆ‘ä»¬æ”¹é€ æˆäº†é•¿è£¤åï¼Œè™½ç„¶è¿˜æœ‰é®ç¾åŠŸèƒ½ï¼Œä½†æœ¬è´¨ä¸Šå®ƒä¸å†æ˜¯ä¸€æ¡çœŸæ­£çš„å†…è£¤äº†ã€‚äºæ˜¯èªæ˜çš„äººä»¬å‘æ˜é•¿è£¤ï¼Œåœ¨ä¸å½±å“å†…è£¤çš„å‰æä¸‹ï¼Œç›´æ¥æŠŠé•¿è£¤å¥—åœ¨äº†å†…è£¤å¤–é¢ï¼Œè¿™æ ·å†…è£¤è¿˜æ˜¯å†…è£¤ï¼Œæœ‰äº†é•¿è£¤åå®å®å†ä¹Ÿä¸å†·äº†ã€‚è£…é¥°å™¨å°±åƒæˆ‘ä»¬è¿™é‡Œè¯´çš„é•¿è£¤ï¼Œåœ¨ä¸å½±å“å†…è£¤ä½œç”¨çš„å‰æä¸‹ï¼Œç»™æˆ‘ä»¬çš„èº«å­æä¾›äº†ä¿æš–çš„åŠŸæ•ˆã€‚è°ˆè£…é¥°å™¨å‰ï¼Œè¿˜è¦å…ˆè¦æ˜ç™½ä¸€ä»¶äº‹ï¼ŒPythonä¸­çš„å‡½æ•°å’Œ Javaã€C++ä¸å¤ªä¸€æ ·ï¼ŒPythonä¸­çš„å‡½æ•°å¯ä»¥åƒæ™®é€šå˜é‡ä¸€æ ·å½“åšå‚æ•°ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ï¼šdef hello_world(): print(&quot;hello world!&quot;) hello_world() # output: &quot;hello world!&quot; # æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚greet = hello_world# æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰åœ¨ä½¿ç”¨å°æ‹¬å·ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è°ƒç”¨hiå‡½æ•°, è€Œæ˜¯åœ¨å°†å®ƒæ”¾åœ¨greetå˜é‡é‡Œå¤´ã€‚æˆ‘ä»¬å°è¯•è¿è¡Œä¸‹è¿™ä¸ªgreet() # output: &quot;hello world!&quot;# å†è¯•è¯•æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°def hi(func): func() hi(hello_world) # output: &quot;hello world!&quot;æ­£å¼å›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ã€‚è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Python å‡½æ•°æˆ–ç±»ï¼Œå®ƒå¯ä»¥è®©å…¶ä»–å‡½æ•°æˆ–ç±»åœ¨ä¸éœ€è¦åšä»»ä½•ä»£ç ä¿®æ”¹çš„å‰æä¸‹å¢åŠ é¢å¤–åŠŸèƒ½ï¼Œè£…é¥°å™¨çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°/ç±»å¯¹è±¡ã€‚å®ƒç»å¸¸ç”¨äºæœ‰åˆ‡é¢éœ€æ±‚çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šæ’å…¥æ—¥å¿—ã€æ€§èƒ½æµ‹è¯•ã€äº‹åŠ¡å¤„ç†ã€ç¼“å­˜ã€æƒé™æ ¡éªŒç­‰åœºæ™¯ï¼Œè£…é¥°å™¨æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„ç»ä½³è®¾è®¡ã€‚æœ‰äº†è£…é¥°å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠ½ç¦»å‡ºå¤§é‡ä¸å‡½æ•°åŠŸèƒ½æœ¬èº«æ— å…³çš„é›·åŒä»£ç åˆ°è£…é¥°å™¨ä¸­å¹¶ç»§ç»­é‡ç”¨ã€‚æ¦‚æ‹¬çš„è®²ï¼Œè£…é¥°å™¨çš„ä½œç”¨å°±æ˜¯ä¸ºå·²ç»å­˜åœ¨çš„å¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œè™½ç„¶å®é™…ä»£ç å¯èƒ½æ¯”è¿™å¤æ‚å¾ˆå¤šï¼šdef foo(): print(&#39;i am foo&#39;)ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œå¸Œæœ›å¯ä»¥è®°å½•ä¸‹å‡½æ•°çš„æ‰§è¡Œæ—¥å¿—ï¼Œäºæ˜¯åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—ä»£ç ï¼šdef foo(): print(&#39;i am foo&#39;) print(&quot;foo is running&quot;)å¦‚æœå‡½æ•° bar()ã€bar2() ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œæ€ä¹ˆåšï¼Ÿå†å†™ä¸€ä¸ª logging åœ¨ bar å‡½æ•°é‡Œï¼Ÿè¿™æ ·å°±é€ æˆå¤§é‡é›·åŒçš„ä»£ç ï¼Œä¸ºäº†å‡å°‘é‡å¤å†™ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼Œé‡æ–°å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼šä¸“é—¨å¤„ç†æ—¥å¿— ï¼Œæ—¥å¿—å¤„ç†å®Œä¹‹åå†æ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡ä»£ç def use_logging(func): print(&quot;%s is running&quot; % func.__name__) func()def foo(): print(&#39;i am foo&#39;)use_logging(foo)è¿™æ ·åšé€»è¾‘ä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼ŒåŠŸèƒ½æ˜¯å®ç°äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™ä¸å†æ˜¯è°ƒç”¨çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ foo å‡½æ•°ï¼Œè€Œæ˜¯æ¢æˆäº† use_logging å‡½æ•°ï¼Œè¿™å°±ç ´åäº†åŸæœ‰çš„ä»£ç ç»“æ„ï¼Œ ç°åœ¨æˆ‘ä»¬ä¸å¾—ä¸æ¯æ¬¡éƒ½è¦æŠŠåŸæ¥çš„é‚£ä¸ª foo å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ use_logging å‡½æ•°ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼çš„å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œç­”æ¡ˆå°±æ˜¯è£…é¥°å™¨ã€‚ç®€å•è£…é¥°å™¨def use_logging(func): def wrapper(): print(&quot;%s is running&quot; % func.__name__) return func() # æŠŠ foo å½“åšå‚æ•°ä¼ é€’è¿›æ¥æ—¶ï¼Œæ‰§è¡Œfunc()å°±ç›¸å½“äºæ‰§è¡Œfoo() return wrapperdef foo(): print(&#39;i am foo&#39;)foo = use_logging(foo) # å› ä¸ºè£…é¥°å™¨ use_logging(foo) è¿”å›çš„æ—¶å‡½æ•°å¯¹è±¡ wrapperï¼Œè¿™æ¡è¯­å¥ç›¸å½“äº foo = wrapperfoo() # æ‰§è¡Œfoo()å°±ç›¸å½“äºæ‰§è¡Œ wrapper()use_logging å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œå®ƒæŠŠæ‰§è¡ŒçœŸæ­£ä¸šåŠ¡é€»è¾‘çš„å‡½æ•° func åŒ…è£¹åœ¨å…¶ä¸­ï¼Œçœ‹èµ·æ¥åƒ foo è¢« use_logging è£…é¥°äº†ä¸€æ ·ï¼Œuse_logging è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„åå­—å« wrapperã€‚@ è¯­æ³•ç³–å¦‚æœä½ æ¥è§¦ Python æœ‰ä¸€æ®µæ—¶é—´äº†çš„è¯ï¼Œæƒ³å¿…ä½ å¯¹ @ ç¬¦å·ä¸€å®šä¸é™Œç”Ÿäº†ã€‚æ²¡é”™ ï¼Œ@ ç¬¦å·å°±æ˜¯è£…é¥°å™¨çš„è¯­æ³•ç³–ï¼Œå®ƒæ”¾åœ¨å‡½æ•°å¼€å§‹å®šä¹‰çš„åœ°æ–¹ï¼Œè¿™æ ·å°±å¯ä»¥çœç•¥æœ€åä¸€æ­¥å†æ¬¡èµ‹å€¼çš„æ“ä½œã€‚def use_logging(func): def wrapper(): print(&quot;%s is running&quot; % func.__name__) return func() return wrapper@use_loggingdef foo(): print(&quot;i am foo&quot;)foo()# ç­‰åŒäºä¹‹å‰çš„`foo = use_logging(foo)`å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ‰äº† @ ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœå»foo = use_logging(foo)è¿™ä¸€å¥äº†ï¼Œç›´æ¥è°ƒç”¨ foo() å³å¯å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚ä½ ä»¬çœ‹åˆ°äº†æ²¡æœ‰ï¼Œfoo() å‡½æ•°ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹ï¼Œåªéœ€åœ¨å®šä¹‰çš„åœ°æ–¹åŠ ä¸Šè£…é¥°å™¨ï¼Œè°ƒç”¨çš„æ—¶å€™è¿˜æ˜¯å’Œä»¥å‰ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å…¶ä»–çš„ç±»ä¼¼å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è°ƒç”¨è£…é¥°å™¨æ¥ä¿®é¥°å‡½æ•°ï¼Œè€Œä¸ç”¨é‡å¤ä¿®æ”¹å‡½æ•°æˆ–è€…å¢åŠ æ–°çš„å°è£…ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æé«˜äº†ç¨‹åºçš„å¯é‡å¤åˆ©ç”¨æ€§ï¼Œå¹¶å¢åŠ äº†ç¨‹åºçš„å¯è¯»æ€§ã€‚è£…é¥°å™¨åœ¨ Python ä½¿ç”¨å¦‚æ­¤æ–¹ä¾¿éƒ½è¦å½’å› äº Python çš„å‡½æ•°èƒ½åƒæ™®é€šçš„å¯¹è±¡ä¸€æ ·èƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå¯ä»¥è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œå¯ä»¥è¢«å®šä¹‰åœ¨å¦å¤–ä¸€ä¸ªå‡½æ•°å†…ã€‚*argsã€**kwargså¯èƒ½æœ‰äººé—®ï¼Œå¦‚æœæˆ‘çš„ä¸šåŠ¡é€»è¾‘å‡½æ•° foo éœ€è¦å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ï¼šdef foo(name): print(&quot;i am %s&quot; % name)æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰ wrapper å‡½æ•°çš„æ—¶å€™æŒ‡å®šå‚æ•°ï¼šdef wrapper(name): print(&quot;%s is running&quot; % func.__name__) return func(name) return wrapperè¿™æ · foo å‡½æ•°å®šä¹‰çš„å‚æ•°å°±å¯ä»¥å®šä¹‰åœ¨ wrapper å‡½æ•°ä¸­ã€‚è¿™æ—¶ï¼Œåˆæœ‰äººè¦é—®äº†ï¼Œå¦‚æœ foo å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°å‘¢ï¼Ÿä¸‰ä¸ªå‚æ•°å‘¢ï¼Ÿæ›´æœ‰ç”šè€…ï¼Œæˆ‘å¯èƒ½ä¼ å¾ˆå¤šä¸ªã€‚å½“è£…é¥°å™¨ä¸çŸ¥é“ foo åˆ°åº•æœ‰å¤šå°‘ä¸ªå‚æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ *args æ¥ä»£æ›¿ï¼šdef wrapper(*args): print(&quot;%s is running&quot; % func.__name__) return func(*args) return wrapperå¦‚æ­¤ä¸€æ¥ï¼Œç”­ç®¡ foo å®šä¹‰äº†å¤šå°‘ä¸ªå‚æ•°ï¼Œæˆ‘éƒ½å¯ä»¥å®Œæ•´åœ°ä¼ é€’åˆ° func ä¸­å»ã€‚è¿™æ ·å°±ä¸å½±å“ foo çš„ä¸šåŠ¡é€»è¾‘äº†ã€‚è¿™æ—¶è¿˜æœ‰è¯»è€…ä¼šé—®ï¼Œå¦‚æœ foo å‡½æ•°è¿˜å®šä¹‰äº†ä¸€äº›å…³é”®å­—å‚æ•°å‘¢ï¼Ÿæ¯”å¦‚ï¼šdef foo(name, age=None, height=None): print(&quot;I am %s, age %s, height %s&quot; % (name, age, height))è¿™æ—¶ï¼Œä½ å°±å¯ä»¥æŠŠ wrapper å‡½æ•°æŒ‡å®šå…³é”®å­—å‡½æ•°ï¼šdef wrapper(*args, **kwargs): # argsæ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œkwargsä¸€ä¸ªå­—å…¸ print(&quot;%s is running&quot; % func.__name__) return func(*args, **kwargs) return wrapper *argsè´Ÿè´£æ¥æ”¶ä¸å®šæ•°ç›®çš„å‚æ•°ï¼Œ**kwargsè´Ÿè´£æ¥æ”¶å…³é”®å­—ç±»å‹çš„å‚æ•°ã€‚è¿™æ—¶æ•´ä½“çš„å‡½æ•°å°±æˆäº†def use_logging(func): def wrapper(*args, **kwargs): # argsæ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œkwargsä¸€ä¸ªå­—å…¸ print(&quot;%s is running&quot; % func.__name__) return func(*args, **kwargs) return wrapper # equal to foo = use_logging(foo)@use_loggingdef foo(*args, **kwargs): print(&quot;i am foo&quot;) print(args, kwargs)å¸¦å‚æ•°çš„è£…é¥°å™¨è£…é¥°å™¨è¿˜æœ‰æ›´å¤§çš„çµæ´»æ€§ï¼Œä¾‹å¦‚å¸¦å‚æ•°çš„è£…é¥°å™¨ï¼Œåœ¨ä¸Šé¢çš„è£…é¥°å™¨è°ƒç”¨ä¸­ï¼Œè¯¥è£…é¥°å™¨æ¥æ”¶å”¯ä¸€çš„å‚æ•°å°±æ˜¯æ‰§è¡Œä¸šåŠ¡çš„å‡½æ•° foo ã€‚è£…é¥°å™¨çš„è¯­æ³•å…è®¸æˆ‘ä»¬åœ¨è°ƒç”¨æ—¶ï¼Œæä¾›å…¶å®ƒå‚æ•°ï¼Œæ¯”å¦‚@decorator(a)ã€‚è¿™æ ·ï¼Œå°±ä¸ºè£…é¥°å™¨çš„ç¼–å†™å’Œä½¿ç”¨æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è£…é¥°å™¨ä¸­æŒ‡å®šæ—¥å¿—çš„ç­‰çº§ï¼Œå› ä¸ºä¸åŒä¸šåŠ¡å‡½æ•°å¯èƒ½éœ€è¦çš„æ—¥å¿—çº§åˆ«æ˜¯ä¸ä¸€æ ·çš„ã€‚def use_logging(level): def decorator(func): def wrapper(*args, **kwargs): if level == &quot;warn&quot;: print(&quot;%s is running&quot; % func.__name__) elif level == &quot;info&quot;: print(&quot;%s is running&quot; % func.__name__) return func(*args) return wrapper return decorator@use_logging(level=&quot;warn&quot;)def foo(name=&#39;foo&#39;): print(&quot;i am %s&quot; % name)foo()ä¸Šé¢çš„ use_logging æ˜¯å…è®¸å¸¦å‚æ•°çš„è£…é¥°å™¨ã€‚å®ƒå®é™…ä¸Šæ˜¯å¯¹åŸæœ‰è£…é¥°å™¨çš„ä¸€ä¸ªå‡½æ•°å°è£…ï¼Œå¹¶è¿”å›ä¸€ä¸ªè£…é¥°å™¨ã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªå«æœ‰å‚æ•°çš„é—­åŒ…ã€‚å½“æˆ‘ ä»¬ä½¿ç”¨@use_logging(level=&quot;warn&quot;)è°ƒç”¨çš„æ—¶å€™ï¼ŒPython èƒ½å¤Ÿå‘ç°è¿™ä¸€å±‚çš„å°è£…ï¼Œå¹¶æŠŠå‚æ•°ä¼ é€’åˆ°è£…é¥°å™¨çš„ç¯å¢ƒä¸­ã€‚@use_logging(level=â€warnâ€) ç­‰ä»·äº @decoratorç±»è£…é¥°å™¨æ²¡é”™ï¼Œè£…é¥°å™¨ä¸ä»…å¯ä»¥æ˜¯å‡½æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ç±»ï¼Œç›¸æ¯”å‡½æ•°è£…é¥°å™¨ï¼Œç±»è£…é¥°å™¨å…·æœ‰çµæ´»åº¦å¤§ã€é«˜å†…èšã€å°è£…æ€§ç­‰ä¼˜ç‚¹ã€‚ä½¿ç”¨ç±»è£…é¥°å™¨ä¸»è¦ä¾é ç±»çš„__call__æ–¹æ³•ï¼Œå½“ä½¿ç”¨ @ å½¢å¼å°†è£…é¥°å™¨é™„åŠ åˆ°å‡½æ•°ä¸Šæ—¶ï¼Œå°±ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚class Foo(object): def __init__(self, func): self._func = func def __call__(self): print (&#39;class decorator runing&#39;) self._func() print (&#39;class decorator ending&#39;)@Foodef bar(): print (&#39;bar&#39;)bar() __call__()ä½¿å¾—ç±»å®ä¾‹å¯å½“åšå‡½æ•°è°ƒç”¨ã€‚å¦‚Foo(bar)()å°†ä¼šè§¦å‘__call__()å‡½æ•°ï¼ˆFoo(bar)å®ä¾‹åŒ–Fooå¯¹è±¡ï¼ŒFoo(bar)()å°†è¯¥å¯¹è±¡åšå‡½æ•°è°ƒç”¨ï¼‰ã€‚" }, { "title": "é¢‘åŸŸè§’åº¦ç†è§£æ·±åº¦å­¦ä¹  F-principle", "url": "/posts/%E9%A2%91%E5%9F%9F%E8%A7%92%E5%BA%A6%E7%90%86%E8%A7%A3%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-F-principle/", "categories": "ä¸“ä¸šç§¯ç´¯, åŸºç¡€çŸ¥è¯†", "tags": "", "date": "2021-02-13 22:00:00 +0800", "snippet": "\\(F-Principle\\)å®šç†ï¼šDNNå€¾å‘äºæŒ‰ä»ä½é¢‘åˆ°é«˜é¢‘çš„é¡ºåºæ¥æ‹Ÿåˆè®­ç»ƒæ•°æ®ã€‚å®éªŒSpatial DomainRed: the target function;Blue: DNN output.Abscissa: input;Ordinate: output.Fourier DomainRed: FFT of the target function;Blue: FFT of DNN output.Abscissa: frequency;Ordinate: amplitude.ä»ä¸Šè¿°å®éªŒ(å›¾æº)å¯ä»¥çœ‹å‡ºï¼Œæ¨¡å‹çš„æ‹Ÿåˆæ˜¯æœ‰é¡ºåºçš„ï¼Œé¦–å…ˆä»ä½é¢‘å¼€å§‹ï¼Œé€æ¸è½¬ç§»è‡³æ›´é«˜é¢‘ç‡çš„æ‹Ÿåˆã€‚å¯å‘ä»\\(F-principle\\)è§’åº¦æ¥ç†è§£è¿‡æ‹Ÿåˆç°è±¡ï¼šç¥ç»ç½‘ç»œçš„æ³›åŒ–æ€§èƒ½æ¥æºäºå®ƒåœ¨è®­ç»ƒè¿‡ç¨‹ï¼Œä¼šæ›´å¤šå…³æ³¨ä½é¢‘åˆ†é‡ã€‚éšç€è®­ç»ƒçš„è¿›è¡Œï¼Œæ¨¡å‹å¯¹è®­ç»ƒé›†çš„æ‹Ÿåˆé€æ¸è½¬åŒ–è‡³é«˜é¢‘æˆåˆ†ï¼Œå³å¯¹é«˜é¢‘æˆåˆ†çš„æ‹Ÿåˆè¶Šæ¥è¶Šå¥½ã€‚ä½†é«˜é¢‘æˆåˆ†å¾€å¾€æ˜¯å™ªå£°ä¿¡å·ï¼Œå› æ­¤å¯¼è‡´äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å‡å¼±ã€‚å› æ­¤ï¼Œæå‰åœæ­¢è®­ç»ƒï¼ˆearly-stoppingï¼‰å°±èƒ½åœ¨å®è·µä¸­æé«˜ DNN çš„æ³›åŒ–èƒ½åŠ›ã€‚early stoppingçš„å¿…è¦æ€§å‚è€ƒçŸ¥ä¹-å¦‚ä½•ä»é¢‘åŸŸçš„è§’åº¦è§£é‡Š CNNï¼ˆå·ç§¯ç¥ç»ç½‘ç»œï¼‰ï¼ŸBilibli-è®¸å¿—é’¦-æ•°å­¦å­¦é™¢æœ¬ç§‘è¯¾ç¨‹ï¼šç»Ÿè®¡è®¡ç®—ä¸æœºå™¨å­¦ä¹ 3 Frequency PrincipleF-principleä¸»é¡µ" }, { "title": "å…³äºBatch Normalization", "url": "/posts/%E5%85%B3%E4%BA%8EBatch-Normalization/", "categories": "ä¸“ä¸šç§¯ç´¯, åŸºç¡€çŸ¥è¯†", "tags": "", "date": "2021-02-09 14:09:00 +0800", "snippet": "Batch-Normalization (BN) é€šè¿‡ä½¿ç”¨å½“å‰batchæ•°æ®çš„å‡å€¼meanå’Œæ–¹å·®varianceå¯¹å®ƒä»¬è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œå¯ä»¥ä½¿å¾—æ¨¡å‹çš„è®­ç»ƒæ›´åŠ å¿«é€Ÿå’Œç¨³å®šã€‚å®è·µä¸­ä¼šæŠŠBNä¸€èˆ¬æ”¾åœ¨éçº¿æ€§æ¿€æ´»å‡½æ•°çš„ä¸Šä¸€å±‚æˆ–è€…ä¸‹ä¸€å±‚ã€‚åŸç†è®­ç»ƒæ—¶BNä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºbatch normalizationï¼Œå°±æ˜¯å› ä¸ºnormalizationæ˜¯æ²¿batch_sizeç»´åº¦è¿›è¡Œçš„ã€‚è®¾æŸä¸€ä¸ªç¥ç»å…ƒå¯¹ä¸€ä¸ªbatchå†…çš„\\(n\\)ä¸ªæ ·æœ¬çš„è¾“å‡ºä¸ºåˆ†åˆ«ä¸º\\(Z^{(i)}, i=1, \\cdots, n\\)ï¼ŒBNå±‚é€šè¿‡è®¡ç®—\\[\\mu = \\frac{1}{n}\\sum_i Z^{(i)}, \\ \\ \\ \\delta = \\frac{1}{n}\\sum_i (Z^{(i)} - \\mu) \\tag{1, 2}\\]å¾—åˆ°å®ƒä»¬çš„å‡å€¼ \\(\\mu\\) å’Œæ–¹å·® \\(\\delta\\). ç„¶åé€šè¿‡\\[Z_{norm}^{(i)} = \\frac{Z^{(i)} - \\mu}{\\sqrt{\\delta^2 - \\epsilon}} \\tag{3}\\]å°†åŸæ¥è¯¥ç¥ç»å…ƒçš„è¾“å‡ºï¼ˆå¯èƒ½æ˜¯ä»»æ„åˆ†å¸ƒï¼‰è½¬åŒ–åˆ°å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸Šã€‚å¦‚å›¾3æ‰€ç¤ºã€‚å›¾3 batch_sizeä¸ºb, 3ä¸ªç¥ç»å…ƒè¾“å‡ºçš„ç¤ºä¾‹ã€‚å¯¹äºæ¯ä¸ªç¥ç»å…ƒï¼Œåœ¨ä½¿ç”¨BNå‰è¾“å‡º(æ²¿batch_sizeç»´åº¦)åˆ†å¸ƒå„å¼‚ï¼Œç»è¿‡BNæ“ä½œåå‡æœä»ç›¸åŒçš„åˆ†å¸ƒâ€”â€”æ­£æ€åˆ†å¸ƒæœ€åï¼Œå†å¯¹\\(Z_{norm}^{(i)}\\)åšä¸€ä¸ªçº¿æ€§å˜æ¢\\[\\hat{Z} = \\gamma \\times Z_{norm}^{(i)} + \\beta \\tag{4}\\]\\(\\gamma\\) å’Œ \\(\\beta\\) æ˜¯å¯å­¦ä¹ çš„å‚æ•°ï¼Œå¯ä»¥åœ¨æ­£æ€åˆ†å¸ƒçš„åŸºç¡€ä¸Šè°ƒæ•´ï¼Œé€‰æ‹©å…¶æœ€ä¼˜çš„æ­£æ€åˆ†å¸ƒã€‚ä¸Šé¢çš„è§£é‡Šæ˜¯åŸºäºç¥ç»å…ƒneuronçš„è¾“å‡ºå±•å¼€çš„ï¼Œä½†æ˜¯å¯¹äº2D CNNä¸­å·ç§¯å¾—åˆ°çš„ç‰¹å¾å›¾ï¼Œbatch normalizationæ˜¯å¦‚ä½•ä½œç”¨çš„å‘¢ï¼Ÿå›¾4 2D CNNä¸‹çš„BNæ“ä½œæ–¹å¼ç¤ºæ„å¦‚å›¾4ï¼Œå°±æ˜¯å°†æŸä¸€ä¸ªchannelå¯¹åº”çš„batchsizeä¸ªç»´åº¦ä¸º(H, W)çš„tensoræ±‚è§£å‡ºä¸€å¯¹å‡å€¼æ–¹å·®ï¼Œå¯¹è¿™batchsizeä¸ª(H, W)çš„tensorï¼Œå…¶æ¯ä¸€ä¸ªpixel valueå‡å»è¯¥å‡å€¼å¹¶é™¤ä»¥è¯¥æ–¹å·®ã€‚å‚è€ƒ Q: bn ä¸æ˜¯å¯¹batchç»´åº¦åšå½’ä¸€åŒ–å˜›ï¼Œä¸ºä»€ä¹ˆh,wç»´åº¦ä¹Ÿè¦åšï¼Ÿ A: å› ä¸ºCNNä¸­å·ç§¯æ ¸æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥ä¸€å¼ ç‰¹å¾å›¾åº”è¯¥è¢«çœ‹ä½œä¸€ä¸ªâ€ç¥ç»å…ƒâ€çš„è¾“å‡ºï¼Œå› æ­¤å½’ä¸€åŒ–çš„æ—¶å€™N,H,Wåº”è¯¥æ”¾åœ¨ä¸€èµ·å½’ä¸€åŒ–ã€‚å‚è€ƒ(è¯„è®ºåŒº)æ³¨æ„ï¼ŒBNå±‚æ“ä½œæ˜¯channel-wiseçš„ï¼šä¸€ä¸ªchannelå¯¹åº”ä¸€å¯¹å‡å€¼å’Œæ–¹å·®ï¼Œä¸€å¯¹\\(\\gamma\\) å’Œ \\(\\beta\\) ã€‚è¿™ä¹Ÿæ˜¯åœ¨Pytorchä¸­å®šä¹‰BatchNorm2då±‚æ—¶ï¼Œéœ€è¦ä¼ å…¥çš„æ˜¯channel_numçš„ç¼˜æ•…ã€‚å‚è€ƒå’Œå‚è€ƒæµ‹è¯•æ—¶è®­ç»ƒæ—¶ï¼ŒBNå±‚å¯ä»¥ä¸ºæ¯ä¸€ä¸ªbatchè¾“å…¥æ•°æ®è®¡ç®—å‡å€¼å’Œæ–¹å·®ï¼Œä½†æ˜¯æµ‹è¯•æ—¶ï¼ŒBNå±‚ä½¿ç”¨çš„å‡å€¼å’Œæ–¹å·®ä¸æ˜¯æ ¹æ®è¾“å…¥æ ·æœ¬è®¡ç®—ï¼Œè€Œæ˜¯ä½¿ç”¨è®­ç»ƒè¿‡ç¨‹ä¸­è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œç›´æ¥ä»(3)å¼å¼€å§‹è®¡ç®—ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ªdemo code.æ•ˆæœå›¾5 x nä»£è¡¨ä»¥ä¹‹å‰æœ€ä¼˜å­¦ä¹ ç‡çš„nå€è¿›è¡Œè®­ç»ƒå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨BNå¯ä»¥å®¹å¿æ›´é«˜çš„å­¦ä¹ ç‡ï¼Œæ›´å¿«æ›´å¥½åœ°æ”¶æ•›ã€‚:raising_hand_woman:QAQï¼šç»å¸¸è§åˆ°çš„mean = [0.485, 0.456, 0=406] ï¼Œ std = [0.229, 0.224, 0.225]æ˜¯ä»€ä¹ˆï¼ŸAï¼šå‰é¢çš„(0.485,0.456,0.406)è¡¨ç¤ºå‡å€¼ï¼Œåˆ†åˆ«å¯¹åº”çš„æ˜¯RGBä¸‰ä¸ªé€šé“ï¼›åé¢çš„(0.229,0.224,0.225)åˆ™è¡¨ç¤ºçš„æ˜¯æ ‡å‡†å·®ï¼Œè¿™äº›å€¼æ˜¯åœ¨ImageNetæ•°æ®é›†è®¡ç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¾ˆå¤šäººéƒ½ä½¿ç”¨å®ƒä»¬ã€‚ä¸è¿‡åœ¨æœ‰äº†BNä¹‹åï¼Œå®ƒä»¬å·²ç»ä¸å¿…è¦äº†ã€‚Qï¼šå¯¹äºRGBå›¾è€Œè¨€ï¼Œå‡å€¼ä¸åº”è¯¥æ˜¯æ¥è¿‘äº128å—ï¼Ÿä¸ºä»€ä¹ˆä¼šæ˜¯æ¥è¿‘äº0.5çš„æ•°å‘¢ï¼ŸAï¼š è¿™æ˜¯å› ä¸ºä½¿ç”¨äº†pytorchçš„transforms.ToTensor()å¯¹å›¾ç‰‡è¿›è¡Œäº†å½’ä¸€åŒ–å¤„ç†ï¼ˆå¦å¤–å¯¹äºPIL Image or numpy.ndarrayç±»å‹çš„è¾“å…¥ï¼Œè¿˜å°†å°ºå¯¸ç”± (H x W x C) è½¬åŒ–ä¸ºäº† (C x H x W)ï¼‰ã€‚å¦‚transform = transforms.Compose( [transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5))])Qï¼šä¸Šé¢è¯´BNå±‚åœ¨è®­ç»ƒå’Œæµ‹è¯•æ—¶ä½¿ç”¨æ–¹æ³•ä¸åŒï¼Œé‚£ä¹ˆæ¨¡å‹å¦‚ä½•åŒºåˆ†è‡ªå·±æ˜¯åœ¨è®­ç»ƒè¿˜æ˜¯åœ¨æµ‹è¯•å‘¢ï¼ŸAï¼šä½¿ç”¨model.train()æˆ–è€…model.train(True)å°†modelè®¾ä¸ºè®­ç»ƒçŠ¶æ€ï¼›ä½¿ç”¨model.eval()æˆ–è€…model.train(False)å°†modelè®¾ä¸ºæµ‹è¯•çŠ¶æ€ã€‚å½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œç›®å‰åªæœ‰dropoutå’Œbatchnormä¸¤ç§å±‚ä¼šå—åˆ°å½±å“(å‚è€ƒ)ã€‚batchnormå±‚åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„è¡¨ç°å¦‚å‰æ‰€è¿°ï¼›å¯¹äºdropoutå±‚ï¼Œå½“å¤„åœ¨æµ‹è¯•çŠ¶æ€æ—¶ï¼Œè¯¥å±‚è¾“å‡ºå€¼ç­‰äºè¾“å…¥å€¼(identity map)ï¼Œç›¸å½“äºdisabledã€‚ Tips: dropout(p)åœ¨è®­ç»ƒæ—¶æœ‰ä¸€ä¸ªscaled by factor\\(\\frac{1}{1-p}\\)æ“ä½œï¼Œç›®çš„æ˜¯ä½¿å¾—æŸä¸€ç¥ç»å…ƒè¾“å‡ºåœ¨æµ‹è¯•æ—¶çš„æœŸæœ›=è®­ç»ƒæ—¶çš„æœŸæœ›ï¼Œæ›´è¿›ä¸€æ­¥è§£é‡Šå¯å‚è€ƒè¿™é‡ŒQï¼šBatch Normalizationçš„ä¸€äº›å±€é™ï¼ŸAï¼šå› ä¸ºæµ‹è¯•æ—¶BNå±‚ä½¿ç”¨çš„å‡å€¼å’Œæ–¹å·®æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œå› æ­¤å½“æµ‹è¯•é›†å’Œè®­ç»ƒé›†æ•°æ®åˆ†å¸ƒå·®åˆ«è¾ƒå¤§æ—¶ï¼Œä¼šå¾—åˆ°ä¸å¥½çš„æµ‹è¯•æ•ˆæœã€‚Qï¼šBNå±‚åº”æ”¾åœ¨éçº¿æ€§æ¿€æ´»å‡½æ•°å‰é¢è¿˜æ˜¯åé¢ï¼ŸAï¼šBNä½œè€…æœ¬æ„æ˜¯ä¸ºäº†é€šè¿‡BNå±‚ï¼Œä½¿å¾—ä»»ä½•çš„å‚æ•°å€¼ï¼Œéƒ½å¯ä»¥ç”¨æ‰€æœŸæœ›çš„åˆ†å¸ƒ(åº”è¯¥å°±æ˜¯æŒ‡æ­£æ€åˆ†å¸ƒ)æ¥ç”Ÿæˆæ¿€æ´»å€¼ï¼Œå› æ­¤å°†BNå±‚æ”¾åœ¨äº†éçº¿æ€§æ¿€æ´»å‡½æ•°å‰é¢ä¸€å±‚ã€‚åæ¥å¾ˆå¤šç½‘ç»œç»“æ„ï¼Œæ¯”å¦‚ResNetï¼Œmobilenet-v2ä¹Ÿéƒ½æ²¿ç”¨äº†è¿™ä¸€å‡†åˆ™ã€‚ä¸è¿‡ä¹Ÿæœ‰å·¥ä½œè¡¨ç¤ºå°†BNå±‚æ”¾åœ¨äº†éçº¿æ€§æ¿€æ´»å‡½æ•°åé¢ä¸€å±‚ä¼šå–å¾—æ›´å¥½çš„æ•ˆæœï¼Œä½†æ˜¯æ²¡æœ‰ç»™å‡ºæœ‰åŠ›çš„è§£é‡Šã€‚redditä¸Šå¯¹äºè¿™ä¸€é—®é¢˜æœ‰ä¸ªæ¿€çƒˆçš„è®¨è®ºã€‚Qï¼šGroup Normlization?Aï¼šå‚è€ƒBatch normalization in 3 levels of understandingpytorch è®¡ç®—å›¾åƒæ•°æ®é›†çš„å‡å€¼å’Œæ ‡å‡†å·®" }, { "title": "Pytorchç³»ç»Ÿå­¦ä¹ ", "url": "/posts/Pytorch%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, æ¡†æ¶å­¦ä¹ ", "tags": "pytorch", "date": "2021-02-08 17:06:00 +0800", "snippet": "è¯»å–æ•°æ®å‚è€ƒ å®˜æ–¹ç¤ºä¾‹ å’Œ è¿™ä¸ªgithub repo (recommanded)Datasetç±»éœ€è¦ç»§æ‰¿torch.utils.data.Dataset ä¸”é‡å†™__len__å’Œ__getitem__ã€‚__len__è¿”å›æ•°æ®é›†çš„å¤§å°ï¼Œ__getitem__æ ¹æ®ç´¢å¼•å€¼\\(i\\)ä»æ•°æ®é›†ä¸­è¿”å›ç¬¬\\(iâ€‹\\)ä¸ªæ ·æœ¬ã€‚ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹import osfrom torch.utils.data.dataset import Datasetclass CustomDataset(Dataset): def __init__(self, root_dir): self.data_list = [os.path.join(root_dir, data_name) for data_name in os.listdir(root_dir)] def __getitem__(self, index): data_path = self.data_list[index] data = READ_OP(data_path) # data reading return data def __len__(self): return len(self.data_list)å¯ä»¥ç”¨data = CustomDataset.__getitem__(99) è¿”å›ç¬¬99ä¸ªæ ·æœ¬ã€‚æ›´è¿›ä¸€æ­¥çš„ï¼ŒCustomDatasetå¯ä»¥è¿™æ ·æ¥è¯»å–æ ·æœ¬for i in range(len(CustomDataset)): sample = CustomDataset[i]ä½¿ç”¨transformç¤ºä¾‹import osfrom torch.utils.data.dataset import Datasetfrom torchvision import transforms class CustomDataset(Dataset): def __init__(self, root_dir, transform): self.data_list = [os.path.join(root_dir, data_name) for data_name in os.listdir(root_path)] self.transform = transform def __getitem__(self, index): data_path = self.data_list[index] data = READ_OP(data_path) # data reading # apply transform if self.transform is not None: data = self.transform(data) return data def __len__(self): return len(self.data_list) if __name__ == &#39;__main__&#39;: transform = transforms.Compose([ transforms.ToPILImage(), # ä½¿ç”¨RandomCropç­‰å‡½æ•°ï¼Œè¦æ±‚å˜é‡ä¸ºPIL transforms.RandomCrop(32, padding=4), transforms.RandomHorizontalFlip(), transforms.ToTensor(), transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)) ]) # apply the transformations to the dataset dataset = CustomDataset(root_dir, transform)ä½¿ç”¨DataLoaderCustomDatasetå¯ä»¥æŒ‰ç´¢å¼•indexè¯»å–æ ·æœ¬ï¼Œä½†æ˜¯ä¸ä¾¿äº æ‰¹é‡è¯»å–æ•°æ®(Batching the data) æ‰“ä¹±æ•°æ®(Shuffling the data) å¤šçº¿ç¨‹è¯»å–æ•°æ®(Loading the data in parallel using multiprocessing workers)ä½¿ç”¨DataLoaderå¯¹å…¶è¿›ä¸€æ­¥å°è£…å³å¯èµ‹äºˆè¿™äº›èƒ½åŠ›from torch.utils.data import DataLoaderdataloader = DataLoader(transformedDataset, batch_size=4, shuffle=True, num_workers=4)for data in dataloader: ...æ­å»ºç½‘ç»œç»§æ‰¿nn.Moduleï¼Œå‚è€ƒå®˜æ–¹ç¤ºä¾‹ç¤ºä¾‹import torchimport torch.nn as nnimport torch.nn.functional as Fclass Net(nn.Module): def __init__(self): super(Net, self).__init__() # 1 input image channel, 6 output channels, 5x5 square convolution # kernel self.conv1 = nn.Conv2d(1, 6, 5) self.conv2 = nn.Conv2d(6, 16, 5) # an affine operation: y = Wx + b self.fc1 = nn.Linear(16 * 5 * 5, 120) # 5*5 from image dimension self.fc2 = nn.Linear(120, 84) self.fc3 = nn.Linear(84, 10) def forward(self, x): # Max pooling over a (2, 2) window x = F.max_pool2d(F.relu(self.conv1(x)), (2, 2)) # If the size is a square, you can specify with a single number x = F.max_pool2d(F.relu(self.conv2(x)), 2) x = torch.flatten(x, 1) # flatten all dimensions except the batch dimension x = F.relu(self.fc1(x)) x = F.relu(self.fc2(x)) x = self.fc3(x) return xnet = Net()print(net):warning:: torch.nnåªæ”¯æŒbatchæ•°æ®ï¼Œä¸æ”¯æŒå•å¸§æ•°æ®ã€‚æ¯”å¦‚ nn.Conv2d çš„è¾“å…¥åº”ä¸ºä¸€ä¸ª4ç»´Tensor: Batch_size x Channels x Height x Width. å¦‚æœè¦è¾“å…¥å•å¸§çš„æ•°æ®ï¼Œåº”è¯¥ä½¿ç”¨input.unsqueeze(0)æ¥è½¬åŒ–æˆä¸€ä¸ªâ€œä¼ªâ€batchæ•°æ®ã€‚æ¨¡å‹è®­ç»ƒè®¡ç®—lossï¼Œåå‘ä¼ æ’­ï¼Œå‚æ•°æ›´æ–°ã€‚å‚è€ƒå®˜æ–¹ç¤ºä¾‹import torch.optim as optimimport torch.nn as nn# create your optimizeroptimizer = optim.SGD(net.parameters(), lr=0.01)criterion = nn.CrossEntropyLoss()# in your training loop:optimizer.zero_grad() # zero the gradient buffersoutput = model(input)loss = criterion(output, target)loss.backward()optimizer.step() # Do the updateä¼˜åŒ–å™¨ä½¿ç”¨å‚è€ƒå®˜æ–¹ç¤ºä¾‹import torch.optimoptimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.9)optimizer = optim.Adam([var1, var2], lr=0.0001)å›ºå®šéƒ¨åˆ†å‚æ•°model.fc.requires_grad = Falseoptimizer = optim.SGD(filter(lambda p: p.requires_grad, net.parameters()), lr=0.1)å¦‚æœåç»­éœ€è¦å†å¯¹è¿™äº›å±‚è¿›è¡Œè®­ç»ƒï¼Œåˆ™å¯ä»¥é€šè¿‡model.fc.requires_grad = Trueoptimizer.add_param_group({&#39;params&#39;: net.fc2.parameters()})ä¸ºä¸åŒå‚æ•°è®¾å®šä¸åŒçš„å­¦ä¹ è§„åˆ™ä¸ºä¼˜åŒ–å™¨ä¼ å…¥ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºå­—å…¸çš„è¿­ä»£å™¨ã€‚æ¯ä¸ªå­—å…¸å…ƒç´ å¿…é¡»åŒ…å«paramsé”®å€¼ä»¥æŒ‡å®šå¾…ä¼˜åŒ–çš„å‚æ•°ã€‚optim.SGD([ {&#39;params&#39;: model.base.parameters()}, {&#39;params&#39;: model.classifier.parameters(), &#39;lr&#39;: 1e-3} ], lr=1e-2, momentum=0.9)è¿™ä»£è¡¨model.baseå‚æ•°ä½¿ç”¨1e-2å­¦ä¹ ç‡ï¼Œmodel.classifierå‚æ•°çš„å­¦ä¹ ç‡ç”±äºé‡å†™ï¼Œä¼šä½¿ç”¨1e-3ï¼›momentum = 0.9ä¸ºäºŒè€…å…¬ç”¨ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆçŸ¥é“æˆ‘ä»¬çš„æ¨¡å‹æœ‰å“ªäº›æ¨¡å—ï¼Œå¯¹åº”å“ªäº›å‚æ•°å‘¢ï¼Ÿå¯ä»¥åˆ°æ¨¡å‹çš„å®šä¹‰å¤„çœ‹ä¸€ä¸‹ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥print(model)è¾“å‡ºçœ‹ä¸€ä¸‹ã€‚ä¸‹é¢ä»¥torchvisionè‡ªå¸¦çš„ResNet18ä¸ºä¾‹ï¼Œå±•ç¤ºä¸€ä¸‹å¦‚ä½•è®©ä½¿å¾—æœ€åçš„åˆ†ç±»fcå±‚å’Œç½‘ç»œå‰ç«¯å‚æ•°ä½¿ç”¨ä¸åŒçš„å­¦ä¹ ç‡ã€‚å‚è€ƒCSDN-Pytorchä¸­ï¼ŒåŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡ã€ä¸åŒå±‚è®¾ç½®ä¸åŒå­¦ä¹ ç‡å’Œå›ºå®šæŸäº›å±‚è®­ç»ƒçš„æ–¹æ³•from torch import nn, optimimport torchvisiondef group_params_v1(model): cls_params = [] for name, mod in model.named_modules(): if type(mod) == nn.Linear: cls_params += mod.parameters() # else: x ï¼æ³¨æ„model.modules()æ˜¯é€’å½’éå†çš„ï¼Œæ•…ä¸èƒ½ç›´æ¥ä½¿ç”¨elseåˆ†æ”¯æ¥è·å–éfcå±‚çš„å‚æ•° # filter(function, iterable): è¿”å›ç”±&amp;lt;iterable&amp;gt;ä¸­ç¬¦åˆæ¡ä»¶&amp;lt;function&amp;gt;çš„å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ # list(map(id, cls_params)): è¿”å›å­˜æ”¾cls_paramså‚æ•°çš„å†…å­˜åœ°å€ base_params = filter(lambda x:id(x) not in list(map(id, cls_params)), model.parameters()) return base_params, cls_paramsdef group_params_v2(model): params_dict = dict(model.named_parameters()) cls_param_names = { name for name, param in model.named_parameters() if &quot;fc&quot; in name and param.requires_grad } base_param_names = params_dict.keys() - cls_param_names # print(cls_param_names, base_param_names) base_params = (params_dict[n] for n in sorted(base_param_names)) cls_params = (params_dict[n] for n in sorted(cls_param_names)) return base_params, cls_paramsmodel = torchvision.models.resnet18(pretrained=True)print(model) # å¯ä»¥çœ‹åˆ°æœ€åä¸€å±‚ä¸ºfcå±‚: (fc): Linear(in_features=512, out_features=1000, bias=True)# base_params, cls_params = group_params_v1(model)base_params, cls_params = group_params_v2(model)optimizer = optim.SGD( [ {&#39;params&#39;: base_params, &#39;lr&#39;: 0.1}, {&#39;params&#39;: cls_params, &#39;lr&#39;: 0.01} ], momentum=0.9)ä½¿ç”¨schedulerä»¥å¸¸ç”¨çš„StepLRä¸ºä¾‹ï¼Œå…¶å®šä¹‰åŠä½¿ç”¨æ–¹æ³•ä¸ºfrom torch.optim import lr_scheduler# StepLR: https://pytorch.org/docs/stable/optim.html#torch.optim.lr_scheduler.StepLRscheduler = lr_scheduler.StepLR(optimizer, step_size=30, gamma=0.1)# MultiStepLR: https://pytorch.org/docs/stable/optim.html#torch.optim.lr_scheduler.MultiStepLRscheduler = lr_scheduler.MultiStepLR(optimizer, milestones, gamma=0.1)for epoch in range(100): train(...) validate(...) scheduler.step() # Learning rate scheduling should be applied after optimizerâ€™s updateè·å–ä¼˜åŒ–å™¨ä¿¡æ¯å‚è€ƒ# === æ€»è§ˆ === #print(optimizer)# === output === #SGD (Parameter Group 0 dampening: 0 lr: 0.01 momentum: 0.9 nesterov: False weight_decay: 0)# è·å–å­¦ä¹ ç‡optimizer.param_groups[0][&#39;lr&#39;]ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹ä½¿ç”¨å•GPUè®­ç»ƒæ¨¡å‹å‚è€ƒå®˜æ–¹ç¤ºä¾‹device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;)# print(device)model.to(device) # or model.cuda()input = input.to(device) # or input = input.cuda()ä½¿ç”¨å¤šGPUåˆ†å¸ƒå¼è®­ç»ƒå‚è€ƒå®˜æ–¹ç¤ºä¾‹if torch.cuda.device_count() &amp;gt; 1: print(&quot;Let&#39;s use&quot;, torch.cuda.device_count(), &quot;GPUs!&quot;) # dim = 0 [30, xxx] -&amp;gt; [10, ...], [10, ...], [10, ...] on 3 GPUs model = nn.DataParallel(model)model.to(device)for data in data_loader: input = data.to(device) output = model(input) print(&quot;Outside: input size&quot;, input.size(), &quot;output_size&quot;, output.size())å½“åˆ†å¸ƒå¼è®­ç»ƒæ—¶ï¼ŒDataParallelè‡ªåŠ¨å°†è¾“å…¥æ•°æ®åˆ†é…ç»™å¤šä¸ªGPUï¼Œæ¯ä¸ªGPUè®¡ç®—å®Œæˆåå†è¿›è¡Œæ±‡æ€»è¾“å‡ºã€‚æœ‰å¤šå—å¡ï¼Œä»…æŒ‡å®šä½¿ç”¨å…¶ä¸­éƒ¨åˆ†å¡ï¼ˆå¯è§ï¼‰ï¼Œå¯é€šè¿‡ï¼šCUDA_VISIBLE_DEVICES=0,1 python train.pyä½¿ç”¨visdomæŸ¥çœ‹æ•°æ®å¯å‚è€ƒvisdomä½¿ç”¨ä½¿ç”¨tensorboardæŸ¥çœ‹æ•°æ®å¯å‚è€ƒtensorboardä½¿ç”¨æ¨¡å‹ä¿å­˜ä¸åŠ è½½å‚è€ƒå®˜æ–¹ç¤ºä¾‹torch.save()and torch.load() use Pythonâ€™s pickle by default.ä¿å­˜å’ŒåŠ è½½ tensors&amp;gt;&amp;gt;&amp;gt; t = torch.tensor([1., 2.])&amp;gt;&amp;gt;&amp;gt; torch.save(t, &#39;tensor.pt&#39;) # save with a â€˜.ptâ€™ or â€˜.pthâ€™ extension&amp;gt;&amp;gt;&amp;gt; torch.load(&#39;tensor.pt&#39;)tensor([1., 2.])ä¿å­˜å’ŒåŠ è½½å¤šä¸ªtensors&amp;gt;&amp;gt;&amp;gt; d = {&#39;a&#39;: torch.tensor([1., 2.]), &#39;b&#39;: torch.tensor([3., 4.])}&amp;gt;&amp;gt;&amp;gt; torch.save(d, &#39;tensor_dict.pt&#39;)&amp;gt;&amp;gt;&amp;gt; torch.load(&#39;tensor_dict.pt&#39;){&#39;a&#39;: tensor([1., 2.]), &#39;b&#39;: tensor([3., 4.])}ä¿å­˜å’ŒåŠ è½½æ¨¡å‹å‚æ•°ä¸€ä¸ªmoduleçš„state dictåŒ…å«ç€ all of its parameterså’Œpersistent buffersbn = torch.nn.BatchNorm1d(3, track_running_stats=True)&amp;gt;&amp;gt;&amp;gt; bn.state_dict()OrderedDict([(&#39;weight&#39;, tensor([1., 1., 1.])), (&#39;bias&#39;, tensor([0., 0., 0.])), (&#39;running_mean&#39;, tensor([0., 0., 0.])), (&#39;running_var&#39;, tensor([1., 1., 1.])), (&#39;num_batches_tracked&#39;, tensor(0))])ç®€å•ç¤ºä¾‹&amp;gt;&amp;gt;&amp;gt; torch.save(bn.state_dict(), &#39;bn.pt&#39;)&amp;gt;&amp;gt;&amp;gt; bn_state_dict = torch.load(&#39;bn.pt&#39;) # load state dict from its file&amp;gt;&amp;gt;&amp;gt; new_bn = torch.nn.BatchNorm1d(3, track_running_stats=True)&amp;gt;&amp;gt;&amp;gt; new_bn.load_state_dict(bn_state_dict) # restore the state dict to a new module &amp;lt;All keys matched successfully&amp;gt;custom modules# A module with two linear layers&amp;gt;&amp;gt;&amp;gt; class MyModule(torch.nn.Module): def __init__(self): super(MyModule, self).__init__() self.l0 = torch.nn.Linear(4, 2) self.l1 = torch.nn.Linear(2, 1) def forward(self, input): out0 = self.l0(input) out0_relu = torch.nn.functional.relu(out0) return self.l1(out0_relu)&amp;gt;&amp;gt;&amp;gt; m = MyModule()&amp;gt;&amp;gt;&amp;gt; m.state_dict()OrderedDict([(&#39;l0.weight&#39;, tensor([[ 0.1400, 0.4563, -0.0271, -0.4406], [-0.3289, 0.2827, 0.4588, 0.2031]])), (&#39;l0.bias&#39;, tensor([ 0.0300, -0.1316])), (&#39;l1.weight&#39;, tensor([[0.6533, 0.3413]])), (&#39;l1.bias&#39;, tensor([-0.1112]))])&amp;gt;&amp;gt;&amp;gt; torch.save(m.state_dict(), &#39;mymodule.pt&#39;)&amp;gt;&amp;gt;&amp;gt; m_state_dict = torch.load(&#39;mymodule.pt&#39;)&amp;gt;&amp;gt;&amp;gt; new_m = MyModule()&amp;gt;&amp;gt;&amp;gt; new_m.load_state_dict(m_state_dict)&amp;lt;All keys matched successfully&amp;gt;ä¿å­˜å’ŒåŠ è½½ä¸€ä¸ªé€šç”¨çš„checkpointå‚è€ƒçŸ¥ä¹# savetorch.save({ &#39;epoch&#39;: epoch, &#39;model_state_dict&#39;: model.state_dict(), &#39;optimizer_state_dict&#39;: optimizer.state_dict(), &#39;loss&#39;: loss, ... }, PATH)# loadcheckpoint = torch.load(PATH)model.load_state_dict(checkpoint[&#39;model_state_dict&#39;])optimizer.load_state_dict(checkpoint[&#39;optimizer_state_dict&#39;])epoch = checkpoint[&#39;epoch&#39;]loss = checkpoint[&#39;loss&#39;]ä½•æ—¶éœ€è¦è‡ªå·±é‡è½½load_state_dict()?TODOPytorchç¢ç¢å¿µPytorchçš„TensorTensoråˆå§‹åŒ–data = [[1, 2],[3, 4]]x_data = torch.tensor(data)shape = (2, 3)rand_tensor = torch.rand(shape)ones_tensor = torch.ones(shape)zeros_tensor = torch.zeros(shape)Tensorå’Œnumpy arrayç›¸äº’è½¬åŒ–# from numpy array to tensortensor = torch.from_numpy(np_array)# from tensor to numpy arraynp_array = tensor.numpy()Pytorchä½¿ç”¨GPUæ—¶æ­£ç¡®æµ‹è¯•æ—¶é—´å½“ä½¿ç”¨GPUè¿ç®—æ—¶ï¼Œåœ¨è®¡æ—¶æ—¶é¡»ä½¿ç”¨torch.cuda.synchronize()start = time.time()result = model(input)torch.cuda.synchronize()end = time.time()å‚è€ƒ1, å‚è€ƒ2module.named_x()å‚è€ƒnamed_modules()ï¼Œnamed_children()ä¸named_parmameters()ä¸‰è€…å‡è¿”å›ä¸€ä¸ªliteratorã€‚ä¸Šdemoï¼šimport torchimport torch.nn as nn class ToyModel(nn.Module): def __init__(self): super().__init__() self.fc1 = nn.Linear(3, 4) self.sequence = nn.Sequential( nn.Linear(5, 4), nn.ReLU(), )model = ToyModel() named_modules()é€’å½’è¿”å›æ‰€æœ‰çš„moduleï¼šfor name, mod in model.named_modules(): print(name, mod)&#39;&#39;&#39;out ToyModel( (fc1): Linear(in_features=3, out_features=4, bias=True) (sequence): Sequential( (0): Linear(in_features=5, out_features=4, bias=True) (1): ReLU() ))fc1 Linear(in_features=3, out_features=4, bias=True)sequence Sequential( (0): Linear(in_features=5, out_features=4, bias=True) (1): ReLU())sequence.0 Linear(in_features=5, out_features=4, bias=True)sequence.1 ReLU()&#39;&#39;&#39; named_children()è¿”å›ç¬¬ä¸€ä»£module (immediate children module)ï¼šfor name, child in model.named_children(): print(name, child)&#39;&#39;&#39;outfc1 Linear(in_features=3, out_features=4, bias=True)sequence Sequential( (0): Linear(in_features=5, out_features=4, bias=True) (1): ReLU())&#39;&#39;&#39; named_parameters()è¿”å›æ‰€æœ‰moduleçš„parameterï¼šfor name, param in model.named_parameters(): print(name, param.shape)&#39;&#39;&#39;outfc1.weight torch.Size([4, 3])fc1.bias torch.Size([4])sequence.0.weight torch.Size([4, 5])sequence.0.bias torch.Size([4])&#39;&#39;&#39;å¸¸ç”¨ä»£ç æ®µå‚è€ƒPyTorchå¸¸ç”¨ä»£ç æ®µå…¶ä»– ä»torch tensorä¸­å–å€¼ï¼štorch_tensor.item() æ³¨æ„.item()åªèƒ½ä»å•ä¸ªçš„torch tensorä¸­å–å€¼ï¼Œå¦‚éœ€è¦ä»torch tensor listä¸­å–å€¼ï¼Œå¯ä½¿ç”¨ [tensor.item() for tensor in tensor_list] DEFINING NEW AUTOGRAD FUNCTIONS å®šä¹‰torch.autograd.Functionçš„å­ç±»ï¼Œè‡ªå·±å®šä¹‰æŸäº›æ“ä½œï¼Œä¸”å®šä¹‰åå‘æ±‚å¯¼å‡½æ•° EXTENDING TORCHSCRIPT WITH CUSTOM C++ OPERATORS è·å–æ•°æ®ç±»å‹è¯¦ç»†ä¿¡æ¯ å‚è€ƒ æµ®ç‚¹ç±»å‹ï¼štorch.finfo(dtype)ï¼Œå¦‚ print(torch.finfo(torch.float32))# finfo(resolution=1e-06, min=-3.40282e+38, max=3.40282e+38, eps=1.19209e-07, tiny=1.17549e-38, dtype=float32) æ•´å‹ï¼štorch.iinfo(dtype)ï¼Œå¦‚ print(torch.iinfo(torch.int8))# iinfo(min=-128, max=127, dtype=int8) bit shift è´Ÿå€¼ç§»ä½æ˜¯ä¸€ç§æœªå®šä¹‰çš„è¡Œä¸ºã€‚åœ¨åŸç”Ÿpythonä¸­ï¼Œä¼šValueError: negative shift countï¼Œä½†åœ¨Pytorchä¸­æ— æŠ¥é”™ä¿¡æ¯ï¼Œä½†ä¼šäº§ç”Ÿé¢„æœŸä¹‹å¤–çš„ç»“æœï¼Œå½“æ¶‰åŠç§»ä½è¿ç®—æ—¶éœ€è¦æ³¨æ„ã€‚å¦‚ a = torch.tensor(8) # dtype = torch.int64 (default) print(a &amp;gt;&amp;gt; 2) # 2 print(a &amp;lt;&amp;lt; -2) # 0 !!! è·å–æ¨¡å‹æ‰€åœ¨çš„device model = Model() # device = model.device() # WRONG. ==&amp;gt; &#39;Model&#39; object has no attribute &#39;device&#39;device = next(model.parameters()).device # &#39;cpu&#39; or &#39;cuda:0&#39; è¸©å‘ ValueError: canâ€™t optimize a non-leaf Tensor ä½¿ç”¨ä¸‹é¢çš„codedevice = &#39;cuda&#39; if torch.cuda.is_available() else &#39;cpu&#39;scales = nn.Parameter(torch.ones(in_channels), requires_grad=True)scales = scales.to(device)optimizer = torch.optim.SGD([scales], lr=0.01, momentum=0.9)ä¼šæŠ¥é”™ï¼šValueError: can&#39;t optimize a non-leaf Tensoræ­£ç¡®çš„ç”¨æ³•æ˜¯ï¼šdevice = &#39;cuda&#39; if torch.cuda.is_available() else &#39;cpu&#39;equalize_scales = nn.Parameter(torch.ones(in_channels), requires_grad=True)scale_optimizer = torch.optim.SGD([equalize_scales], lr=0.01, momentum=0.9)scales = scales.to(device)" }, { "title": "ä¸‰é˜¶é­”æ–¹å¤åŸæ–¹æ³•", "url": "/posts/%E4%B8%89%E9%98%B6%E9%AD%94%E6%96%B9%E5%A4%8D%E5%8E%9F%E6%96%B9%E6%B3%95/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, ä¼‘é—²", "tags": "ä¼‘é—², è½¬è½½", "date": "2021-02-07 21:31:00 +0800", "snippet": " ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·@å°ç‹¼å•Šå°ç‹¼çš„é­”æ–¹é‚£ç‚¹äº‹ä¸“æ ã€‚ä¾æ¬¡åšå®Œä¸‹é¢è¿™å…«æ­¥ï¼Œé­”æ–¹å°±èƒ½å¤åŸå•¦ğŸ¥³ï¼Œè¦æƒ³ç†Ÿç»ƒå¾—éœ€è¦å¤šå¤šç»ƒä¹ ã€‚:one:ã€åˆçº§ç¯‡ã€‘ï¼ˆä¸€ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”é­”æ–¹æ¦‚è¿°:two:ã€åˆçº§ç¯‡ã€‘ï¼ˆäºŒï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”åº•é¢åå­—:three:ã€åˆçº§ç¯‡ã€‘ï¼ˆä¸‰ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”åº•å±‚è¿˜åŸ å·¦å³æ‰‹å…¬å¼åˆé‡ï¼šå³æ‰‹å…¬å¼ï¼šURU&#39;R&#39;ï¼Œå·¦æ‰‹å…¬å¼ï¼šU&#39;L&#39;UL(å³æ‰‹å…¬å¼çš„é•œåƒå…¬å¼):four:ã€åˆçº§ç¯‡ã€‘ï¼ˆå››ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”ä¸­å±‚è¿˜åŸ å·¦å³æ‰‹å…¬å¼å˜å½¢1ï¼šï¼ˆå·¦æ‰‹å…¬å¼+é€†æ—¶é’ˆæ—‹è½¬90Â°+å³æ‰‹å…¬å¼ï¼‰ or ï¼ˆå³æ‰‹å…¬å¼+é¡ºæ—¶é’ˆæ—‹è½¬90Â°+å·¦æ‰‹å…¬å¼ï¼‰:five:ã€åˆçº§ç¯‡ã€‘ï¼ˆäº”ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”é¡¶é¢åå­— å·¦å³æ‰‹å…¬å¼å˜å½¢2ï¼šF + å³æ‰‹å…¬å¼ + Fâ€™ å°é»„ç‚¹ -&amp;gt; ä¸€å­—é©¬ -&amp;gt; å°æ‹è§’ -&amp;gt; åå­—æ¶ :six:ã€åˆçº§ç¯‡ã€‘ï¼ˆå…­ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”é¡¶é¢è¿˜åŸ å°é±¼å…¬å¼åˆç›¸é‡ï¼šå³æ‰‹å°é±¼å…¬å¼ï¼šRUR&#39;URUUR&#39; å¦‚æœæ˜¯åŸºæœ¬å°é±¼æƒ…å†µï¼Œåˆ™ç›´æ¥è¿ç”¨å·¦å³æ‰‹å°é±¼å…¬å¼å³å¯è¿˜åŸï¼› å¦‚æœæ˜¯éåŸºæœ¬å°é±¼æƒ…å†µï¼Œåˆ™è¿ç”¨â€œ2å‰4å·¦â€æ‘†æ”¾è§„åˆ™å°†é­”æ–¹æ‘†åˆ°æ­£ç¡®çš„æœå‘ï¼Œç„¶åä½¿ç”¨å³æ‰‹å°é±¼å…¬å¼è½¬åŒ–ä¸ºåŸºæœ¬å°é±¼æƒ…å†µï¼Œå³å¯ä½¿ç”¨å·¦å³æ‰‹å°é±¼å…¬å¼è¿˜åŸã€‚ :seven:ã€åˆçº§ç¯‡ã€‘ï¼ˆä¸ƒï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”é¡¶è§’è¿˜åŸ å·¦å³æ‰‹å…¬å¼å˜å½¢3ï¼š U (U) R Uâ€™ (Uâ€™) Râ€™ (F2) + Uâ€™ (Uâ€™) Lâ€™ U (U) L (Fâ€™2) å…¬å¼è¾ƒé•¿ï¼Œå¯çœ‹ä½œæ˜¯å·¦å³æ‰‹å…¬å¼çš„åŸºç¡€ä¸Šï¼Œé¡¶å±‚æ¯æ¬¡è½¬ä¸¤ä¸‹ï¼Œæœ€ååˆå¤šäº†è½¬ä¸¤æ¬¡â€œFâ€çš„æ­¥éª¤ï¼ˆåŠ ç²—çš„å­—ä½“å³ä¸ºå·¦å³æ‰‹å…¬å¼ï¼‰ :eight:ã€åˆçº§ç¯‡ã€‘ï¼ˆå…«ï¼‰æœ€ç®€å•çš„ä¸‰é˜¶é­”æ–¹å…¥é—¨æ•™ç¨‹â€”â€”é¡¶æ£±è¿˜åŸ å°é±¼å…¬å¼å˜å½¢2ï¼š é¡ºæ—¶é’ˆï¼šå³æ‰‹å°é±¼+é¡ºæ—¶é’ˆæ—‹è½¬90Â°+å·¦æ‰‹å°é±¼ï¼›é€†æ—¶é’ˆï¼šå·¦æ‰‹å°é±¼+é€†æ—¶é’ˆæ—‹è½¬90Â°+å³æ‰‹å°é±¼" }, { "title": "markdown cheat sheet", "url": "/posts/markdown-cheat-sheet/", "categories": "æœ‰è¶£/æœ‰ç”¨çš„èµ„æ–™, cheat sheets", "tags": "cheat sheets, è½¬è½½", "date": "2021-02-05 22:31:00 +0800", "snippet": "é•‡æ¥¼ï¼šæ²¡æœ‰ä»€ä¹ˆæ¯”Markdownå®˜æ–¹æ•™ç¨‹æ›´æ‡‚Markdown.Markdown emoji:point_right:See this github repo: ikatyang/emoji-cheat-sheetand thisï¼šrxaviers/7360908 å¯ä»¥å…ˆåˆ°è¿™é‡Œæœå…³é”®è¯ï¼Œæ‰¾åˆ°å›¾æ ‡ï¼Œç„¶ååˆ°è¿™é‡Œç›´æ¥æœå›¾æ ‡å¾—åˆ°markdownä»£ç ã€‚ æœ‰çš„emojiå› ä¸ºå„ç§åŸå› åœ¨ç›®å‰çš„markdownä¸­ä¸æ”¯æŒï¼Œå¯ä»¥åœ¨è¿™é‡Œæœç´¢ï¼Œè·³è¿‡markdownç¼–ç ï¼Œç›´æ¥å¤åˆ¶è¡¨æƒ…ã€‚å¦‚è¿™ä¸ª:partying_face: ğŸ¥³å…¶ä»–ç»éªŒç§¯ç´¯ä¸ºå…¬å¼æ·»åŠ ç¼–å·åœ¨å…¬å¼æœ«å°¾åŠ å…¥\\tag{id}ï¼Œå¦‚ $$ x+y = z \\tag{1} $$å¯æ¸²æŸ“ä¸º\\[x + y = z \\tag{1}\\]æ˜¾ç¤ºgithubé¡¹ç›®staræ•°ç›®å‚è€ƒç±»ä¼¼äºæ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼ˆæˆ–è€…æœ¬è´¨å°±æ˜¯ï¼‰ï¼Œæ–¹æ³•æ˜¯ï¼š![GitHub stars](https://img.shields.io/github/stars/&amp;lt;usr_name&amp;gt;/&amp;lt;repo_name&amp;gt;.svg?style=flat&amp;amp;label=Star)æ¯”å¦‚æˆ‘çš„ä¸€ä¸ªstarå°‘å¾—å¯æ€œçš„github repo" }, { "title": "githubæ— æ³•åŠ è½½å¤´åƒå’Œå›¾ç‰‡", "url": "/posts/%E8%A7%A3%E5%86%B3github%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E5%A4%B4%E5%83%8F%E5%92%8C%E5%9B%BE%E7%89%87/", "categories": "å®è·µ, å®è·µæ‚è®°", "tags": "github, troubleshooting", "date": "2021-02-04 09:38:00 +0800", "snippet": "å‚è€ƒè¿™ä¸€ç¯‡ï¼Œ2.3 ä¿®æ”¹ hostsã€‚æµ‹è¯•æœ‰æ•ˆã€‚ æ³¨ï¼šä¸ä¿è¯é•¿æœŸæœ‰æ•ˆï¼Œå¦‚æœå¤±æ•ˆï¼Œè¯·ä»¥åŸåšå®¢æ›´æ–°ä¸ºå‡†ã€‚Windowsç³»ç»Ÿçš„hostsæ–‡ä»¶åœ¨C:\\Windows\\System32\\drivers\\etc\\hostsï¼Œæ‰“å¼€ååœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š# GitHub Start 140.82.113.3 github.com140.82.114.20 gist.github.com151.101.184.133 assets-cdn.github.com151.101.184.133 raw.githubusercontent.com199.232.28.133 raw.githubusercontent.com 151.101.184.133 gist.githubusercontent.com151.101.184.133 cloud.githubusercontent.com151.101.184.133 camo.githubusercontent.com199.232.96.133 avatars.githubusercontent.com151.101.184.133 avatars0.githubusercontent.com199.232.68.133 avatars0.githubusercontent.com199.232.28.133 avatars0.githubusercontent.com 199.232.28.133 avatars1.githubusercontent.com151.101.184.133 avatars1.githubusercontent.com151.101.108.133 avatars1.githubusercontent.com151.101.184.133 avatars2.githubusercontent.com199.232.28.133 avatars2.githubusercontent.com151.101.184.133 avatars3.githubusercontent.com199.232.68.133 avatars3.githubusercontent.com151.101.184.133 avatars4.githubusercontent.com199.232.68.133 avatars4.githubusercontent.com151.101.184.133 avatars5.githubusercontent.com199.232.68.133 avatars5.githubusercontent.com151.101.184.133 avatars6.githubusercontent.com199.232.68.133 avatars6.githubusercontent.com151.101.184.133 avatars7.githubusercontent.com199.232.68.133 avatars7.githubusercontent.com151.101.184.133 avatars8.githubusercontent.com199.232.68.133 avatars8.githubusercontent.com199.232.96.133 avatars9.githubusercontent.com# GitHub Endå¦‚æœå› æ²¡æœ‰ä¿®æ”¹æƒé™è€Œæ— æ³•ä¿å­˜ï¼Œå¯ä»¥å°†hostsæ–‡ä»¶å¤åˆ¶ä¸€ä»½åˆ°æ¡Œé¢ï¼Œä¿®æ”¹ä¹‹åï¼Œå¤åˆ¶å›å»è¦†ç›–åŸæ–‡ä»¶ã€‚" }, { "title": "Jekyllåšå®¢æ­å»ºæµç¨‹è®°å½•", "url": "/posts/jekell%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95/", "categories": "Blog_tutorial", "tags": "getting started", "date": "2021-02-03 20:55:00 +0800", "snippet": "ç¯å¢ƒé…ç½®å®‰è£…Ruby, Bundler.ï¼ˆçœ‹è¿™é‡Œï¼Œæ›´è¯¦ç»†çš„çœ‹è¿™é‡Œï¼‰æŒ‘é€‰jekyllæ¨¡æ¿æ¥è¿™é‡ŒæŒ‘é€‰ä¸­æ„çš„æ¨¡æ¿ã€‚æ¨¡æ¿ä¸€èˆ¬ä¼šæœ‰é…ç½®çš„è¯´æ˜ï¼Œå¯ä»¥æŒ‰ç…§æ¨¡æ¿è¯´æ˜ä¸€æ­¥æ­¥æ¥ï¼ŒæŠŠæ¨¡æ¿ç”¨èµ·æ¥ã€‚æ¨¡æ¿é…ç½®(ä»¥chirpyä¸ºä¾‹)chirpyæ¨¡æ¿é¡µï¼Œç‚¹å‡»homepageè·³è½¬åˆ°å…¶å¯¹åº”çš„githubé¡µï¼ŒæŒ‰ç…§readmeé…ç½®å³å¯ã€‚ä»¥ä¸‹ç®€è¦è®°å½•ä¸‹å®é™…é…ç½®chirpyçš„è¿‡ç¨‹ã€‚ ç‚¹å‡»use the starter template åæ–°å»ºä¸€ä¸ª&amp;lt;user_name&amp;gt;.github.ioçš„ä»“åº“; cloneä¸‹æ¥; ä¿®æ”¹_config.yml åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼šbundleï¼› pushåˆ°è¿œç¨‹ï¼š git add .git commit -m &#39;first commit&#39;git push origin main # mainæ˜¯å½“å‰åˆ†æ”¯åç§° pushåä¼šåœ¨githubçš„actionçœ‹åˆ°è¿›ç¨‹ï¼Œactionè¿›ç¨‹æˆåŠŸå®Œæˆåä¼šåœ¨githubåˆ†æ”¯ä¸­çœ‹åˆ°gh-pagesåˆ†æ”¯ï¼› æ³¨æ„è¿™ä¸€æ­¥ï¼Œåˆ°repoçš„settingé‡Œçœ‹çœ‹actionæƒé™æ˜¯å¦å¤Ÿ å‚è€ƒ æ›´æ”¹publishing source è¿›å…¥ https://&amp;lt;user_name&amp;gt;.github.ioï¼Œæ­¤æ—¶ä¸»é¡µå·²åˆå§‹é…ç½®å®Œæˆäº†ã€‚æ¨¡æ¿ä½¿ç”¨æ·»åŠ blog åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å¢åŠ _postsæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­æŒ‰ç…§æ·»åŠ markdownæ–‡ä»¶ã€‚ å»ºè®®æ­¤å¤„æ·»åŠ æ¨¡æ¿æœ¬èº«æä¾›çš„å‡ ä¸ªç¤ºä¾‹markdownï¼Œå®ƒä»¬ä¹Ÿæ˜¯æ—¥åä½¿ç”¨è¯¥æ¨¡æ¿çš„é‡è¦å‚è€ƒã€‚ pushåˆ°è¿œç¨‹ git add .git commit -m &#39;add blogs&#39;git push origin main ç­‰å¾…github actionï¼ˆactionæœ‰æ—¶ä¼šæœ‰å»¶è¿Ÿï¼Œä¸ä¼šç«‹å³å‡ºç°ï¼‰ åˆ·æ–°https://&amp;lt;user_name&amp;gt;.github.ioï¼ŒæŸ¥çœ‹ç½‘é¡µç«¯æ˜¯å¦å‘ç”Ÿå¯¹åº”æ›´æ”¹ï¼ˆå¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œæˆ–ç¼“å­˜é—®é¢˜ï¼ŒæŒ‰ctrl + f5æ¸…ç©ºç¼“å­˜ã€‚ï¼‰ æœ¬åœ°è°ƒè¯•åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œjekyll sä¿®æ”¹å¯¹åº”æ–‡ä»¶åï¼Œåˆ·æ–°é¡µé¢å¯å³æ—¶çœ‹åˆ°æ›´æ”¹ã€‚å¤ªæ–¹ä¾¿å•¦ã€‚ è‹¥æœ¬åœ°è°ƒè¯•ï¼Œåˆ™éœ€è¦ä¿è¯è·¯å¾„åä¸­æ— ä¸­æ–‡ï¼å¦åˆ™æœ¬åœ°é¢„è§ˆä¼šæŠ¥é”™ï¼ˆå°½ç®¡è¿œç¨‹åå¯æ­£å¸¸æ˜¾ç¤ºï¼‰ æ–‡ä»¶åä¸­å«æœ‰ä¸­æ–‡ï¼Œåˆ™å¯èƒ½æ— æ³•æ­£å¸¸è®¿é—®ï¼Œéœ€è¦åšä»¥ä¸‹ä¿®æ”¹: å‚è€ƒåœ¨blogsä¸­æ·»åŠ å›¾ç‰‡åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºassets/imgæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­æ”¾ç½®å›¾ç‰‡æ–‡ä»¶ï¼ˆæˆ–åŒ…å«å›¾ç‰‡æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼‰ï¼Œåœ¨blogä¸­å³é€šè¿‡å›¾ç‰‡æ–‡ä»¶è·¯å¾„ç´¢å¼•å›¾ç‰‡ï¼Œå¦‚![](/assets/img/20210209/unBN.jpeg)" }, { "title": "Ubuntué‡è£…ç³»ç»Ÿåé…ç½®æµç¨‹è®°å½•", "url": "/posts/ubuntu%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E8%AE%B0%E5%BD%95/", "categories": "å®è·µ, ç¯å¢ƒé…ç½®", "tags": "ubuntu", "date": "2021-01-28 14:53:00 +0800", "snippet": "ä¸‹è½½å®‰è£…åŒ…ä»¥Ubuntu 18.04ä¸ºä¾‹ï¼Œè¿›å…¥æ¸…åé•œåƒæºï¼Œé€‰æ‹©ï¼šubuntu-18.04.5-desktop-amd64.isoä¸‹è½½ã€‚åˆ¶ä½œç³»ç»Ÿç›˜ä¸é‡å¯å®‰è£…å‚è€ƒåˆ¶ä½œç³»ç»Ÿç›˜ä½¿ç”¨UltraISOã€‚ æ‰“å¼€UltraISOåï¼Œç‚¹å‡»ä¸Šè¾¹æ æ–‡ä»¶-æ‰“å¼€ï¼Œé€‰æ‹©ä¸Šé¢ä¸‹è½½å¥½çš„Ubuntuå®‰è£…é•œåƒæ–‡ä»¶ã€‚ ç‚¹å‡»ä¸Šè¾¹æ å¯åŠ¨-å†™å…¥ç¡¬ç›˜é•œåƒï¼Œåœ¨è·³å‡ºçš„çª—å£ç¡®è®¤å†™å…¥çš„ç¡¬ç›˜é©±åŠ¨å™¨ï¼ˆå¦‚è¦å†™å…¥çš„Uç›˜ï¼‰ï¼Œç‚¹å‡»å†™å…¥åç­‰å¾…å®Œæˆå³å¯ã€‚é‡å¯å®‰è£…é‡å¯ï¼Œé€‰æ‹©â€œå¯åŠ¨å…¥å£â€ã€‚å…·ä½“æ“ä½œä¸ºåœ¨å¼€æœºæ—¶æŒ‰ä¸‹(å‚è€ƒ)ï¼š Asus(åç¡•):ã€F8ã€‘éµ Acer(å®ç¢):ã€F12ã€‘éµ DELL(æˆ´å°”):ã€F12ã€‘éµ GigaByte(æŠ€å˜‰):ã€F12ã€‘éµ HP(æƒ æ™®):ã€F9ã€‘éµ MSI(å¾®æ˜Ÿ):ã€F11ã€‘éµåœ¨å¼¹å‡ºçš„ç•Œé¢é€‰æ‹©USB UEFIåè¿›å…¥å®‰è£…ç•Œé¢åï¼Œæ ¹æ®æç¤ºå®Œæˆå®‰è£…å³å¯ã€‚é‡è¦ç¯å¢ƒé…ç½®é…ç½®ç³»ç»Ÿå¯è¿œç¨‹ç™»é™†æœåŠ¡ç«¯(é…ç½®ssh)æ³¨æ„ï¼šæŒ‰ä¸‹é¢è¿™ä¸ªæ“ä½œé…ç½®åï¼Œå®¢æˆ·ç«¯å¯èƒ½ä»è¿ä¸ä¸Šï¼Œå¯å°è¯•é‡å¯ä¸€ä¸‹æœåŠ¡ç«¯ã€‚sshã€xrdpè¿œç¨‹è¿æ¥UbuntuæœåŠ¡å™¨è®¾ç½®å®¢æˆ·ç«¯ æœ€ç®€æ´åŠæ³•ï¼šä½¿ç”¨MobaXterm æ—¥å¸¸ä½¿ç”¨ï¼šVS code VS codeä½¿ç”¨ä¸­çš„ VS code Remote sshé…ç½® å®‰è£…è‹±ä¼Ÿè¾¾é©±åŠ¨ä¸cudaUbuntuä¸‹nvidia driverå’Œcudaç‰ˆæœ¬ç®¡ç†å®‰è£…ä¸é…ç½®Anacondaå¯å‚è€ƒAnacondaä½¿ç”¨å…¶ä»–å³é”®æ–°å¢æ–°å»ºæ–‡æ¡£ 18.04åˆå§‹å³é”®çš„æ–°å»ºæ–‡æ¡£ä¹ˆæœ‰äº†ï¼Œå¯ä»¥åœ¨ä¸»ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶å¤¹ä¸‹æ”¾ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè¿™æ ·å³é”®æ‰å¯ä»¥æ–°å»ºæ–‡æ¡£ã€‚å‚è€ƒå®‰è£…æœç‹—è¾“å…¥æ³•é»˜è®¤ç³»ç»Ÿä¸æ”¯æŒä¸­æ–‡è¾“å…¥æ³•ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…æ–°çš„è¾“å…¥æ³•ã€‚æ­¤å¤„ä»¥æœç‹—è¾“å…¥æ³•ä¸ºä¾‹ã€‚ å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ã€‚ æŒ‰ç…§æŒ‡å—å®‰è£…ã€‚ ä»ç³»ç»Ÿè¾“å…¥æ³•åˆ‡æ¢è‡³æœç‹—è¾“å…¥æ³•ï¼šCtrl + spaceè¾“å…¥æ³•ä¸­è‹±æ–‡åˆ‡æ¢ï¼šshift å®‰è£…Chromeè°·æ­Œè®¿é—®åŠ©æ‰‹å‚è€ƒï¼ˆæœ¬é¡µé¢æä¾›çš„ä¸‹è½½é“¾æ¥å·²å¤±æ•ˆï¼‰å‚è€ƒç®€ä¹¦-Win10å’ŒUbuntu16.04åŒç³»ç»Ÿå®‰è£…è¯¦è§£" }, { "title": "ä¸€ä¸ªè®ºæ–‡ç¬”è®°æ¡†æ¶ï¼ˆMarkdownæ ¼å¼ï¼‰", "url": "/posts/%E4%B8%80%E4%B8%AA%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0%E6%A1%86%E6%9E%B6-Markdown%E6%A0%BC%E5%BC%8F/", "categories": "ä¸“ä¸šç§¯ç´¯, æ‚è®°", "tags": "paper reading", "date": "2021-01-25 14:32:00 +0800", "snippet": "# Title## Summaryå†™å®Œç¬”è®°ä¹‹åæœ€åå¡«ï¼Œæ¦‚è¿°æ–‡ç« çš„å†…å®¹ï¼Œä»¥åæŸ¥é˜…ç¬”è®°çš„æ—¶å€™å…ˆçœ‹è¿™ä¸€æ®µã€‚æ³¨ï¼šå†™æ–‡ç« summaryåˆ‡è®°éœ€è¦é€šè¿‡è‡ªå·±çš„æ€è€ƒï¼Œç”¨è‡ªå·±çš„è¯­è¨€æè¿°ã€‚å¿Œè®³ç›´æ¥Ctrl + cåŸæ–‡ã€‚## Research Objective(s)ä½œè€…çš„ç ”ç©¶ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ## Background / Problem Statementç ”ç©¶çš„èƒŒæ™¯ä»¥åŠé—®é¢˜é™ˆè¿°ï¼šä½œè€…éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ## Method(s)ä½œè€…è§£å†³é—®é¢˜çš„æ–¹æ³•/ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¦åŸºäºå‰äººçš„æ–¹æ³•ï¼ŸåŸºäºäº†å“ªäº›ï¼Ÿ## Evaluationä½œè€…å¦‚ä½•è¯„ä¼°è‡ªå·±çš„æ–¹æ³•ï¼Ÿå®éªŒçš„setupæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿæ„Ÿå…´è¶£å®éªŒæ•°æ®å’Œç»“æœæœ‰å“ªäº›ï¼Ÿæœ‰æ²¡æœ‰é—®é¢˜æˆ–è€…å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹ï¼Ÿ## Conclusionä½œè€…ç»™å‡ºäº†å“ªäº›ç»“è®ºï¼Ÿå“ªäº›æ˜¯strong conclusions, å“ªäº›åˆæ˜¯weakçš„conclusionsï¼ˆå³ä½œè€…å¹¶æ²¡æœ‰é€šè¿‡å®éªŒæä¾›evidenceï¼Œåªåœ¨discussionä¸­æåˆ°ï¼›æˆ–å®éªŒçš„æ•°æ®å¹¶æ²¡æœ‰ç»™å‡ºå……åˆ†çš„evidenceï¼‰?## Notes(optional) ä¸åœ¨ä»¥ä¸Šåˆ—è¡¨ä¸­ï¼Œä½†éœ€è¦ç‰¹åˆ«è®°å½•çš„ç¬”è®°ã€‚## References(optional) åˆ—å‡ºç›¸å…³æ€§é«˜çš„æ–‡çŒ®ï¼Œä»¥ä¾¿ä¹‹åå¯ä»¥ç»§ç»­trackä¸‹å»ã€‚å‚è€ƒï¼šçŸ¥ä¹â€æœ‰å¥½ç”¨çš„æ–‡çŒ®ç¬”è®°å·¥å…·å—ï¼Ÿâ€ æˆ´æ™“å¤©çš„å›ç­”" }, { "title": "Dockerå­¦ä¹ ", "url": "/posts/Docker%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "docker", "date": "2021-01-20 21:55:00 +0800", "snippet": "dockeråŸç†dockeråŸç†æ¡†æ¶ç”Ÿæˆé•œåƒçš„ä¸¤ç§æ–¹å¼ é€šè¿‡Dockerfileæ„å»ºã€‚Dockerfileæ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ï¼Œå¯å‚è€ƒDockerfileæ–‡ä»¶è¯¦è§£ã€‚é€šè¿‡docker buildå‘½ä»¤æ¥ä»Dockerfileæ„å»ºé•œåƒï¼Œå¯å‚ç…§Docker build å‘½ä»¤ã€‚ docker build [OPTIONS] PATH | URL | - å…¶ä¸­OPTIONSå¯é€‰ï¼ŒPATH/URL/-é€‰å…¶ä¸€ï¼ŒæŒ‡å®šæºã€‚ç¤ºä¾‹ $ docker build . # åœ¨å½“å‰è·¯å¾„ä¸‹å¯»æ‰¾Dockerfileæ¥æ„å»º$ docker build -t name:tag . # åœ¨å½“å‰è·¯å¾„ä¸‹å¯»æ‰¾Dockerfileæ¥æ„å»ºï¼Œå¹¶ä¸ºæ„å»ºçš„é•œåƒè®¾å®šåå­—nameåŠæ ‡ç­¾tag ä»Docker Hubä¸Šç›´æ¥æ‹‰å– åœ¨Docker Hubä¸ŠæŸ¥æ‰¾å·²æœ‰çš„é•œåƒï¼Œç„¶åæ‹‰å–åˆ°æœ¬åœ°ï¼šdocker pull &amp;lt;ç”¨æˆ·å/é•œåƒå&amp;gt; é…ç½®docker å®‰è£…dockerï¼šå®˜æ–¹æ–‡æ¡£ å°†ä»“åº“ç½‘å€æ”¹ä¸ºå›½å†…çš„é•œåƒç«™ æ‰“å¼€/etc/default/dockeræ–‡ä»¶ï¼ˆéœ€è¦sudoæƒé™ï¼‰ï¼Œåœ¨æ–‡ä»¶çš„åº•éƒ¨åŠ ä¸Šä¸€è¡Œ DOCKER_OPTS=&quot;--registry-mirror=https://registry.docker-cn.com&quot; ç„¶åé‡å¯DockeræœåŠ¡ $ sudo service docker restart é¿å…æ¯æ¬¡å‘½ä»¤éƒ½è¾“å…¥sudo(å®˜æ–¹æ–‡æ¡£): # 1. Create the docker group. sudo groupadd docker # 2. Add your user to the docker group. sudo usermod -aG docker $USER # 3. Log out and log back in so that your group membership is re-evaluated. å®‰è£…nvidia-dockerï¼šå®˜æ–¹æ–‡æ¡£ç®¡ç†é•œåƒä¸å®¹å™¨é•œåƒ(image) åˆ—å‡ºæœ¬æœºçš„æ‰€æœ‰ image æ–‡ä»¶ï¼šdocker image ls åˆ é™¤ image æ–‡ä»¶ï¼šdocker rmi &amp;lt;imageName/ID&amp;gt;å®¹å™¨(container) åˆ—å‡ºæœ¬æœºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼šdocker ps åˆ—å‡ºæœ¬æœºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨ï¼š docker ps -a ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼šdocker container stop &amp;lt;containerID&amp;gt; åˆ é™¤å®¹å™¨æ–‡ä»¶ï¼šdocker rm &amp;lt;containerName/ID&amp;gt; å¯¼å‡ºå®¹å™¨ï¼šdocker export &amp;lt;OPTIONS&amp;gt; CONTAINER å¯¼å…¥å®¹å™¨ï¼šdocker import &amp;lt;OPTIONS&amp;gt; file|URL|- [REPOSITORY[:TAG]]è¿è¡Œé•œåƒ å¯¹äºéœ€è¦ä½¿ç”¨GPUçš„ç¨‹åºï¼Œéœ€è¦ä½¿ç”¨nvidia-docker runé€šè¿‡docker runå‘½ä»¤æ¥è¿è¡Œé•œåƒï¼Œå¯å‚è€ƒdocker rundocker run [OPTIONS] IMAGE [COMMAND] [ARG...]ç¤ºä¾‹1 - åŸºç¡€docker run --name &amp;lt;container_name&amp;gt; -it &amp;lt;image_name&amp;gt; # ä½¿ç”¨&amp;lt;image_name&amp;gt;é•œåƒæ¥ç”Ÿæˆä¸€ä¸ªå®¹å™¨ï¼Œå¹¶ä¸ºå…¶å‘½åä¸º&amp;lt;image_name&amp;gt;# -i, or --interactive: Keep STDIN open even if not attached# -t, or --tty: Allocate a pseudo-TTY# The -it instructs Docker to allocate a pseudo-TTY connected to the containerâ€™s stdin; creating an interactive bash shell in the containerç¤ºä¾‹2 - Mount volumedocker run --name &amp;lt;container_name&amp;gt; -v host_dir:docker_dir -it &amp;lt;image_name&amp;gt; # å°†æœ¬åœ°æ–‡ä»¶å¤¹host_dir&quot;æŒ‚è½½åˆ°&quot;å®¹å™¨çš„docker_dirä¸‹æ¯”å¦‚docker run --name &amp;lt;container_name&amp;gt; -v ${PWD}:/work -it &amp;lt;image_name&amp;gt; # å°†å½“å‰è·¯å¾„æŒ‚è½½åœ¨å®¹å™¨çš„/workç›®å½•ä¸‹# è¿›å…¥ç”Ÿæˆçš„containeråls # å³å¯åœ¨containerä¸­çœ‹åˆ°${PWD}ä¸­æ–‡ä»¶å…¶ä»– ä¿®æ”¹ Docker çš„é»˜è®¤å­˜å‚¨è·¯å¾„å‚è€ƒç½‘ä¸ŠçœŸæ˜¯å¥½å¤šdockerçš„ä¼˜ç§€æ•™ç¨‹å•Šã€‚Docker å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—Docker+VSCodeé…ç½®å±äºè‡ªå·±çš„ç‚¼ä¸¹ç‚‰Docker Volumeå…¥é—¨ç”¨æ³•è¯¦è§£Dockerå·(volume)çš„ä½¿ç”¨Docker å®è·µç®€æ˜æŒ‡å—Dockerå…¥é—¨-ç®€ä¹¦" }, { "title": "Ubuntuæ–‡ä»¶ç³»ç»Ÿ_ç¡¬ç›˜æŒ‚è½½ä¸å¸è½½", "url": "/posts/Ubuntu%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F_%E7%A1%AC%E7%9B%98%E6%8C%82%E8%BD%BD%E4%B8%8E%E5%8D%B8%E8%BD%BD/", "categories": "å®è·µ, ç¯å¢ƒé…ç½®", "tags": "ubuntu, æ–‡ä»¶ç³»ç»Ÿ", "date": "2021-01-16 16:11:00 +0800", "snippet": "åŠ¨æœºæŠŠæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç›¸å…³çŸ¥è¯†å­¦ä¹ ä¸‹ã€‚å‡ ä¸ªæœ‰ç”¨çš„å·¥å…·å‘½ä»¤ åˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰ç£ç›˜åˆ—è¡¨ï¼ˆåŒ…æ‹¬æœªæŒ‚è½½çš„ï¼‰ï¼š lsblk -f lsblkåŠ©è®°ï¼šè€å¸ˆä¸ç¦»å¼€ ç¤ºä¾‹ $ lsblk -f NAME FSTYPE LABEL UUID MOUNTPOINTsda â”œâ”€sda1 ntfs ç³»ç»Ÿä¿ç•™ 585A8E625A8E3D2E â””â”€sda2 vfat wdisk 9111-7321 /media/lab301/wdisk... å…¶ä¸­NAMEï¼šè®¾å¤‡æ–‡ä»¶åï¼ˆçœç•¥\\devç­‰å…ˆå¯¼ç›®å½•ï¼‰ï¼ŒFSTYPEï¼šæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼›UUIDï¼šå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦(Universally uniue indentifier)ï¼ŒLinuxä¼šä¸ºç³»ç»Ÿå†…æ‰€æœ‰çš„è®¾å¤‡éƒ½ç»™äºˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ ‡è¯†ç¬¦ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å¯ä»¥ç”¨æ¥æŒ‚è½½æˆ–æ˜¯ä½¿ç”¨è¿™ä¸ªè®¾å¤‡ï¼›MOUNTPOINTï¼šæŒ‚è½½ç‚¹ã€‚ lsblkä¹Ÿå¯å•ç‹¬ä½¿ç”¨ï¼Œåˆ—å‡ºå…¶ä»–ä¸€äº›ä¿¡æ¯ã€‚ ç¤ºä¾‹ $ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTsda 8:0 0 232.9G 0 disk â”œâ”€sda1 8:1 0 100M 0 part â””â”€sda2 8:2 0 232.8G 0 part /media/lab301/wdisk... å…¶ä¸­RMï¼šæ˜¯å¦ä¸ºå¯å¸è½½è®¾å¤‡ï¼ŒSIZEï¼šå®¹é‡ï¼ŒROï¼šæ˜¯å¦ä¸ºåªè¯»è®¾å¤‡ï¼ŒTYPEï¼šæ˜¯ç£ç›˜diskæˆ–åˆ†åŒºpartç­‰ï¼Œ å…¶ä»–å¯æŸ¥çœ‹ç£ç›˜ä¿¡æ¯çš„å‘½ä»¤ï¼šsudo fdisk -lï¼Œdf -h æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å¤¹çš„å®é™…æ‰€åœ¨è®¾å¤‡ä¸æŒ‚è½½ç‚¹ï¼šdf &amp;lt;path/to/dir&amp;gt;æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ä¸å¸è½½æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿè¦é“¾æ¥åˆ°ç›®å½•æ ‘ä¸Šæ‰èƒ½è¢«æˆ‘ä»¬ä½¿ç”¨ã€‚å°†æ–‡ä»¶ç³»ç»Ÿä¸ç›®å½•æ ‘ç»“åˆçš„æ“ä½œç§°ä¸ºæŒ‚è½½ã€‚æŒ‚è½½ç‚¹ä¸€å®šæ˜¯ç›®å½•ï¼Œè¯¥ç›®å½•ä¸ºè¿›å…¥è¯¥æ–‡ä»¶ç³»ç»Ÿï¼ˆç£ç›˜åˆ†åŒºï¼‰çš„å…¥å£ã€‚æŒ‚è½½å‰æœ‰å‡ ç‚¹éœ€è¦æ˜ç¡®ï¼š å•ä¸€æ–‡ä»¶ç³»ç»Ÿä¸åº”è¯¥è¢«é‡å¤æŒ‚è½½åœ¨ä¸åŒçš„æŒ‚è½½ç‚¹ï¼ˆç›®å½•ï¼‰ä¸­ï¼› å•ä¸€ç›®å½•ä¸åº”è¯¥æŒ‚è½½å¤šä¸ªç³»ç»Ÿï¼› è¦ä½œä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ï¼Œç†è®ºä¸Šåº”è¯¥æ˜¯ç©ºç›®å½•æ‰å¯¹ã€‚å¦åˆ™ä¼šå¯¼è‡´è¯¥ç›®å½•ä¸‹å…¶ä»–æ–‡ä»¶æš‚æ—¶æ€§åœ°æ¶ˆå¤±ï¼ˆå¸è½½åä¼šé‡æ–°å‡ºç°ï¼‰ã€‚æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨mountå‘½ä»¤ã€‚å®ƒçš„ä¸€äº›ç®€å•æ“ä½œç¤ºä¾‹å¦‚ä¸‹ï¼š$ mount -a # ä¾ç…§é…ç½®æ–‡ä»¶etc/fstabçš„æ•°æ®å°†æ‰€æœ‰æœªæŒ‚è½½çš„ç£ç›˜éƒ½æŒ‚è½½ä¸Šæ¥$ mount # å½“å‰æŒ‚è½½ä¿¡æ¯$ mount &amp;lt;NAME&amp;gt; or &amp;lt;UUID&amp;gt; or &amp;lt;LABEl&amp;gt; &amp;lt;MOUNTPOINT&amp;gt; # é€šè¿‡&amp;lt;NAME&amp;gt; or &amp;lt;UUID&amp;gt; or &amp;lt;LABEl&amp;gt;ç´¢å¼•åˆ°æŸä¸€æ–‡ä»¶ç³»ç»Ÿï¼Œå°†å…¶æŒ‚è½½åˆ°MOUNTPOINTç¤ºä¾‹STEP1ï¼šåˆ›å»ºæŒ‚è½½ç‚¹ å°±æ˜¯æ–°å»ºä¸€ä¸ªç©ºç›®å½•mkdir ~/dirSTEP2ï¼šæŒ‚è½½ å°†sda2æŒ‚è½½åˆ°~/wdirã€‚æ³¨æ„å‰é¢è¦åŠ ä¸Š/devmount /dev/sdb2 ~/dirSTEP3ï¼šæŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸdf # æˆ–è€…ä½¿ç”¨lsblk ã€mountå‘½ä»¤æŸ¥çœ‹å½“å‰ç£ç›˜æŒ‚è½½æƒ…å†µæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ 1K-å— å·²ç”¨ å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹/dev/sdb2 2930134012 1450305892 1479828120 50% /home/lab301/dirè¡¨ç¤ºæŒ‚è½½æˆåŠŸã€‚å¸è½½å¸è½½æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨umountå‘½ä»¤ã€‚umount &amp;lt;NAME&amp;gt; or &amp;lt;MOUNTPOINT&amp;gt; # å°†&amp;lt;NAME&amp;gt;æˆ–è€…&amp;lt;MOUNTPOINT&amp;gt;å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿå¸è½½è®¾ç½®å¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½æ‰‹åŠ¨æŒ‚è½½çš„è¯ï¼Œæ¯æ¬¡é‡æ–°å¯åŠ¨åéœ€è¦é‡å¤æ“ä½œã€‚å¯é€šè¿‡ä¿®æ”¹/etc/fstabå®ç°å¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚/etc/fstabæ˜¯å¯åŠ¨æ—¶çš„é…ç½®æ–‡ä»¶ã€‚é¦–å…ˆä¸ºè¯¥æ–‡ä»¶å¢åŠ ä¿®æ”¹æƒé™ï¼šsudo chmod 777 /etc/fstabæ‰“å¼€è¯¥æ–‡ä»¶vi /etc/fstabåœ¨æœ€åæ·»åŠ ä¸€è¡Œï¼Œæ¯ä¸€è¡Œçš„æ ¼å¼ä¸º[è®¾å¤‡NAME/UUIDç­‰] [æŒ‚è½½ç‚¹] [æ–‡ä»¶ç³»ç»Ÿ] [æ–‡ä»¶ç³»ç»Ÿå‚æ•°] [dump] [fsck]å…¶ä¸­æ–‡ä»¶ç³»ç»Ÿå¯é€šè¿‡lsblk -f(æ‰‹åŠ¨)æŸ¥çœ‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ–‡ä»¶ç³»ç»Ÿå‚æ•°ã€dumpã€fsckä¾æ¬¡å¡«å†™defaults 0 0 å°±å¯ä»¥äº†ï¼ˆæ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒé¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼Œæ‰‹åŠ¨æ•²äº†åŠå¤©æ‰å‘ç°åŸæ¥æœ‰ç”µå­ç‰ˆâ€¦ï¼‰ç¤ºä¾‹ï¼šè¦å°† /dev/vda4è®¾ç½®ä¸ºå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½åœ¨ä¸»æ–‡ä»¶å¤¹çš„dirç›®å½•ä¸‹STEP1ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚åœ¨ /etc/fstabä¸­æŒ‰ä¸Šè¿°æ·»åŠ ä¸€è¡Œ/dev/vda4 /home/user/dir ntfs defaults 0 0 æ³¨æ„è¿™é‡ŒæŒ‚è½½ç‚¹éœ€è¦æ˜¾å¼åœ°å†™èµ·ï¼Œæ¯”å¦‚è¿™é‡Œ/home/user/æ˜¯æˆ‘çš„ä¸»æ–‡ä»¶ç›®å½•ï¼Œå†™~/,/éƒ½æ˜¯ä¸å¯¹çš„ï¼ˆåé¢çš„æµ‹è¯•è¿‡ç¨‹ä¹Ÿä¼šæç¤ºé”™è¯¯ã€‚ï¼‰STEP2ï¼šæµ‹è¯•é…ç½®ä¿®æ”¹æ˜¯å¦æ­£ç¡®ã€‚ä»¥ä¸‹ä¸¤æ­¥ä¸ºæµ‹è¯•ä¸Šè¿°æ–‡ä»¶é…ç½®æ˜¯å¦æ­£ç¡®çš„æ­¥éª¤ã€‚æµ‹è¯•å¾ˆé‡è¦ï¼å› ä¸ºè¿™ä¸ªæ–‡ä»¶å¦‚æœå†™é”™äº†ï¼Œ åˆ™ä½ çš„ Linux å¾ˆå¯èƒ½å°†æ— æ³•é¡ºåˆ©å¼€æœºå®Œæˆï¼ä¸ºäº†ä¾¿äºæµ‹è¯•ï¼Œé¦–å…ˆæŸ¥çœ‹è¯¥ç¡¬ç›˜æ˜¯å¦å·²ç»æŒ‚è½½ï¼Œå¦‚æœæŒ‚è½½äº†ï¼Œåˆ™å…ˆå°†å…¶å¸è½½$ dfFilesystem 1K-blocks Used Available Use% Mounted on/dev/vda4 1038336 32864 1005472 4% /data/xfs# ç«Ÿç„¶ä¸çŸ¥é“ä½•æ—¶è¢«æŒ‚è½½äº†ï¼Ÿèµ¶ç´§ç»™ä»–å¸è½½å…ˆï¼# **å› ä¸ºï¼Œå¦‚æœè¦è¢«æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿå·²ç»è¢«æŒ‚è½½äº†ï¼ˆæ— è®ºæŒ‚è½½åœ¨å“ªä¸ªç›®å½•ï¼‰ï¼Œé‚£æµ‹è¯•å°±ä¸ä¼šè¿›è¡Œå–”ï¼**$ umount /dev/vda4STEP3ï¼šæŒ‚è½½æµ‹è¯•# ä¾ç…§é…ç½®æ–‡ä»¶etc/fstabçš„æ•°æ®å°†æ‰€æœ‰æœªæŒ‚è½½çš„ç£ç›˜éƒ½æŒ‚è½½ä¸Šæ¥$ mount -a # å¦‚æœæŠ¥é”™ï¼Œåˆ™æ ¹æ®æŠ¥é”™ä¿¡æ¯å¯¹/etc/fstabè¿›è¡Œä¿®æ”¹$ lsblk -f # æŸ¥çœ‹/dev/vda4æ˜¯å¦å·²ç»æˆåŠŸæŒ‚è½½ï¼Œå¦‚æœæˆåŠŸæŒ‚è½½ï¼Œåˆ™é…ç½®æˆåŠŸè‡´è°¢ä»¥ä¸Šå†…å®¹æ ¹æ®ã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœã€‹æ•´ç†è€Œæ¥ã€‚æ„Ÿè°¢é¸Ÿå“¥çš„å·¥ä½œï¼è¿™æœ¬ä¹¦ä¹Ÿæœ‰Webç‰ˆï¼Œæœ‰éœ€è¦çš„è¯»è€…å¯ä»¥ç‚¹å‡»é“¾æ¥é˜…è¯»å­¦ä¹ ã€‚" }, { "title": "ä¸€äº›åŸºæœ¬æ¦‚å¿µ", "url": "/posts/%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/", "categories": "ä¸“ä¸šç§¯ç´¯, åŸºç¡€çŸ¥è¯†", "tags": "", "date": "2021-01-14 09:54:00 +0800", "snippet": "åŠ¨æœºä¸€äº›ä»¥å¾€ä¸æ¸…æ¥šçš„åŸºæœ¬æ¦‚å¿µã€‚å­¦ä¹ ååšä¸‹è®°å½•ã€‚åè¯ ç½‘ç»œçš„depthã€widthã€cardinality depthï¼šæ•´ä¸ªç½‘ç»œçš„å±‚æ•° widthï¼šæ¯ä¸€å±‚çš„é€šé“(channel)æ•° cardinality:é¦–æ¬¡å‡ºç°åœ¨ResNeXtä¸­ï¼Œ åŸæ–‡è§£é‡Šä¸ºâ€˜the size of the set of transformationsâ€™ï¼Œå¯ç†è§£ä¸ºåŒä¸€å±‚ç½‘ç»œä¸­çš„æ”¯è·¯æ•°ã€‚ The architecture of neural networks often specified by the width and the depth of the networks. The depth of a network is defined as its number of layers (including output layer but excluding input layer); while the width of a network is defined to be the maximal number of nodes in a layer. The number of input nodes, i.e. the input dimension, is denoted as $n$. å‚è€ƒ-The Expressive Power of Neural Networks - NIPS Proceedings FLOPs floating point operationsï¼Œæ„æŒ‡æµ®ç‚¹è¿ç®—æ•°ï¼Œç†è§£ä¸ºè®¡ç®—é‡ã€‚å¯ä»¥ç”¨æ¥è¡¡é‡ç®—æ³•/æ¨¡å‹çš„å¤æ‚åº¦ã€‚ ä¸FLOPSï¼ˆæ³¨æ„å…¨å¤§å†™ï¼‰åŒºåˆ†å¼€æ¥ï¼ŒFLOPSæ˜¯floating point operations per secondçš„ç¼©å†™ï¼Œæ„æŒ‡æ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼Œç†è§£ä¸ºè®¡ç®—é€Ÿåº¦ã€‚æ˜¯ä¸€ä¸ªè¡¡é‡ç¡¬ä»¶æ€§èƒ½çš„æŒ‡æ ‡ã€‚ æ­£åˆ™é¡¹-regularizer æ­£åˆ™åŒ–ï¼Œæ›´å½¢è±¡çš„åå­—å«è§„åˆ™åŒ–ï¼Œå°±æ˜¯å‘ä½ çš„æ¨¡å‹åŠ å…¥æŸäº›è§„åˆ™ï¼ŒåŠ å…¥å…ˆéªŒï¼Œç¼©å°è§£ç©ºé—´ï¼Œå‡å°æ±‚å‡ºé”™è¯¯è§£çš„å¯èƒ½æ€§ã€‚å‚è€ƒ-çŸ¥ä¹ åˆ†ç±»å’Œå›å½’çš„åŒºåˆ« è§£é‡Š1ï¼šåˆ†ç±»é—®é¢˜çš„è¾“å‡ºåº¦é‡ç©ºé—´æ˜¯å®šæ€§çš„ï¼Œåªæœ‰åˆ†ç±»â€œæ­£ç¡®â€ä¸â€œé”™è¯¯â€ä¹‹åˆ†ï¼Œä¸å­˜åœ¨ä¸€ä¸ªé‡æ¥è¡¡é‡æ­£ç¡®æˆ–é”™è¯¯çš„ç¨‹åº¦æ˜¯å¤šå¤§ï¼›è€Œå›å½’é—®é¢˜çš„è¾“å‡ºåº¦é‡ç©ºé—´æ˜¯å®šé‡çš„ï¼Œæœ‰ä¸€ä¸ªé‡æ¥è¡¡é‡å›å½’ç»“æœå’ŒçœŸå®æƒ…å†µçš„å®šé‡è·ç¦»ã€‚å‚è€ƒ-çŸ¥ä¹ è§£é‡Š2ï¼šè¾“å…¥å˜é‡ä¸è¾“å‡ºå˜é‡å‡ä¸ºè¿ç»­å˜é‡çš„é¢„æµ‹é—®é¢˜æ˜¯å›å½’é—®é¢˜ï¼›è¾“å‡ºå˜é‡ä¸ºæœ‰é™ä¸ªç¦»æ•£å˜é‡çš„é¢„æµ‹é—®é¢˜æˆä¸ºåˆ†ç±»é—®é¢˜ï¼›â€”â€”æèˆªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ ä»¥ç›®æ ‡æ£€æµ‹çš„ä¸€ä¸ªROIçš„é¢„æµ‹ä¸ºä¾‹ï¼Œå¯¹è¿™ä¸ªROIæ‰€å±ç±»åˆ«çš„é¢„æµ‹å°±æ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œè¦ä¹ˆé¢„æµ‹å¯¹ï¼Œè¦ä¹ˆé¢„æµ‹é”™ï¼Œè€Œä¸è¯´åˆ†ç±»é”™è¯¯çš„ç¨‹åº¦æœ‰å¤šå¤§ï¼›å¯¹è¿™ä¸ªROIçš„bounding boxçš„é¢„æµ‹å°±æ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œæœ‰å®šé‡çš„æ–¹æ³•æ¥åº¦é‡é¢„æµ‹æ¡†ä¸å®é™…æ¡†ä¹‹é—´çš„è·ç¦»ï¼ˆå¦‚MSEï¼‰ã€‚ å¹³æ—¶æ‰€è¯´çš„åˆ†ç±»é¢„æµ‹å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä»£è¡¨é¢„æµ‹ä¸ºå„ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œè¿™å®é™…ä¸Šæ˜¯ä¸€ç§åˆ†ç±»é—®é¢˜çš„å›å½’åŒ–å¤„ç†ï¼Œä¹Ÿç»™åˆ†ç±»çš„æŸå¤±å‡½æ•°çš„æ„é€ å¸¦æ¥äº†æ–¹ä¾¿ï¼ˆå¦‚äº¤å‰ç†µæŸå¤±ï¼‰ã€‚ ç»“æ„ åˆ†ç»„å·ç§¯ ä¸Šé‡‡æ ·(upsampling)ã€åæ± åŒ–(unpooling)ã€åå·ç§¯(deconvolution)çš„ç†è§£ å¾…æ•´ç†ï¼Œå‚è€ƒCSDNã€çŸ¥ä¹ã€distillã€Medium RNNï¼ŒLSTM &amp;amp; GRUï¼ŒåŒä¸€ä½ä½œè€…çš„ä¸¤ç¯‡Mediumåšå®¢ï¼Œé…åˆåŠ¨ç”»è®²å¾—å¾ˆæ¸…æ™°ã€‚æ“ä½œ gumble softmax å‚è€ƒ1 å‚è€ƒ2 å‚è€ƒ3" }, { "title": "How to inquire a dataset", "url": "/posts/How-to-inquire-a-dataset/", "categories": "ä¸“ä¸šç§¯ç´¯, æ‚è®°", "tags": "social", "date": "2021-01-11 16:38:00 +0800", "snippet": "One exampleDear Miss/Mr.,Good day.We have the honor to read the project of CMDFALL and are full of interest in the dataset.We extremely hope to be able to compare our new algorithm with other algorithms on your dataset, so could you please share the dataset with us through our account as soon as possible?Our account is xxx@sjtu.edu.cnThanks for your elaborate work. If you need us to provide other information, please feel free to contact us.Best regards.---------------------xxx (advisor: xxx)Institute of xxxShanghai Jiaotong University, Chinasome advicesDonâ€™t be shy. Letâ€™s get this out of the way first. If you go about it well, thereâ€™s no absolutely no harm in asking. Most researchers are keen to share and discuss their work. Never be afraid to reach out to big names.Make your purpose clear. Before you send your inquiry you should have a thorough understanding of your goal. Make sure you can explain this. Nobody wants to hand out a hard-earned dataset to a potential hoarder whoâ€™s unlikely to ever make good use of the data. Outline your intended project, describe how youâ€™ll publish the results, or better yet, propose a collaboration. You might well have identified a win-win situation for everyone involved. Whatâ€™s more, the authors are more willing to share their data when the replicator is perceived as trying to be helpful rather than cross-checking results.Make sure youâ€™ve done your homework. Understand the implications of obtaining certain datasets, such as privacy concerns, risks to others, or repeatability of the experiment. If youâ€™re basing your inquiry on a specific piece of work such as a paper, blog post, or open-source project, again, be concrete. Donâ€™t say things like â€œin your recent paperâ€ but name the exact context.Make your affiliation clear. Donâ€™t use a random Gmail or Hotmail address (good luck particularly with the latter) when you have one that shows youâ€™re in the Computer Science department of a well-known university. Identifying the exact group youâ€™re working in, as well as whoâ€™s your adviser, also helps.Find the right point of contact. If youâ€™re addressing the authors of a paper, start by contacting the first author. Some papers explicitly list the right contact for correspondence regarding the paper. Under no circumstances should you send an individual email to each listed contact in parallel.Be responsible. Understand limits if others ask you for the data youâ€™ve received.Be respectful and grateful." }, { "title": "Enable Google Page Views", "url": "/posts/enable-google-pv/", "categories": "Blogging, Tutorial", "tags": "google analytics, pageviews", "date": "2021-01-04 07:32:00 +0800", "snippet": "This post is to enable Page Views on the Chirpy theme based blog that you just built. This requires technical knowledge and itâ€™s recommended to keep the google_analytics.pv.* empty unless you have a good reason. If your website has low traffic, the page views count would discourage you to write more blogs. With that said, letâ€™s start with the setup.Set up Google AnalyticsCreate GA account and propertyFirst, you need to set up your account on Google analytics. While you create your account, you must create your first Property as well. Head to https://analytics.google.com/ and click on Start Measuring Enter your desired Account Name and choose the desired checkboxes Enter your desired Property Name. This is the name of the tracker project that appears on your Google Analytics dashboard Enter the required information About your business Hit Create and accept any license popup to set up your Google Analytics account and create your propertyCreate Data StreamWith your property created, you now need to set up Data Stream to track your blog traffic. After you signup, the prompt should automatically take you to create your first Data Stream. If not, follow these steps: Go to Admin on the left column Select the desired property from the drop-down on the second column Click on Data Streams Add a stream and click on Web Enter your blogâ€™s URLIt should look like this:Now, click on the new data stream and grab the Measurement ID. It should look something like G-V6XXXXXXXX. Copy this to your _config.yml file:google_analytics: id: &#39;G-V6XXXXXXX&#39; # fill in your Google Analytics ID # Google Analytics pageviews report settings pv: proxy_endpoint: # fill in the Google Analytics superProxy endpoint of Google App Engine cache_path: # the local PV cache data, friendly to visitors from GFW regionWhen you push these changes to your blog, you should start seeing the traffic on your Google Analytics. Play around with the Google Analytics dashboard to get familiar with the options available as it takes like 5 mins to pick up your changes. You should now be able to monitor your traffic in real time.Setup Page ViewsThere is a detailed tutorial available to set up Google Analytics superProxy. But, if you are interested to just quickly get your Chirpy-based blog display page views, follow along. These steps were tested on a Linux machine. If you are running Windows, you can use the Git bash terminal to run Unix-like commands.Setup Google App Engine Visit https://console.cloud.google.com/appengine Click on Create Application Click on Create Project Enter the name and choose the data center close to you Select Python language and Standard environment Enable billing account. Yeah, you have to link your credit card. But, you wonâ€™t be billed unless you exceed your free quota. For a simple blog, the free quota is more than sufficient. Go to your App Engine dashboard on your browser and select API &amp;amp; Services from the left navigation menu Click on Enable APIs and Services button on the top Enable the following APIs: Google Analytics API On the left, Click on OAuth Consent Screen and accept Configure Consent Screen. Select External since your blog is probably hosted for the public. Click on Publish under Publishing Status Click on Credentials on the left and create a new OAuth Client IDs credential. Make sure to add an entry under Authorized redirect URIs that matches: https://&amp;lt;project-id&amp;gt;.&amp;lt;region&amp;gt;.r.appspot.com/admin/auth Note down the Your Client ID and Your Client Secret. Youâ€™ll need this in the next section. Download and install the cloud SDK for your platform: https://cloud.google.com/sdk/docs/quickstart Run the following commands: [root@bc96abf71ef8 /]# gcloud init ~snip~ Go to the following link in your browser: https://accounts.google.com/o/oauth2/auth?response_type=code&amp;amp;client_id=XYZ.apps.googleusercontent.com&amp;amp;redirect_uri=ABCDEFG Enter verification code: &amp;lt;VERIFICATION CODE THAT YOU GET AFTER YOU VISIT AND AUTHENTICATE FROM THE ABOVE LINK&amp;gt; You are logged in as: [blah_blah@gmail.com]. Pick cloud project to use:[1] chirpy-test-300716[2] Create a new projectPlease enter numeric choice or text value (must exactly match listitem): 1[root@bc96abf71ef8 /]# gcloud info# Your selected project info should be displayed here Setup Google Analytics superProxy Clone the Google Analytics superProxy project on Github: https://github.com/googleanalytics/google-analytics-super-proxy to your local. Remove the first 2 lines in the src/app.yaml file: - application: your-project-id- version: 1 In src/config.py, add the OAUTH_CLIENT_ID and OAUTH_CLIENT_SECRET that you gathered from your App Engine Dashboard. Enter any random key for XSRF_KEY, your config.py should look similar to this #!/usr/bin/python2.7__author__ = &#39;pete.frisella@gmail.com (Pete Frisella)&#39;# OAuth 2.0 Client SettingsAUTH_CONFIG = { &#39;OAUTH_CLIENT_ID&#39;: &#39;YOUR_CLIENT_ID&#39;, &#39;OAUTH_CLIENT_SECRET&#39;: &#39;YOUR_CLIENT_SECRET&#39;, &#39;OAUTH_REDIRECT_URI&#39;: &#39;%s%s&#39; % ( &#39;https://chirpy-test-XXXXXX.ue.r.appspot.com&#39;, &#39;/admin/auth&#39; )}# XSRF SettingsXSRF_KEY = &#39;OnceUponATimeThereLivedALegend&#39; You can configure a custom domain instead of https://PROJECT_ID.REGION_ID.r.appspot.com.But, for the sake of keeping it simple, we will be using the Google provided default URL. From inside the src/ directory, deploy the app [root@bc96abf71ef8 src]# gcloud app deployServices to deploy: descriptor: [/tmp/google-analytics-super-proxy/src/app.yaml]source: [/tmp/google-analytics-super-proxy/src]target project: [chirpy-test-XXXX]target service: [default]target version: [VESRION_NUM]target url: [https://chirpy-test-XXXX.ue.r.appspot.com]Do you want to continue (Y/n)? Y Beginning deployment of service [default]...â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—â• â• Uploading 1 file to Google Cloud Storage â•â•£â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•File upload done.Updating service [default]...done.Setting traffic split for service [default]...done.Deployed service [default] to [https://chirpy-test-XXXX.ue.r.appspot.com] You can stream logs from the command line by running:$ gcloud app logs tail -s default To view your application in the web browser run:$ gcloud app browse Visit the deployed service. Add a /admin to the end of the URL. Click on Authorize Users and make sure to add yourself as a managed user. If you get any errors, please Google it. The errors are self-explanatory and should be easy to fix. If everything went good, youâ€™ll get this screen:Create Google Analytics QueryHead to https://PROJECT_ID.REGION_ID.r.appspot.com/admin and create a query after verifying the account. GA Core Reporting API query request can be created in Query Explorer.The query parameters are as follows: start-date: fill in the first day of blog posting end-date: fill in today (this is a parameter supported by GA Report, which means that it will always end according to the current query date) metrics: select ga:pageviews dimensions: select ga:pagePathIn order to reduce the returned results and reduce the network bandwidth, we add custom filtering rules 1: filters: fill in ga:pagePath=~^/posts/.*/$;ga:pagePath!@=. Among them, ; means using logical AND to concatenate two rules. If the site.baseurl is specified, change the first filtering rule to ga:pagePath=~^/BASE_URL/posts/.*/$, where BASE_URL is the value of site.baseurl. After Run Query, copy the generated contents of API Query URI at the bottom of the page and fill in the Encoded URI for the query of SuperProxy on GAE.After the query is saved on GAE, a Public Endpoint (public access address) will be generated, and we will get the query result in JSON format when accessing it. Finally, click Enable Endpoint in Public Request Endpoint to make the query effective, and click Start Scheduling in Scheduling to start the scheduled task.Configure Chirpy to Display Page ViewOnce all the hard part is done, it is very easy to enable the Page View on Chirpy theme. Your superProxy dashboard should look something like below and you can grab the required values.Update the _config.yml file of Chirpy project with the values from your dashboard, to look similar to the following:google_analytics: id: &#39;G-V6XXXXXXX&#39; # fill in your Google Analytics ID pv: proxy_endpoint: &#39;https://PROJECT_ID.REGION_ID.r.appspot.com/query?id=&amp;lt;ID FROM SUPER PROXY&amp;gt;&#39; cache_path: # the local PV cache data, friendly to visitors from GFW regionNow, you should see the Page View enabled on your blog.Reference Google Analytics Core Reporting API: FiltersÂ &amp;#8617; " }, { "title": "Pythonç§¯ç´¯", "url": "/posts/Python%E7%A7%AF%E7%B4%AF/", "categories": "ä¸“ä¸šç§¯ç´¯, ç¼–ç¨‹ç§¯ç´¯", "tags": "python", "date": "2020-12-11 14:15:00 +0800", "snippet": "å…³äºæœ¬é¡µä¸€äº›Pythonçš„åŸºæœ¬çŸ¥è¯†ã€æ“ä½œç§¯ç´¯ï¼Œè®°å½•ä¸‹æ–¹ä¾¿æ—¥åæŸ¥æ‰¾ä½¿ç”¨ã€‚pythonæ–‡ä»¶è¯»å†™æ¨¡å¼å‚è€ƒï¼šStack Overflow | r r+ w w+ a a+------------------|--------------------------read | + + + +write | + + + + +write after seek | + + +create | + + + +truncate | + +position at start | + + + +position at end | + +Some example# writewith open(filename, &#39;w+&#39;) as f: f.write(&amp;lt;something&amp;gt;)# read - way1with open(filename, &#39;r&#39;) as f: for line in f.readlines(): str1, str2 = line.split()# read - way2file = open(filename)for line in file: str1, str2 = line.split()file.close()å¤šæ¬¡è®¿é—®æ–‡ä»¶çš„è¯, ä¸‹æ¬¡è®¿é—®å‰éœ€å›åˆ°æ–‡ä»¶å¤´file.seek(0) æ‚è®° ä½¿ç”¨mapæ–¹ä¾¿åœ°æŠŠline.split()å¾—åˆ°çš„stråˆ—è¡¨ç»Ÿä¸€æ˜ å°„åˆ°å…¶ä»–æ•°æ®æ ¼å¼&amp;gt; num1, num2, num3, num4 = map(float, line.split()) jsonæ–‡ä»¶çš„è¯»å†™ # è¯»å–jsonæ–‡ä»¶ä¸ºå­—å…¸with open(&amp;lt;json_path&amp;gt;, &#39;r&#39;) as f: loaded_dict = json.load(f) # å°†new_dictå†™å…¥json_pathwith open(&amp;lt;json_path&amp;gt;, &quot;w&quot;) as f: json.dump(new_dict, f) Pythonä¸­çš„æ·±æ‹·è´ä¸æµ…æ‹·è´å‚è€ƒ1 - runoob :star:å‚è€ƒ2 - æ˜é‡‘ ç›´æ¥èµ‹å€¼ï¼š å®è´¨ä¸Šå°±æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ã€‚ æµ…æ‹·è´(copy)ï¼š æ‹·è´çˆ¶å¯¹è±¡ï¼Œä¸ä¼šæ‹·è´å¯¹è±¡çš„å†…éƒ¨çš„å­å¯¹è±¡ã€‚ æ·±æ‹·è´(deepcopy)ï¼š copyæ¨¡å—çš„deepcopy æ–¹æ³•ï¼Œå®Œå…¨æ‹·è´äº†çˆ¶å¯¹è±¡åŠå…¶å­å¯¹è±¡ã€‚ç¤ºä¾‹import copya = [1, 2, 3.0, {&#39;key&#39;: &#39;val&#39;}, [&#39;a&#39;, &#39;b&#39;]] # åŸå§‹å¯¹è±¡ b = a # èµ‹å€¼ï¼Œä¼ å¯¹è±¡çš„å¼•ç”¨c = copy.copy(a) # æµ…æ‹·è´, ä¹Ÿå¯ç®€å•ä½¿ç”¨ c = a.copy()d = copy.deepcopy(a) # æ·±æ‹·è´ a.append(5) # ä¿®æ”¹å¯¹è±¡a (çˆ¶å¯¹è±¡)a[4].append(&#39;c&#39;) # ä¿®æ”¹å¯¹è±¡aä¸­çš„[&#39;a&#39;, &#39;b&#39;]æ•°ç»„å¯¹è±¡ (å­å¯¹è±¡)a[0] += 1# ä»è¾“å‡ºå€¼éªŒè¯ä¸€ä¸‹print( &#39;a = &#39;, a ) print( &#39;b = &#39;, b ) print( &#39;c = &#39;, c ) print( &#39;d = &#39;, d ) &#39;&#39;&#39;outputa = [2, 2, 3.0, {&#39;key&#39;: &#39;val&#39;}, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], 5] b = [2, 2, 3.0, {&#39;key&#39;: &#39;val&#39;}, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], 5] # bä¸ºaçš„å¼•ç”¨ï¼Œä¸aå…±äº«åŒä¸€å—å†…å­˜åœ°å€ï¼Œå› æ­¤ä¸aåŒæ­¥æ”¹å˜c = [1, 2, 3.0, {&#39;key&#39;: &#39;val&#39;}, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]] # cä¸ºæµ…æ‹·è´ï¼Œæ‹·è´äº†çˆ¶å¯¹è±¡ä½†æ²¡æ‹·è´å­å¯¹è±¡d = [1, 2, 3.0, {&#39;key&#39;: &#39;val&#39;}, [&#39;a&#39;, &#39;b&#39;]] # dä¸ºæ·±æ‹·è´ï¼Œæ‹·è´äº†çˆ¶å¯¹è±¡ä¹Ÿæ‹·è´äº†å­å¯¹è±¡&#39;&#39;&#39;# ä»å†…å­˜åœ°å€éªŒè¯ä¸€ä¸‹ï¼Œ id()å‡½æ•°å¯è¿”å›å˜é‡çš„å†…å­˜åœ°å€print(id(a), id(a[0]), id(a[1]), id(a[2]), id(a[3]), id(a[4]))print(id(b), id(b[0]), id(b[1]), id(b[2]), id(b[3]), id(b[4]))print(id(c), id(c[0]), id(c[1]), id(c[2]), id(c[3]), id(c[4]))print(id(d), id(d[0]), id(d[1]), id(d[2]), id(d[3]), id(d[4]))&#39;&#39;&#39;output 139864587372672 94459641159008 94459641159008 139864585514544 139864587372928 139864587371008139864587372672 94459641159008 94459641159008 139864585514544 139864587372928 139864587371008139864587370560 94459641158976 94459641159008 139864585514544 139864587372928 139864587371008139864587370944 94459641158976 94459641159008 139864585514544 139864587373440 139864587373696&#39;&#39;&#39;å†…å­˜åœ°å€è¿”å›å€¼å•ç‹¬åˆ†æä¸‹ï¼šå¯¹äºæ¯ä¸€ä¸ªå˜é‡å‡è¿”å›äº†å…­ä¸ªå†…å­˜åœ°å€ï¼Œç¬¬ä¸€ä¸ªä¸ºäº†éªŒè¯çˆ¶å¯¹è±¡åœ°å€çš„å˜åŒ–æƒ…å†µï¼›ç¬¬äºŒä¸ªä¸ºäº†éªŒè¯å‘ç”Ÿå˜åŒ–çš„æ•´å‹æ•°åœ°å€çš„å˜åŒ–æƒ…å†µï¼›ç¬¬ä¸‰ä¸ªï¼Œç¬¬å››ä¸ªåˆ†åˆ«éªŒè¯æœªå‘ç”Ÿå˜åŒ–çš„æ•´å‹æ•°ã€æµ®ç‚¹æ•°çš„åœ°å€çš„å˜åŒ–æƒ…å†µï¼›ç¬¬äº”ä¸ªï¼Œç¬¬å…­ä¸ªåˆ†åˆ«éªŒè¯ç±»å‹ä¸ºå­—å…¸å’Œåˆ—è¡¨çš„å­å¯¹è±¡çš„åœ°å€å˜åŒ–æƒ…å†µã€‚å¯ä»¥çœ‹å‡ºï¼š å¼•ç”¨(b)ï¼šçˆ¶å¯¹è±¡åœ°å€ï¼ˆç¬¬ä¸€ä¸ªï¼‰å’Œå„å­å¯¹è±¡åœ°å€ä¸åŸå¯¹è±¡ä¿æŒå®Œå…¨ä¸€è‡´ã€‚ æµ…æ‹·è´(c)ï¼šé‡æ–°å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„çˆ¶å¯¹è±¡åœ°å€ï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼Œä½†åˆ—è¡¨/å­—å…¸ç±»å‹çš„å­å¯¹è±¡ï¼ˆç¬¬äº”ã€ç¬¬å…­ä¸ªï¼‰åœ°å€ä»æŒ‡å‘åŸå¯¹è±¡ã€‚ æ·±æ‹·è´(d)ï¼šé‡æ–°å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„çˆ¶å¯¹è±¡åœ°å€ï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼Œä»¥åŠåˆ—è¡¨/å­—å…¸ç±»å‹çš„å­å¯¹è±¡ï¼ˆç¬¬äº”ã€ç¬¬å…­ä¸ªï¼‰åœ°å€ã€‚ ç¬¬äºŒã€ç¬¬ä¸‰ã€ç¬¬å››ä¸ªçœŸæ˜¯è¿˜å­˜åœ¨ç–‘æƒ‘ã€‚å¯¹å•çº¯çš„æ•´å‹æ•°æˆ–æµ®ç‚¹æ•°ä¼¼ä¹æœ‰äº›ç‰¹æ®Šï¼šå¯¹å€¼æœªæ›´æ”¹çš„æ•´å‹æ•°ã€æµ®ç‚¹æ•°ï¼ˆç¬¬ä¸‰ã€ç¬¬å››ä¸ªï¼‰ï¼Œä¸ç®¡æ˜¯æ·±æµ…æ‹·è´ï¼Œä½œä¸ºå­å¯¹è±¡éƒ½ä¼šä»å’ŒåŸå…ƒç´ å…±äº«åŒä¸€å—åœ°å€ï¼›è€Œä¼¼ä¹åœ¨å¯¹å…¶è¿›è¡Œé‡æ–°èµ‹å€¼æ“ä½œæ—¶ï¼ˆç¬¬äºŒä¸ªï¼‰ï¼Œä¼šè‡ªåŠ¨é‡æ–°ä¸ºå…¶åˆ†é…ä¸€å—æ–°åœ°å€ï¼Œå¯èƒ½æ˜¯å’ŒPythonçš„æ•°æ®å­˜å‚¨æ–¹å¼æœ‰å…³ã€‚æ¬¢è¿è®¨è®ºã€‚æœ€åéªŒè¯ä¸€ä¸‹è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€ä¸ªç»†æ€ææçš„é—®é¢˜:wave:a = 1b = aprint(id(a)) # 94767788772672print(id(b)) # 94767788772672a += 1print(id(a)) # 94767788772704print(id(b)) # 94767788772672æ•´å‹æ•°/æµ®ç‚¹æ•°çš„èµ‹å€¼æ“ä½œï¼Œç¡®å®ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨çš„è¿‡ç¨‹ã€‚ä½†æ˜¯å½“å¯¹ä¸€ä¸ªå˜é‡(a)è¿›è¡Œä¿®æ”¹åï¼Œä»è¡¨ç°ä¸Šçœ‹ï¼Œå®ƒä¼šå‰¥ç¦»åŸå†…å­˜ç©ºé—´ï¼Œå¼€è¾Ÿä¸€å—æ–°ç©ºé—´æ¥ä¿å­˜ä¿®æ”¹åçš„æ•°ï¼Œå¦ä¸€ä¸ªå˜é‡(b)ä¿æŒåœ¨åŸæ¥çš„å†…å­˜ç©ºé—´ï¼Œå®ƒçš„å€¼ä¸ä¼šå—åˆ°ç›¸åº”çš„å½±å“ã€‚æ¢å¥è¯è¯´ï¼ŒäºŒè€…å€¼çš„å˜åŒ–æ˜¯è‡ªåŠ¨è§£è€¦çš„ã€‚è¦ä¸ä¹‹å‰å†™äº†è¿™ä¹ˆå¤šæ•´å‹æ•°/æµ®ç‚¹æ•°çš„èµ‹å€¼æ“ä½œå´æ²¡æœ‰æ„è¯†åˆ°é”™è¯¯ï¼ŒçœŸå°±å®ŒçŠŠå­ã€‚Pythonä¹‹importçš„æœºç†å‚è€ƒ1 å‚è€ƒ2 å¦‚æœç¨‹åºçš„å…¥å£æ–‡ä»¶åœ¨é¡¶çº§ç›®å½•ï¼Œç”±äºè¯¥é¡¶çº§ç›®å½•å·²ç»åœ¨sys.pathé‡Œäº†ï¼Œæ‰€ä»¥å°†å¯¼å…¥è·¯å¾„ä»é¡¶çº§ç›®å½•ä¸€è·¯å†™ä¸‹æ¥å³å¯ã€‚æ¯”å¦‚ï¼Œåœ¨è¯¥é¡¶çº§ç›®å½•ï¼ˆåŠå…¶å­ç›®å½•ï¼‰ä¸‹çš„ä»»æ„ä¸€æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥å…¶ä»–æ–‡ä»¶ from mmt.evaluation_metrics import accuracy # mmtä¸ºé¡¶çº§ç›®å½•ä¸‹çš„ä¸€ä¸ªæ¨¡å— å¦‚æœå¸Œæœ›ä»å…¶ä»–ä½ç½®å¯¼å…¥æ¨¡å—ï¼Œå¯ä»¥ import syssys.path.append(&#39;&amp;lt;your_import_path&amp;gt;&#39;) pythonçš„å¼•ç”¨åˆ†ä¸ºç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥ï¼Œä»¥ä¸‹ä¸ºä¸€äº›ç›¸å¯¹å¯¼å…¥çš„ä¾‹å­ from .package_name import module_name # å¯¼å…¥å’Œè‡ªå·±åŒç›®å½•çš„åŒ…çš„æ¨¡å—ã€‚ å¦‚æœè¦æŠŠä¸€ä¸ªæ–‡ä»¶å¤¹å°è£…ä¸ºä¸€ä¸ªåŒ…ï¼Œéœ€è¦åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ä¸€ä¸ª__init__.pyæ–‡ä»¶ï¼Œå³ä½¿ä¸ºç©ºæ–‡ä»¶ã€‚ æ ¼å¼åŒ–æ—¶é—´å‚è€ƒimport time # æ ¼å¼åŒ–æˆ2016-03-20 11:45:39å½¢å¼print(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())) # æ ¼å¼åŒ–æˆSat Mar 28 22:24:24 2016å½¢å¼print(time.strftime(&quot;%a %b %d %H:%M:%S %Y&quot;, time.localtime())) # å°†æ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³a = &quot;Sat Mar 28 22:24:24 2016&quot;print(time.mktime(time.strptime(a,&quot;%a %b %d %H:%M:%S %Y&quot;)))pythonç»™æ•°å­—å‰é¢è¡¥é›¶n = &quot;123&quot;s = n.zfill(5) # æˆ– s = &quot;%05d&quot; % nassert s == &quot;00123&quot;è·å¾—å½“å‰ç›®å½•çš„çˆ¶ç›®å½•import oscwd = os.getcwd()parent_dir = os.path.dirname(cwd)print(cwd) # /parent_dir/child_dirprint(parent_dir) # /parent_dirPythonç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„ç›¸äº’è½¬åŒ–import os# convert relative path to absolute pathabs_path = os.path.abspath(rel_path) # convert absolute path to relative pathrel_path = os.path.relpath(abs_path) è·å–PythonåŒ…çš„å®‰è£…ç›®å½•æœ‰çš„æ—¶å€™æˆ‘ä»¬æƒ³æŸ¥çœ‹æˆ–ä¿®æ”¹PythonåŒ…çš„æºç ï¼Œå®ƒä»¬åœ¨å“ªé‡Œå‘¢ï¼Ÿå¯é€šè¿‡import moduleprint(module.__file__)æŸ¥çœ‹ï¼Œå¦‚import torchprint(torch.__file__)ç†è§£Pythonä¸­çš„if __name__ == â€˜__main__â€™å‚è€ƒé€šä¿—åœ°ç†è§£__name__ == __main__&#39;ï¼šå‡å¦‚ä½ å«å°æ˜.pyï¼Œåœ¨æœ‹å‹çœ¼ä¸­ï¼Œä½ æ˜¯å°æ˜(__name__ == &#39;å°æ˜&#39;)ï¼›åœ¨ä½ è‡ªå·±çœ¼ä¸­ï¼Œä½ æ˜¯ä½ è‡ªå·±(__name__ == &#39;__main__&#39;)ã€‚if __name__ == &#39;__main__&#39;çš„æ„æ€æ˜¯ï¼šå½“.pyæ–‡ä»¶è¢«ç›´æ¥è¿è¡Œæ—¶ï¼Œif __name__ == &#39;__main__&#39;ä¹‹ä¸‹çš„ä»£ç å—å°†è¢«è¿è¡Œï¼›å½“.pyæ–‡ä»¶ä»¥æ¨¡å—å½¢å¼è¢«å¯¼å…¥æ—¶ï¼Œif __name__ == &#39;__main__&#39;ä¹‹ä¸‹çš„ä»£ç å—ä¸è¢«è¿è¡Œã€‚æ ¹æ®å­—ç¬¦ä¸²è¿”å›å‡½æ•° ä½¿ç”¨getattr getattr() æ˜¯ python çš„å†…å»ºå‡½æ•°ï¼Œgetattr(object,name) å°±ç›¸å½“äºobject.name class Foo: def __init__(self): self.func1 = ... def call_func1(self): getattr(self, func1) # è¿”å› self.func1ï¼Œæ‰§è¡Œéœ€è¦getattr(self, func1)() def func2(self): print(&quot;I am func2&quot;) foo = Foo()getattr(foo, &quot;func2&quot;)() ä½¿ç”¨eval def func1(): print(&quot;I am func1&quot;) eval(&quot;func1&quot;)()# out: I am func1 Pythonæ–‡ä»¶æ–°å»ºï¼Œåˆ é™¤ï¼Œå¤åˆ¶ï¼Œç§»åŠ¨import osimport shutil# åˆ¤æ–­æ–‡ä»¶(å¤¹)æ˜¯å¦å­˜åœ¨os.path.exists()# æ–°å»ºæ–‡ä»¶å¤¹os.makedirs()# åˆ é™¤æ–‡ä»¶os.remove()# åˆ é™¤æ–‡ä»¶å¤¹shutil.rmtree()# å¤åˆ¶æ–‡ä»¶shutil.copy(src_file, dst_file_or_dir)# å¤åˆ¶æ–‡ä»¶å¤¹shutil.copytree(src_dir, dst_dir)# ç§»åŠ¨æ–‡ä»¶shutil.move(old_pos, new_pos)# é‡å‘½åos.rename(old_name, new_name)os.mkdir()ä¸os.makedirs()os.makedirs()ä¼šé€’å½’åœ°å»ºç«‹è¾“å…¥çš„è·¯å¾„ï¼Œå¦‚æœçˆ¶çº§è·¯å¾„ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å»ºç«‹ã€‚è€Œos.mkdir()åªèƒ½ä¸€çº§ä¸€çº§åœ°å»ºç«‹ç›®å½•ï¼Œå¦‚æœçˆ¶çº§è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚with â€¦ as â€¦ç”¨æ³•å‚è€ƒwith è¯­å¥é€‚ç”¨äºå¯¹èµ„æºè¿›è¡Œè®¿é—®çš„åœºåˆï¼Œç¡®ä¿ä¸ç®¡ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œå¿…è¦çš„â€œæ¸…ç†â€æ“ä½œï¼Œé‡Šæ”¾èµ„æºï¼Œæ¯”å¦‚æ–‡ä»¶ä½¿ç”¨åè‡ªåŠ¨å…³é—­ï¼çº¿ç¨‹ä¸­é”çš„è‡ªåŠ¨è·å–å’Œé‡Šæ”¾ç­‰ã€‚å¦‚with open(&quot;1.txt&quot;) as file: data = file.read()æ˜¯æ¯”file = open(&quot;1.txt&quot;)data = file.read()file.close()# 1. æ–‡ä»¶è¯»å–å‘ç”Ÿå¼‚å¸¸ï¼Œä½†æ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†ï¼›# 2. å¯èƒ½å¿˜è®°å…³é—­æ–‡ä»¶å¥æŸ„ã€‚æ›´åŠ ä¼˜é›…é²æ£’çš„ç¼–ç¨‹æ–¹å¼ã€‚å·¥ä½œåŸç†å…ˆçœ‹ä¾‹å­ï¼šclass Sample: def __init__(self): pass def __enter__(self): print (&quot;in __enter__&quot;) return &quot;Foo&quot; def __exit__(self, exc_type, exc_val, exc_tb): print (&quot;in __exit__&quot;)sample = Sample()with sample as s: print (&quot;sample: &quot;, s)è¾“å‡ºï¼šin __enter__Sample: Fooin __exit__å¯ä»¥çœ‹å‡ºï¼Œwith ... as ...çš„å·¥ä½œåŸç†ä¸ºï¼š ç´§è·Ÿwithåé¢å˜é‡çš„__enter__()æ–¹æ³•é¦–å…ˆè¢«è°ƒç”¨ï¼Œå…¶è¿”å›å€¼èµ‹ç»™asåé¢çš„å˜é‡ï¼› å½“withåé¢çš„ä»£ç å—å…¨éƒ¨è¢«æ‰§è¡Œå®Œä¹‹åï¼Œ æ‰§è¡Œwithåé¢å˜é‡çš„__exit__æ–¹æ³•ã€‚Pythonè¿ç®—ç¬¦é‡è½½å‚è€ƒä¸€äº›å¸¸è§çš„è®°å½• æ–¹æ³• é‡è½½ è°ƒç”¨ __init__ æ„é€ å‡½æ•° X = ClassX(args) __len__ è·å–é•¿åº¦ len(X) __repr__ æ‰“å° print(X) __getitem__ ç´¢å¼• X[i] __setitem__ ç´¢å¼•èµ‹å€¼ X[i] = value __call__ æŠŠä¸€ä¸ªç±»å½“ä½œå‡½æ•°è°ƒç”¨ X(*args,**kargs) __enter__, __exit__ ç¯å¢ƒç®¡ç†å™¨ with obj as varï¼š æ¥çœ‹demoï¼šclass ToyClass: def __init__(self, data): self.data = data def __repr__(self): # return self.data # TypeError: __str__ returned non-string (type list) return str(self.data) def __len__(self): return len(self.data) def __getitem__(self, i): return self.data[i] def __setitem__(self, i, value): self.data[i] = value def __call__(self, param): print(&quot;__call__() is called, your input param is {}&quot;.format(param))toy = ToyClass(data=[&#39;I&#39;, &#39;LOVE&#39;, &#39;SJTU&#39;])# __repr__print(toy) # out: [&#39;I&#39;, &#39;LOVE&#39;, &#39;SJTU&#39;]# __len__print(len(toy)) # out: 3 # __getitem__print(toy[0]) # out: I print(toy[0:3]) # out: [&#39;I&#39;, &#39;LOVE&#39;, &#39;SJTU&#39;]# __setitem__toy[0] = &#39;U&#39; print(toy) # out: [&#39;U&#39;, &#39;LOVE&#39;, &#39;SJTU&#39;]# __call__toy(&#39;S&#39;) # out: __call__() is called, your input param is SåœŸå‘³æ–­ç‚¹â€”â€”ä½¿ç”¨input()åœ¨éœ€è¦ç¨‹åºæš‚åœçš„åœ°æ–¹æ’å…¥ä¸€ä¸ªinput()ï¼Œç¨‹åºè¿è¡Œè‡³æ­¤ä¼šæš‚åœï¼ŒæŒ‰ä¸‹å›è½¦åç»§ç»­for i in range(10): print(i) input() # Loop continues after &amp;lt;Enter&amp;gt; is pressedä¸€äº›åŸºæœ¬è¯­æ³•éå†å­—å…¸demo_dict = dict(...)# éå†æ‰€æœ‰keyfor key in demo_dict.keys(): print(key)# .keys()è¿”å›dict_keyså¯¹è±¡ï¼Œä¸æ”¯æŒç´¢å¼•ï¼Œå¦‚éœ€ç´¢å¼•ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢list(demo_dict.keys())ï¼Œ.values()åŒç†# éå†æ‰€æœ‰valuefor value in demo_dict.values(): print(value) # éå†æ‰€æœ‰é”®å€¼å¯¹for key, value in demo_dict.items(): print(key, value)å­—å…¸ç›¸å…³ pop()ï¼š demo_dict.pop(key)ï¼Œä»demo_dictä¸­åˆ å»é”®å€¼ä¸ºkeyçš„é”®å€¼å¯¹ __contains__()ï¼šdemo_dict.__contains__(key)ï¼Œåˆ¤æ–­demo_dictä¸­æ˜¯å¦è¿˜æœ‰keyé”®å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1) Python3.Xä¸æ”¯æŒhas_key() å­—ç¬¦ä¸²ç›¸å…³ å¤§å†™è½¬å°å†™ï¼šc.lower() å°å†™è½¬å¤§å†™ï¼šc.upper()assertè¯­å¥ä½¿ç”¨æ–¹æ³•ï¼šassert expression [, arguments]æ³¨æ„ï¼Œå½“éœ€è¦åŠ argumentsæ—¶ï¼Œä½¿ç”¨æ–¹æ³•ä¸ºassert expression, argumentsï¼Œè€Œä¸æ˜¯assert (expression, arguments) ï¼ˆå³ä¸åŠ æ‹¬å·ï¼‰ï¼ï¼ï¼åŸå› åœ¨äºassertæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å½“ä½¿ç”¨assert (expression, arguments)æ—¶ï¼Œ(expression, arguments)ä¼šè¢«è§£é‡Šä¸ºä¸€ä¸ªå…ƒç»„ï¼Œè€Œå…ƒç»„æ˜¯Trueçš„ï¼Œæ‰€ä»¥ä¼šå¾—åˆ° SyntaxWarning: assertion is always true, perhaps remove parentheses?çš„warningï¼Œassertå®é™…ä¸Šä¹Ÿå°±å¤±æ•ˆäº†ã€‚æ‰€ä»¥åˆ‡è®°ä¸èƒ½ç”¨é”™äº†ã€‚å‚è€ƒæ‚é¡¹ ç”Ÿæˆ0~1åŒºé—´å†…çš„éšæœºæ•° import random rand = random.random() ä¸€äº›ä½¿ç”¨trickæ’åº å­—å…¸æ’åº æŒ‰keyæ’åºï¼šsorted(d.items(), key = lambda x : x[0]) æŒ‰valueæ’åºï¼šsorted(d.items(), key = lambda x : x[1]) d = {&#39;a&#39; : 3, &#39;b&#39; : 2, &#39;c&#39; : 3}d_key_sorted = sorted(d.items(), key = lambda x : x[0]) # [(&#39;a&#39;, 3), (&#39;b&#39;, 2), (&#39;c&#39;, 1)]d_value_sorted = sorted(d.items(), key = lambda x : x[1]) # [(&#39;c&#39;, 1), (&#39;b&#39;, 2), (&#39;a&#39;, 3)] å¤šæ¡ä»¶æ’åº intervals = [[0, 1], [2, 4], [2, 5]] # ç¬¬ä¸€ä¸ªå…ƒç´ å‡åºæ’åˆ—ï¼Œç¬¬äºŒä¸ªå…ƒç´ é™åºæ’åˆ— intervals.sort(key = lambda x : (x[0], -x[1])) # [[0, 1], [2, 5], [2, 4]] python -c &amp;lt;command&amp;gt;ä¸è¿›å…¥pythonè§£é‡Šå™¨çš„äº¤äº’æ¨¡å¼ï¼Œç›´æ¥æ‰§è¡Œpythonä»£ç ã€‚åœ¨è¿›è¡Œä¸€äº›ç®€å•çš„æµ‹è¯•æ—¶å¾ˆæ–¹ä¾¿ã€‚$ python -c &quot;import torch&quot; # æŸ¥çœ‹torchæ˜¯å¦èƒ½æ­£å¸¸å¯¼å…¥setup.py-A Practical Guide to Using Setup.py" }, { "title": "Ubuntuä¸‹nvidia driverå’Œcudaç‰ˆæœ¬ç®¡ç†", "url": "/posts/Ubuntu%E4%B8%8Bnvidia-driver%E5%92%8Ccuda%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/", "categories": "å®è·µ, ç¯å¢ƒé…ç½®", "tags": "ubuntu, nvidia driver, cuda", "date": "2020-12-05 18:15:00 +0800", "snippet": "åŠ¨æœºè®°å½•ä¸‹åœ¨Ubuntu 18.04ä¸‹nvidia driver 455.45ä¸cuda 10.1çš„å®‰è£…è¿‡ç¨‹ã€‚å¤‡åç»­é‡å¤å®‰è£…æ—¶ç›´æ¥å‚ç…§ã€‚ç‰ˆæœ¬å¯¹åº”å…³ç³»cudaä¸nvidia driverå¯ä»¥çœ‹åˆ°ï¼ŒDriverå¯¹äºCDUAç‰ˆæœ¬æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚è¡¨æ ¼å†…å®¹å¯èƒ½è¿‡æ—¶ï¼Œå¯ä»¥ç‚¹å‡»nvidiaå®˜ç½‘é“¾æ¥æŸ¥çœ‹æœ€æ–°æ›´æ–°ã€‚cudaä¸pytorchè¾ƒè€ç‰ˆæœ¬çš„Pytorchï¼šå‚è§æœ¬é¡µæœ€æ–°ç‰ˆPytorchï¼šPytorché¦–é¡µç»™å‡ºäº†æœ€æ–°ç‰ˆPytorchå¯ç”¨çš„ç»„åˆå’Œå¯¹åº”çš„å®‰è£…å‘½ä»¤ã€‚ä»¥ä¸‹ä»¥åœ¨Ubuntu 18.04ä¸‹ï¼Œå®‰è£…nvidia driver 455.45ä¸cuda 10.1 ä¸ºä¾‹ï¼Œè®°å½•å®‰è£…è¿‡ç¨‹ã€‚å®‰è£…/æ›´æ–°è‹±ä¼Ÿè¾¾é©±åŠ¨(nvidia driver)å¸è½½åŸé©±åŠ¨(å¦‚è‹¥éœ€è¦)sudo nvidia-uninstallsudo apt-get --purge remove nvidia-*# ./NVIDIA-Linux-x86_64-390.48.run --uninstall ç¬¬ä¸€ä¸ªå¼¹çª—é€‰yes å‚è€ƒ 20:43ä¸‹è½½æ­£ç¡®ç‰ˆæœ¬çš„é©±åŠ¨æŸ¥çœ‹æ˜¾å¡å‹å· lspci | grep -i nvidia éƒ¨åˆ†è€ç‰ˆæœ¬Ubuntu(å¦‚16.04)è¾“å‡ºä¸ºä¸€åå…­è¿›åˆ¶æ•°ï¼Œå¯ä»¥åœ¨The PCI ID RepositorySee alsoä¸€æ ä¸‹è¾“å…¥æ¡†æŸ¥è¯¢è¯¥ä»£ç å¯¹åº”çš„æ˜¾å¡å‹å·ã€‚ä¸‹è½½ç›¸åº”çš„é©±åŠ¨ç‰ˆæœ¬åœ¨nvidiaé©±åŠ¨ä¸‹è½½é¡µæ‰‹åŠ¨æœç´¢å¹¶ä¸‹è½½æ‰€éœ€çš„é©±åŠ¨ç‰ˆæœ¬ã€‚å®‰è£…æ–°é©±åŠ¨é¢„å¤‡é¦–å…ˆï¼Œç¦ç”¨ç³»ç»Ÿè‡ªå¸¦çš„nouveaué©±åŠ¨#åˆ›å»ºé…ç½®æ–‡ä»¶sudo vim /etc/modprobe.d/blacklist-nouveau.conf # åœ¨æ‰“å¼€çš„é…ç½®æ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹blacklist nouveauoptions nouveau modeset=0 # æ›´æ–°sudo update-initramfs -u Tipsï¼šæ‰“å¼€vimåæŒ‰insetå¼€å§‹ç¼–è¾‘ï¼Œç¼–è¾‘ç»“æŸåvimçš„é€€å‡ºæ“ä½œä¸ºï¼šå…ˆæŒ‰Escï¼Œç„¶åè¾“å…¥:wqé‡å¯ã€‚ï¼ˆé‡å¯ååˆ†è¾¨ç‡å¯èƒ½ä¼šæš‚æ—¶æ€§ä¸‹é™ã€‚åœ¨å®‰è£…NVIDIAé©±åŠ¨å®Œæˆåï¼Œé‡å¯å³å¯æ¢å¤ï¼‰é‡å¯ååœ¨ç»ˆç«¯è¾“å…¥lsmod | grep nouveauå¦‚æœè¾“å‡ºä¸ºç©ºï¼Œåˆ™ç¦ç”¨æˆåŠŸã€‚å¼€å§‹å®‰è£…è¿›å…¥åˆšæ‰ä¸‹è½½çš„é©±åŠ¨æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…sudo sh NVIDIA-Linux-x86_64-&amp;lt;your-driver-version&amp;gt;.runæŒ‰ç…§é»˜è®¤è®¾ç½®ï¼Œä¸€è·¯å›è½¦ï¼Œä¸å‡ºæ„å¤–ä¾¿å¯é¡ºåˆ©ç»“æŸå®‰è£…ã€‚æµ‹è¯•nvidia-smiè¾“å‡º+-----------------------------------------------------------------------------+| NVIDIA-SMI 455.45.01 Driver Version: 455.45.01 CUDA Version: 11.1 ||-------------------------------+----------------------+----------------------+| GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC || Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. || | | MIG M. ||===============================+======================+======================|| 0 GeForce GTX TIT... Off | 00000000:01:00.0 On | N/A || 22% 58C P8 21W / 250W | 90MiB / 12211MiB | 0% Default || | | N/A |+-------------------------------+----------------------+----------------------+å®é™…å®‰è£…è¿‡ç¨‹é‡åˆ°è¿‡çš„ä¸€äº›é—®é¢˜Failed CC version check. Bailing out!Compiler version check failed:The major and minor number of the compiler used tocompile the kernel:gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.4) does not match the compiler used here:cc (Ubuntu 4.9.4-2ubuntu1~14.04.1) 4.9.4å°†æœ¬æœºçš„gccé»˜è®¤ç‰ˆæœ¬åˆ‡æ¢ä¸ºå½“å‰ç¼–è¯‘æ‰€éœ€ç‰ˆæœ¬å³å¯(æ­¤å¤„ä¸ºå°†4.9.4åˆ‡æ¢ä¸º4.8.4)ã€‚å‚è€ƒ1-ubuntuä¸‹å¤šä¸ªgccç‰ˆæœ¬åˆ‡æ¢å‚è€ƒ2-Ubuntu 16.04 GCC 7 &amp;amp; G++ 7 å®‰è£…ã€‚ æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„gccç‰ˆæœ¬ï¼šgcc -v æŸ¥çœ‹æœ¬æœºå·²å®‰è£…å“ªäº›gccç‰ˆæœ¬ï¼šls /usr/bin/gcc* åˆ‡æ¢gccç‰ˆæœ¬ï¼šsudo update-alternatives --config gcc æ ¹æ®è¾“å‡ºï¼Œè¾“å…¥å¸Œæœ›åˆ‡æ¢è‡³çš„gccç‰ˆæœ¬å¯¹åº”çš„ç¼–å·ï¼Œå³å¯å®Œæˆåˆ‡æ¢ã€‚ no ccsudo apt updatesudo apt install build-essentialå¯¹ubuntuç³»ç»Ÿè‡ªåŠ¨æ›´æ–°çš„å°è¯•è¿™ç§æ–¹æ³•å¾ˆæ˜¯ç®€ä¾¿ï¼Œä½†åœ¨æˆ‘çš„ç”µè„‘ä¸Šå°è¯•æ—¶ï¼Œè™½ç„¶å¯ä»¥è·å–ç›¸åº”æ›´æ–°ï¼Œä½†æ˜¯é‡å¯åé©±åŠ¨æ— æ³•è¿æ¥ï¼Œä¹Ÿæ— æ³•æ­£å¸¸åŠ è½½æ¡Œé¢ã€‚ä½†ä¹Ÿè®°å½•ä¸€ä¸‹ï¼Œæ²¡æœ‰è¡Œé€šå¯èƒ½åªæ˜¯æˆ‘ç”µè„‘æœ¬èº«çš„åŸå› ã€‚é¦–å…ˆï¼Œæ›´æ–°ç³»ç»Ÿè½¯ä»¶æºä¿¡æ¯sudo add-apt-repository ppa:graphics-drivers/ppa &amp;amp;&amp;amp; sudo apt updateç„¶åæ¥åˆ°è®¾ç½®-è½¯ä»¶å’Œæ›´æ–°-é™„åŠ é©±åŠ¨ï¼Œé€‰æ‹©å¸Œæœ›æ›´æ–°è‡³çš„é©±åŠ¨ç‰ˆæœ¬ï¼Œç‚¹å‡»åº”ç”¨æ›´æ”¹ï¼Œå®Œæˆåé‡å¯ã€‚å®‰è£…/åˆ‡æ¢cudaç‰ˆæœ¬å‚è€ƒé“¾æ¥ä¸‹è½½å¹¶å®‰è£…cudaä»CUDA Toolkit Archiveæ‰¾åˆ°æ‰€éœ€çš„cudaç‰ˆæœ¬ï¼Œé€‰æ‹©runfileç±»å‹æ–‡ä»¶ä¸‹è½½ã€‚è¿›å…¥åˆšæ‰ä¸‹è½½æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… ï¼ˆæ‰§è¡Œæœ¬å‘½ä»¤å‰è¯·å…ˆçœ‹ä¸‹é¢çš„æ³¨ï¼‰sudo ./cuda_&amp;lt;your_version&amp;gt;_linux.run å¸Œæœ›ä¸€åˆ‡é¡ºåˆ©ï¼æ³¨ï¼šå¦‚æœå·²ç»å®‰è£…äº†nvidiaé©±åŠ¨ï¼ˆå¸¸å‘ç”Ÿåœ¨å®‰è£…æ–°ç‰ˆæœ¬cudaçš„æƒ…å†µï¼‰ï¼Œè¿™ä¸€æ­¥ä¸éœ€è¦å†å®‰è£…ï¼Œå–æ¶ˆé»˜è®¤é€‰ä¸­çš„NVIDIA Driverï¼ˆä¸å–æ¶ˆä¸ä»…å¯èƒ½ä¼šå®‰è£…å¤±è´¥ï¼Œè¿˜å¯èƒ½å¯¼è‡´é‡å¯æ—¶å¾ªç¯ç™»å½•ï¼‰ï¼Œå¦‚ä¸‹CUDA Installer â”‚â”‚ - [ ] Driver â”‚â”‚ [ ] 450.51.06 â”‚â”‚ + [X] CUDA Toolkit 11.0 â”‚â”‚ [ ] CUDA Samples 11.0 â”‚â”‚ [ ] CUDA Demo Suite 11.0 â”‚â”‚ [ ] CUDA Documentation 11.0 â”‚â”‚ Options â”‚â”‚ Install æŒ‰å›è½¦å–æ¶ˆå…¶ä»–é€‰é¡¹ï¼Œä»…ä¿ç•™CUDA Toolkit 11.0ï¼Œé€‰æ‹©Installç»§ç»­å®‰è£…ã€‚cudaç¯å¢ƒè®¾ç½®åœ¨~/.bashrcæœ«å°¾æ·»åŠ export PATH=/usr/local/cuda/bin${PATH:+:${PATH}}export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}export CUDA_HOME=/usr/local/cuda ä¸Šé¢çš„è·¯å¾„éƒ½æ˜¯æŒ‡å‘/usr/local/cudaçš„è½¯è¿æ¥ï¼Œè€Œä¸æ˜¯æŒ‡å‘æŸä¸€ä¸ªå…·ä½“çš„cudaç‰ˆæœ¬ï¼Œè¿™æ ·æ–¹ä¾¿äºåé¢è¿›è¡Œcudaç‰ˆæœ¬çš„åˆ‡æ¢ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿æ”¹åŠ¨ç«‹å³ç”Ÿæ•ˆsource ~/.bashrcå®å®ï¼Œå®‰è£…å®Œæˆã€‚åˆ‡æ¢cudaç‰ˆæœ¬æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„cudaç‰ˆæœ¬ï¼šnvcc -V å½“ç”µè„‘é‡Œå®‰è£…äº†å¤šä¸ªcudaç‰ˆæœ¬ï¼Œè€Œæƒ³ä»ä¸€ä¸ªç‰ˆæœ¬åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥å°†è½¯é“¾æ¥é‡æŒ‡å‘è‡³æ–°ç‰ˆæœ¬ï¼šcd /usr/local/ # åˆ‡åˆ°cudaæ‰€åœ¨ç›®å½•ä¸‹sudo rm -rf ./cuda # åˆ å»åŸå…ˆä½¿ç”¨çš„cudaç‰ˆæœ¬çš„è½¯é“¾æ¥sudo ln -s cuda-10.1 cuda # åˆ›å»ºä¸€ä¸ªæ–°çš„è½¯é“¾æ¥åˆ°å¸Œæœ›åˆ‡æ¢åˆ°çš„cudaç‰ˆæœ¬å†ä½¿ç”¨nvcc -V çœ‹çœ‹cudaä½¿ç”¨ç‰ˆæœ¬æ˜¯å¦å·²ç»å‘ç”Ÿæ”¹å˜å­ã€‚å¸è½½cudaTo uninstall the CUDA Toolkit, run cuda-uninstaller in /usr/local/cuda-11.1/binä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°è¿‡çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ NVIDIA-SMI has failed because it couldnâ€™t communicate with the NVIDIA driver å®‰è£…cudaåå‡ºç°å›¾å½¢åŒ–ç•Œé¢å¾ªç¯ç™»å½•çš„ç°è±¡ã€‚ å‚è€ƒ è¿™æ˜¯å› ä¸ºè¿è¡Œcudaå®‰è£…æ–‡ä»¶æ—¶ï¼Œæ²¡æœ‰å–æ¶ˆå®‰è£…NVIDIAé©±åŠ¨é€‰é¡¹å¯¼è‡´çš„ã€‚ è§£å†³ï¼š å¸è½½å®‰è£…çš„CUDA sudo /usr/local/cuda-10.1/bin/cuda-uninstaller é‡æ–°å®‰è£…CUDAï¼ˆæ³¨æ„å–æ¶ˆå®‰è£…NVIDIAé©±åŠ¨çš„é€‰é¡¹ï¼‰ å…¶ä»–æ˜¾ç¤ºNvidiaæ˜¾å¡å‹å·ï¼ˆå·²å®‰è£…Nvidiaé©±åŠ¨åï¼‰ï¼šnvidia-smi -L" }, { "title": "VS codeä½¿ç”¨", "url": "/posts/VS-code%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "vs code", "date": "2020-11-20 12:15:00 +0800", "snippet": "VS code Remote sshé…ç½®è¿™æ˜¯å®˜æ–¹ä»‹ç»æ–‡æ¡£ã€‚ä½†æ„Ÿè§‰è®²å¾—å¤ªè¿‡ç®€ç•¥ï¼Œè·Ÿç€åšçš„è¯ä¾¿æ˜¯ä¸€å¤´é›¾æ°´ã€‚ç½‘ä¸Šæœ‰ä¸å°‘é…ç½®çš„ç»éªŒï¼Œæˆ‘æŒ‰ç…§è¿™ä¸ªè¿›è¡Œé…ç½®ï¼Œæœ€ç»ˆæˆåŠŸäº†ã€‚å°†å…·ä½“æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œä»¥å¤‡æ—¥åå‚ç…§ã€‚é…ç½®ç§é’¥ åœ¨æœ¬åœ°C:\\Users\\ç”¨æˆ·å\\.sshç›®å½•ä¸‹ï¼Œç”¨ssh-keygenå‘½ä»¤ç”Ÿæˆå¯†é’¥ã€‚ å°†æœ¬åœ°ç”Ÿæˆçš„id_rsa.pubæ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹ä¸»ç›®å½•çš„~/.ssh/æ–‡ä»¶å¤¹ä¸‹ã€‚ .sshæ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯ï¼Œç›´æ¥é€šè¿‡è·¯å¾„åè¿›å…¥ã€‚ åœ¨è¿œç¨‹å°†æœ¬åœ°ä¸Šä¼ çš„id_rsa.pubåŠ å…¥åˆ°authorized_keysä¸­ã€‚å…·ä½“åšæ³•ä¸º cd ~/.ssh cat id_rsa.pub &amp;gt;&amp;gt; authorized_keys è¿™æ—¶.sshæ–‡ä»¶å¤¹ä¸‹å¤šå‡ºä¸€ä¸ªauthorized_keysæ–‡ä»¶ã€‚ (maybe optional) åœ¨æœ¬åœ°.sshç›®å½•ä¸‹ï¼Œä½¿ç”¨ç§é’¥ç™»å½•è¿œç¨‹ ssh &amp;lt;username&amp;gt;@&amp;lt;hostname&amp;gt; -p &amp;lt;port&amp;gt; -i id_rsa è¿™æ¬¡ç™»å½•æ— éœ€å¯†ç ã€‚ VS Code é…ç½®å®‰è£…Remote Developmentæ’ä»¶åœ¨VS codeå·¦è¾¹æ æ‰©å±•å•†åº—Extensionsæœç´¢Remote Developmentæ’ä»¶å¹¶å®‰è£…ã€‚æ·»åŠ é…ç½®æ–‡ä»¶ç‚¹å‡»å·¦è¾¹æ Remote Explorerçš„å›¾æ ‡åï¼Œå†ç‚¹å‡»ç®­å¤´æ‰€æŒ‡çš„é½¿è½®ä¼šå¼¹å‡ºèœå•è®©ä½ é€‰æ‹©éœ€è¦ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªé€‰æ‹©ä¹‹åå¯ä»¥æŒ‰ç…§ä¸‹å›¾æ·»åŠ é…ç½®ä¿¡æ¯ å‚æ•°å«ä¹‰ä¸º Host: è¿æ¥çš„ä¸»æœºçš„åç§°ï¼Œå¯è‡ªå®š Hostname: è¿œç¨‹ä¸»æœºçš„IPåœ°å€ User: ç”¨äºç™»å½•è¿œç¨‹ä¸»æœºçš„ç”¨æˆ·å Port: ç”¨äºç™»å½•è¿œç¨‹ä¸»æœºçš„ç«¯å£ IdentityFile: æœ¬åœ°çš„id_rsaçš„è·¯å¾„éœ€è¦å¤šä¸ªè¿æ¥çš„è¯ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸Šé…ç½®å¤šä¸ªã€‚ é…ç½®å®Œæˆå¹¶ä¿å­˜åï¼Œå·¦ä¾§è¿æ¥æ ä¸­ä¾¿å‡ºç°äº†æ‰€è®¾å®šçš„çš„è¿œç¨‹ä¸»æœºã€‚å³é”®ç‚¹å‡»Connectä¾¿å¯è¿æ¥ã€‚åœ¨VS Codeä¸Šç¼–è¯‘Latexé…ç½® åœ¨æ¸…åæºä¸‹è½½å®‰è£…texlive.isoï¼Œå®‰è£…ã€‚ å®‰è£…VS Codeæ’ä»¶Latex Workshopã€‚ é…ç½®VS Code: åœ¨ VS Code ç•Œé¢ä¸‹æŒ‰ä¸‹ F1ï¼Œç„¶åé”®å…¥â€œsetjsonâ€ï¼Œç‚¹å‡»Preference: Open Settings(JSON); åœ¨æ‰“å¼€çš„settings.jsonæ–‡ä»¶ä¸­ï¼Œå°†ä»¥ä¸‹å¤§æ‹¬å·å†…çš„é…ç½®å†…å®¹å¤åˆ¶è¿›å»(å‚è€ƒï¼Œå„é€‰é¡¹å«ä¹‰å¯å‚è€ƒåŸæ–‡): { // latex-workshop config starts &quot;latex-workshop.latex.autoBuild.run&quot;: &quot;never&quot;, &quot;latex-workshop.showContextMenu&quot;: true, &quot;latex-workshop.intellisense.package.enabled&quot;: true, &quot;latex-workshop.message.error.show&quot;: false, &quot;latex-workshop.message.warning.show&quot;: false, &quot;latex-workshop.latex.tools&quot;: [ { &quot;name&quot;: &quot;xelatex&quot;, &quot;command&quot;: &quot;xelatex&quot;, &quot;args&quot;: [ &quot;-synctex=1&quot;, &quot;-interaction=nonstopmode&quot;, &quot;-file-line-error&quot;, &quot;%DOCFILE%&quot; ] }, { &quot;name&quot;: &quot;pdflatex&quot;, &quot;command&quot;: &quot;pdflatex&quot;, &quot;args&quot;: [ &quot;-synctex=1&quot;, &quot;-interaction=nonstopmode&quot;, &quot;-file-line-error&quot;, &quot;%DOCFILE%&quot; ] }, { &quot;name&quot;: &quot;latexmk&quot;, &quot;command&quot;: &quot;latexmk&quot;, &quot;args&quot;: [ &quot;-synctex=1&quot;, &quot;-interaction=nonstopmode&quot;, &quot;-file-line-error&quot;, &quot;-pdf&quot;, &quot;-outdir=%OUTDIR%&quot;, &quot;%DOCFILE%&quot; ] }, { &quot;name&quot;: &quot;bibtex&quot;, &quot;command&quot;: &quot;bibtex&quot;, &quot;args&quot;: [ &quot;%DOCFILE%&quot; ] } ], &quot;latex-workshop.latex.recipes&quot;: [ { &quot;name&quot;: &quot;XeLaTeX&quot;, &quot;tools&quot;: [ &quot;xelatex&quot; ] }, { &quot;name&quot;: &quot;PDFLaTeX&quot;, &quot;tools&quot;: [ &quot;pdflatex&quot; ] }, { &quot;name&quot;: &quot;BibTeX&quot;, &quot;tools&quot;: [ &quot;bibtex&quot; ] }, { &quot;name&quot;: &quot;LaTeXmk&quot;, &quot;tools&quot;: [ &quot;latexmk&quot; ] }, { &quot;name&quot;: &quot;xelatex -&amp;gt; bibtex -&amp;gt; xelatex*2&quot;, &quot;tools&quot;: [ &quot;xelatex&quot;, &quot;bibtex&quot;, &quot;xelatex&quot;, &quot;xelatex&quot; ] }, { &quot;name&quot;: &quot;pdflatex -&amp;gt; bibtex -&amp;gt; pdflatex*2&quot;, &quot;tools&quot;: [ &quot;pdflatex&quot;, &quot;bibtex&quot;, &quot;pdflatex&quot;, &quot;pdflatex&quot; ] }, ], &quot;latex-workshop.latex.clean.fileTypes&quot;: [ &quot;*.aux&quot;, &quot;*.bbl&quot;, &quot;*.blg&quot;, &quot;*.idx&quot;, &quot;*.ind&quot;, &quot;*.lof&quot;, &quot;*.lot&quot;, &quot;*.out&quot;, &quot;*.toc&quot;, &quot;*.acn&quot;, &quot;*.acr&quot;, &quot;*.alg&quot;, &quot;*.glg&quot;, &quot;*.glo&quot;, &quot;*.gls&quot;, &quot;*.ist&quot;, &quot;*.fls&quot;, &quot;*.log&quot;, &quot;*.fdb_latexmk&quot; ], &quot;latex-workshop.latex.autoClean.run&quot;: &quot;onFailed&quot;, &quot;latex-workshop.latex.recipe.default&quot;: &quot;lastUsed&quot;, &quot;latex-workshop.view.pdf.internal.synctex.keybinding&quot;: &quot;double-click&quot;, // latex-workshop config ends} ä½¿ç”¨ é€‰æ‹©ç¼–è¯‘é“¾ç‚¹å‡»è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆåé¢„è§ˆPDFæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¦‚æœå‘ç°.texæ–‡ä»¶ä¸èƒ½è‡ªåŠ¨æ¢è¡Œï¼Œalt + Zå³å¯ã€‚ä½¿ç”¨æŠ€å·§å¿«æ·é”® :rocket: æ ¹æ®æ–‡ä»¶åæ‰“å¼€æœ€è¿‘æ‰“å¼€è¿‡çš„æ–‡ä»¶ï¼šctrl + p ï¼ˆMacä¸ºcmd + pï¼‰ è°ƒå‡ºè®¾ç½®å¯¹è¯æ¡†: ctrl + shift + p æ–‡ä»¶å†…æ–¹æ³•/ç±»çš„å±•å¼€/æŠ˜å  æŠ˜å å…¨éƒ¨ï¼šCtrl + K Ctrl + 0 å±•å¼€å…¨éƒ¨ï¼šCtrl + K Ctrl + J æ›´å¤šå’Œç»†ç²’åº¦çš„æ–¹å¼è§å‚è€ƒ è·³è½¬åˆ°æŒ‡å®šè¡Œï¼šæŒ‰ctrl + Gï¼Œè¾“å…¥è¡Œæ•° å‡½æ•°è·³è½¬ä¸è¿”å›ï¼šæŒ‰ä½altåç‚¹å‡»å‡½æ•°æˆ–å˜é‡å®šä¹‰å¯å®ç°å‡½æ•°è·³è½¬ï¼Œè·³è½¬åéœ€è¦è¿”å›å¯ä»¥ï¼šAlt+\\(\\leftarrow\\)ä»visxæ‰‹åŠ¨å®‰è£…æ’ä»¶æœ‰çš„æ—¶å€™VS Codeå¸¸è§„çš„æ’ä»¶å®‰è£…æ–¹æ³•ï¼Œå› ä¸ºç½‘ç»œç­‰åŸå› æ— æ³•æ­£å¸¸å®‰è£…ï¼Œå¯å°è¯•æ‰‹åŠ¨ä¸‹è½½visxè¿›è¡Œå®‰è£…ã€‚æ­¥éª¤ä¸º è¿›å…¥ Marketplace: https://marketplace.visualstudio.com/VSCode æœç´¢å¹¶è¿›å…¥è¦å®‰è£…æ’ä»¶çš„é¡µé¢ï¼Œç‚¹å‡»Download Extensions åœ¨VS Codeä¾§è¾¹æ æ’ä»¶é¡µé¢ï¼Œç‚¹å‡»Install from VSIXï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©åˆšä¸‹è½½çš„VSIXæ–‡ä»¶å³å¯ã€‚ä¸ªæ€§åŒ–é…ç½®å¢åŠ ç»ˆç«¯æœ€å¤§æ˜¾ç¤ºè¡Œæ•°VS Codeçš„ç»ˆç«¯é»˜è®¤æœ€å¤§æ˜¾ç¤ºè¡Œæ•°ä¸º1000ï¼Œæœ‰æ—¶å€™è¾“å‡ºä¿¡æ¯å¾ˆé•¿æ—¶ä¼šæ˜¾ç¤ºä¸å…¨ï¼Œå¯ä»¥å¢å¤§æœ€å¤§æ˜¾ç¤ºè¡Œæ•°è§£å†³ï¼Œæ–¹æ³•ä¸ºï¼šç‚¹å‡»å·¦ä¸‹è§’é½¿è½®é€‰æ‹©settingsï¼Œåœ¨å¼¹å‡ºè®¾ç½®æœç´¢æ¡†ä¸­è¾“å…¥scrollbackï¼Œå°†å…¶ä»1000è°ƒæ•´è‡³éœ€è¦çš„æ›´å¤§æ•°å€¼ã€‚ä¿å­˜æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤å¤šä½™çš„ç©ºæ ¼è®¾ç½®-æœç´¢â€œtrailingâ€ï¼Œå‹¾é€‰â€œTrim Trailing Whitespaceâ€å–æ¶ˆæ–‡ä»¶è‡ªåŠ¨å®šä½åˆ°ä¾§è¾¹æ https://www.zhihu.com/question/65048697/answer/823033651åœ¨çº¿VS codeé¡¹ç›®repoåœ¨githubè®¿é—®æŸä¸ªä»“åº“æ—¶ï¼ŒæŠŠç½‘é¡µé“¾æ¥çš„githubåé¢åŠ ä¸Šä¸ª 1sï¼Œå³å¯ä»¥ç½‘é¡µç‰ˆçš„VS codeå½¢å¼é¢„è§ˆè¯¥ä»“åº“ã€‚(æˆ‘ç›´å‘¼+1s :eyeglasses:)ä½¿ç”¨ç¤ºä¾‹ï¼šæŠŠåŸå…ˆçš„githubç½‘å€é“¾æ¥ï¼šhttps://github.com/conwnet/github1sæ”¹ä¸ºhttps://github1s.com/conwnet/github1s" }, { "title": "Gitå­¦ä¹ ", "url": "/posts/Git%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "git, github", "date": "2020-10-18 21:55:00 +0800", "snippet": "åŠ¨æœºä¹…ä»°Gitç‰ˆæœ¬ç®¡ç†çš„å¤§åï¼Œè‡ªå·±åœ¨åšä¸€äº›é¡¹ç›®æ—¶ä¹Ÿå‘ç°ç‰ˆæœ¬çš„ç®¡ç†æ˜¯ä¸ªå¤´ç–¼çš„é—®é¢˜ã€‚å› æ­¤ä½œä¸ºä¸€é¡¹ç¡¬æŠ€èƒ½ï¼Œæœ‰å¿…è¦å¥½å¥½å­¦ä¸€ä¸‹ã€‚GitåŸç†é¦–å…ˆç†è§£ä¸€ä¸‹å·¥ä½œåŒºã€ç‰ˆæœ¬åº“çš„æ¦‚å¿µã€‚ å·¥ä½œåŒºï¼šä»“åº“ç›®å½•ä¸‹é™¤.gitä¹‹å¤–çš„ï¼Œç”¨æˆ·è¿›è¡Œä¸€ç³»åˆ—æ–°å»ºã€ä¿®æ”¹æ–‡ä»¶çš„åŒºåŸŸã€‚ ç‰ˆæœ¬åº“ï¼šä»“åº“ç›®å½•ä¸‹çš„ä¸€ä¸ª(éšè—)ç›®å½•.gitï¼Œè¿™ä¸ªå°±æ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚ ç‰ˆæœ¬åº“ä¸­æœ‰æš‚å­˜åŒº(stageæˆ–index)ã€(è‡ªåŠ¨åˆ›å»ºçš„)masteråˆ†æ”¯å’ŒæŒ‡å‘è¯¥åˆ†æ”¯çš„æŒ‡é’ˆHEADã€‚ Gitçš„å·¥ä½œåŒºä¸ç‰ˆæœ¬åº“åˆ›å»ºç‰ˆæœ¬åº“åœ¨ç›®æ ‡ç›®å½•ä¸‹æ‰§è¡Œgit initï¼ŒæŠŠç›®æ ‡ç›®å½•å˜ä¸ºGitå¯ä»¥ç®¡ç†çš„ä»“åº“ã€‚æ‰§è¡Œåä¾¿å¯å‘ç°å½“å‰ç›®å½•è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ª.gitç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯Gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ã€‚ æ²¡äº‹ä¸è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œä¸ç„¶æ”¹ä¹±äº†ï¼Œå°±æŠŠGitä»“åº“ç»™ç ´åäº†ã€‚æ‰§è¡Œgit add &amp;lt;file&amp;gt;ï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚æ‰§è¡Œgit commit -m &quot;message&quot;ï¼ŒæŠŠæš‚å­˜åŒºçš„æ–‡ä»¶æäº¤ã€‚-måé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜ï¼Œå½“éœ€è¦æŸ¥çœ‹å†å²è®°å½•æ—¶æ˜¾ç¤ºçš„å°±æ˜¯è¿™ä¸ªè¯´æ˜ï¼Œæ‰€ä»¥è¦å†™å¾—æœ‰æ„ä¹‰äº›ï¼Œä¾¿äºåŒºåˆ†ã€‚ å¯ä»¥ä¸€æ¬¡addè®¸å¤šæ–‡ä»¶åˆ°ç¼“å­˜åŒºï¼Œå¦‚git add file1.txt, file2.txtï¼Œç„¶åä¸€æ¬¡æ€§commitæäº¤åˆ°ä»“åº“ä¸­ã€‚ git add .ï¼šaddæ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰å˜åŒ–ï¼Œåœ¨Git 2.xä¸­ä¸git add -Aç­‰æ•ˆï¼ˆåœ¨Git 1.xä¸­ä¸ç­‰æ•ˆï¼ŒåŒºåˆ«åœ¨äºgit add .ä¸åŒ…å«æ–‡ä»¶åˆ é™¤æ“ä½œï¼Œå¯å‚è§Stackoverflowï¼‰å‡ ä¸ªé‡è¦ä¸”å¸¸ç”¨çš„å‘½ä»¤ git statusï¼šæŸ¥çœ‹å½“å‰ä»“åº“çŠ¶æ€ä¿¡æ¯ã€‚ git ls-filesï¼šåˆ—å‡ºGitè·Ÿè¸ªäº†å“ªäº›å†…å®¹ã€‚ git rm --cached &amp;lt;file&amp;gt;ï¼šå¦‚æœä¸€äº›æ–‡ä»¶å·²ç»è¢«trackäº†ï¼Œä½†å®é™…ä¸Šå¹¶ä¸æƒ³trackï¼Œå¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤å°†å…¶ç§»å»ã€‚å‚è€ƒä½¿ç”¨.gitignoreæ–‡ä»¶.gitignoreä¸ºä¸€çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¾å¼åœ°å‘Šè¯‰Gitå“ªäº›æ–‡ä»¶ä¸è¦è¢«trackï¼Œå¯å‚è§bmcblogã€‚ä¸€ä¸ªæ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š# Binaries for programs and plugins*.exe*.dll*.so# Dependency directoriesvendor/ç‰ˆæœ¬ç®¡ç†æ’¤é”€åœ¨æš‚å­˜åŒºçš„å†…å®¹å·²ç»æ‰§è¡Œäº†git addæŠŠæ–‡ä»¶åŠ åˆ°äº†æš‚å­˜åŒºï¼Œä½†æ˜¯æƒ³æ’¤é”€è¿™æ¬¡æ“ä½œï¼Œå¯ä½¿ç”¨ï¼šå‚è€ƒgit resetå›é€€ç‰ˆæœ¬è¯¥æ“ä½œæŠŠåˆ†æ”¯å†…å®¹ç›´æ¥å›é€€å›è€ç‰ˆæœ¬ã€‚Gitç‰ˆæœ¬å›é€€ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨HEADæ ‡è¯†ã€‚åœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºä¸Šä¸€æ¬¡commitåçš„ç‰ˆæœ¬ git reset --hard HEAD ä½¿ç”¨commit idã€‚git logå’Œgit reflogå¯è·å–å†å²ç‰ˆæœ¬çš„commit idï¼Œä½¿ç”¨ git reset --hard &amp;lt;commit id&amp;gt; å¯ä»¥æ¢å¤åˆ°å¯¹åº”çš„ç‰ˆæœ¬ã€‚commit idä¸ç”¨å†™å…¨ï¼Œä¸€èˆ¬å†™å‰é¢5ä½å°±å¯ä»¥äº†ï¼ŒGitä¼šè‡ªåŠ¨è¡¥å…¨ã€‚ ä½¿ç”¨git reflogæŸ¥çœ‹commit id git resetåªä¼šå›æ»šmodifiedçš„æ–‡ä»¶ï¼Œæ–°å¢çš„æ–‡ä»¶åœ¨resetåä»å­˜åœ¨ã€‚å‡ ä¸ªé‡è¦ä¸”å¸¸ç”¨çš„å‘½ä»¤ git logï¼šæŸ¥çœ‹å†å²ä¿®æ”¹è®°å½•ã€‚ git log --pretty=oneline:ï¼šå†å²è®°å½•ç®€æ´è¾“å‡ºã€‚ è¾“å‡ºçš„å‰é¢ä¸€ä¸²æ•°å­—æ˜¯commit id(ç‰ˆæœ¬å·)ï¼Œæ˜¯æ ‡è¯†commitç‰ˆæœ¬çš„ä¾æ®ã€‚ å½“å›é€€åˆ°æ—§ç‰ˆæœ¬æ—¶ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å°†åªä¼šè¾“å‡ºè¯¥æ—§ç‰ˆæœ¬ä¹‹å‰çš„å†å²è®°å½•ï¼ˆåƒæ˜¯æ—¶å…‰ç©¿æ¢­åˆ°äº†æ—§ç‰ˆæœ¬å¯¹åº”çš„æ—¶åˆ»ï¼‰ï¼Œå¦‚æœæƒ³è¦æŸ¥çœ‹åŒ…å«ä»¥å¾€æ¯ä¸€æ¬¡çš„æ“ä½œï¼Œå¯ä½¿ç”¨ä¸‹é¢çš„è¿™æ¡git reflogå‘½ä»¤ã€‚ git reflogï¼šæŸ¥çœ‹ä½¿ç”¨è¿‡çš„æ¯ä¸€æ¬¡å‘½ä»¤ä»¥åŠå¯¹åº”çš„ç‰ˆæœ¬å·ã€‚åˆ†æ”¯ç®¡ç†Gitåˆ†æ”¯åŸç†GitæŠŠæ¯æ¬¡çš„æäº¤ä¸²æˆä¸€æ¡æ—¶é—´çº¿ï¼Œä¸€æ¡æ—¶é—´çº¿å°±æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ†æ”¯é—´çš„åˆ‡æ¢å®è´¨ä¸Šæ˜¯HEADæŒ‡å‘çš„åˆ‡æ¢ã€‚è¯¦è§å»–é›ªå³°-åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯ã€‚Gitä¸­é¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ã€‚Gitåˆ†æ”¯åŸç†åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯ åˆ›å»ºåˆ†æ”¯ï¼šgit branch &amp;lt;branch_name&amp;gt; åˆ‡æ¢è‡³åˆ†æ”¯ï¼šgit checkout &amp;lt;branch_name&amp;gt; æˆ– git switch &amp;lt;branch_name&amp;gt; åˆ›å»ºå¹¶åˆ‡æ¢è‡³è¯¥åˆ†æ”¯(ç­‰æ•ˆä¸ä¸Šè¿°ä¸¤æ¡å‘½ä»¤)ï¼šgit branch -b &amp;lt;branch_name&amp;gt; æˆ– git switch -c &amp;lt;branch_name&amp;gt; æŸ¥çœ‹å½“å‰æ‰€æœ‰åˆ†æ”¯ï¼šgit branch å½“å‰åˆ†æ”¯å‰ä¼šæ ‡æœ‰æ˜Ÿå·ã€‚ åˆå¹¶åˆ†æ”¯ä½¿ç”¨git merge &amp;lt;branch_A&amp;gt;å°†æŒ‡å®šåˆ†æ”¯branch_Aåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Šã€‚é»˜è®¤åˆå¹¶æ¨¡å¼æ˜¯Fast-forwardæ¨¡å¼ã€‚Fast-fowardæ¨¡å¼å¯ä»¥æ— ç—›ä½œç”¨äºåœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œå•çº¿å»¶ä¼¸åçš„åˆå¹¶ã€‚ fast forward å’Œ no fast fowardåˆå¹¶æ¨¡å¼åŒºåˆ« å¦‚æœæ‰§è¡Œäº†fast forwardï¼Œå¼€å‘è€…æ ¹æœ¬çœ‹ä¸åˆ°è¢«åˆå¹¶çš„åˆ†æ”¯ï¼Œå°±åƒåœ¨masterä¸Šç›´æ¥commitä¸€æ ·(å‚è€ƒ-segmentfault)ã€‚ åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š--no-ffå‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œå³git merge --no-ff &amp;lt;branch_A&amp;gt; åˆå¹¶è¿‡ç¨‹ä¸­çš„å†²çªè§£å†³å½“ä»åŒä¸€èŠ‚ç‚¹åˆ†å‰å‡ºçš„ä¸¤ä¸ªåˆ†æ”¯åˆ†åˆ«åœ¨åŒä¸€ä½ç½®åšäº†ä¸åŒçš„ä¿®æ”¹ï¼Œé‚£ä¹ˆç›´æ¥git mergeå°†æç¤ºå­˜åœ¨æ–‡ä»¶å‡ºç°å†²çªã€‚æ­¤æ—¶å¿…é¡»æ‰‹åŠ¨è§£å†³å†²çªåå†æäº¤ï¼Œå…·ä½“æ“ä½œä¸ºï¼š ç›´æ¥åœ¨æœ¬åœ°æ‰“å¼€æç¤ºå†²çªçš„æ–‡ä»¶ï¼Œåœ¨å‘ç”Ÿå†²çªçš„åœ°æ–¹è¿›è¡Œç¼–è¾‘ï¼Œè§£å†³å†²çªï¼› git mergeçš„åˆå¹¶å†²çªç»“æœä¼šç›´æ¥åæ˜ åœ¨å·¥ä½œåŒºï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å·¥ä½œåŒºå†²çªæ–‡ä»¶å¯¹åº”ä½ç½®å¤„å¢åŠ äº†æ˜¾å¼çš„æç¤ºï¼Œå…·ä½“æ ¼å¼ä¸ºï¼šç”¨&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;ï¼Œ=======ï¼Œ&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œæ¯”å¦‚ &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEAD Creating a new branch is quick &amp;amp; simple. ======= Creating a new branch is quick AND simple. &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; feature1 è¿›è¡Œæ­£å¸¸çš„æäº¤æ“ä½œï¼Œå³ä¾æ¬¡è¿›è¡Œgit addå’Œgit commitå³å¯ã€‚åˆ é™¤åˆ†æ”¯ä½¿ç”¨git branch -d &amp;lt;branch_name&amp;gt;åˆ é™¤æŒ‡å®šåˆ†æ”¯ã€‚åˆ†æ”¯ç®¡ç†ç­–ç•¥å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼š masteråˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œå§‹ç»ˆæ‹¥æœ‰(å­˜æ¡£)ç€æœ€ç¨³å¥çš„ç‰ˆæœ¬ï¼› devåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œæœ‰äº†ç¨³å®šçš„åŠŸèƒ½åå†åˆå¹¶åˆ°masteråˆ†æ”¯ä¸Šï¼› å›¢é˜Ÿåˆä½œæ—¶ï¼Œæ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶ã€‚å›¢é˜Ÿåˆä½œçš„åˆ†æ”¯â€œä¿®æ”¹æ“ä½œâ€çš„å¤åˆ¶æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼Œmasteråˆ†æ”¯ä¸Šæœ‰ä¸€ä¸ªbugï¼Œäºæ˜¯åœ¨masteråˆ†æ”¯ä¸Šåˆ›å»ºä¸´æ—¶åˆ†æ”¯issue-101ï¼Œç„¶ååœ¨issue-101åˆ†æ”¯ä¸Šä¿®å¤åæäº¤(å¯¹åº”&amp;lt;commit_id&amp;gt;)ï¼Œç„¶åå°†åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œå°†issue-101åˆ†æ”¯åˆå¹¶ã€‚masteråˆ†æ”¯ä¸Šçš„bugä¿®å¤äº†ï¼Œä½†æ˜¯å› ä¸ºdevåˆ†æ”¯æ˜¯ä»æ—©æœŸmasteråˆ†æ”¯åˆ†å‡ºæ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿå­˜åœ¨è¿™ä¸ªbugï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œæ‰§è¡Œgit cherry-pick &amp;lt;commit_id&amp;gt;å°†issue-101åœ¨&amp;lt;commit_id&amp;gt;å¯¹åº”çš„é‚£æ¬¡æäº¤é‡Œæ‰€ä½œçš„â€œä¿®æ”¹æ“ä½œâ€å¤åˆ¶åˆ°devåˆ†æ”¯ä¸Šã€‚devåˆ†æ”¯ä¸Šçš„é‚£ä¸ªbugä¹Ÿå°±è¢«è§£å†³äº†ã€‚ :satisfied: è¿™é‡Œæœ‰ä¸€ä¸ªå¯è§†åŒ–äº¤äº’çš„Gitåˆ†æ”¯æ•™ç¨‹ï¼ŒæŒºæœ‰æ„æ€ã€‚æ ‡ç­¾ç®¡ç†åˆ›å»ºæ ‡ç­¾Gitçš„æ ‡ç­¾(tag)å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡å‘æŸä¸ªcommitçš„æŒ‡é’ˆï¼Œä¸commit_idä½œç”¨å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ›´é€‚åˆäººç±»è®°å¿†ã€‚å¦å¤–ï¼Œå¯¹åº”é‡Œç¨‹ç¢‘æ€§çš„æäº¤ï¼Œä¹Ÿå¯ä»¥ç‰¹æ„ä¸ºå…¶æ‰“ä¸Šä¸€ä¸ªtagã€‚æ‰“tagçš„æ–¹æ³•ä¸ºgit tag &amp;lt;tag_name&amp;gt;é»˜è®¤tagæ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„commitä¸Šçš„ã€‚å¦‚æœæƒ³è¦ä¸ºæŸä¸€ä¸ªcommit_idæ‰“ä¸Štagï¼Œå¯ä»¥git tag &amp;lt;tag_name&amp;gt; &amp;lt;commit_id&amp;gt;æŸ¥çœ‹æ ‡ç­¾ä½¿ç”¨git tagæŸ¥çœ‹å½“å‰æ‰€æœ‰æ ‡ç­¾ã€‚æ ‡ç­¾ä¸æ˜¯æŒ‰æ—¶é—´é¡ºåºåˆ—å‡ºï¼Œè€Œæ˜¯æŒ‰å­—æ¯æ’åºçš„ã€‚ä½¿ç”¨git show &amp;lt;tag_name&amp;gt;æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼ˆè¯¥æ ‡ç­¾å¯¹åº”çš„commit_idã€æäº¤ä½œè€…ã€æ—¥æœŸã€æ‰€ä½œçš„ä¿®æ”¹ç­‰ï¼‰ã€‚æ“ä½œæ ‡ç­¾ä½¿ç”¨git tag -d &amp;lt;tag_name&amp;gt;åˆ é™¤æ ‡ç­¾ã€‚ä½¿ç”¨git push origin &amp;lt;tag_name&amp;gt;å°†æ ‡ç­¾å¯¹åº”çš„æäº¤æ¨é€åˆ°è¿œç¨‹ã€‚è¿œç¨‹ä»“åº“åˆæ¬¡ä½¿ç”¨Windowsåˆæ¬¡ä½¿ç”¨è‡ªå·±çš„è¿œç¨‹ä»“åº“éœ€è¦åˆ›å»ºSSH keyæ¥åœ¨githubä¸Šè¿›è¡ŒGitä»“åº“æ‰˜ç®¡ã€‚(æ³¨ï¼šWindowsä¸‹ä¸»ç›®å½•ä¸ºC:\\Users\\ç”¨æˆ·å\\)UbuntuåŒæ ·éœ€è¦åˆ›å»ºSSH keyæ¥åœ¨githubä¸Šè¿›è¡ŒGitä»“åº“æ‰˜ç®¡ã€‚(æ³¨ï¼š Ubuntuçš„sshæ–‡ä»¶åœ¨~/.ssh)Gitæ“ä½œåŸç†å›¾æ·»åŠ è¿œç¨‹åº“å½“å…ˆæœ‰æœ¬åœ°ä»“åº“ï¼Œå¸Œæœ›åŒæ­¥åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼š åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼› æŠŠæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“å…³è”ï¼› git remote add origin git@github.com:&amp;lt;account_name&amp;gt;/&amp;lt;repo_name&amp;gt;.git è¿™é‡Œçš„originæ˜¯è®¾å®šçš„è¿œç¨‹åº“çš„åå­—ï¼Œåé¢è·Ÿçš„æ˜¯ä»“åº“çš„åœ°å€ã€‚originæ˜¯Gité»˜è®¤çš„å«æ³•ï¼Œä¹Ÿå¯ä»¥æ”¹ä¸ºå…¶ä»–åå­—ã€‚ æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æ¨é€åˆ°è¿œç¨‹åº“ã€‚ git push -u origin master å³å°†æœ¬åœ°masteråˆ†æ”¯çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹åº“originçš„masteråˆ†æ”¯ä¸Š(åœ¨æœ¬åœ°masteråˆ†æ”¯æ¨é€å°±æ¨åˆ°è¿œç¨‹çš„masteråˆ†æ”¯ä¸Šï¼Œåœ¨æœ¬åœ°devåˆ†æ”¯æ¨é€å°±å¯¹åº”æ¨é€åˆ°è¿œç¨‹çš„devåˆ†æ”¯ä¸Š)ã€‚ç”±äºåˆæ¬¡æäº¤æ—¶ï¼Œè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œè¿™é‡Œè¿˜åŠ äº†å‚æ•°-uï¼Œå®ƒæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼ˆæ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”é—®é¢˜ï¼Œåé¢ä¼šæåˆ°å¤šæ¬¡ï¼‰ï¼Œç®€åŒ–åç»­æ¨é€çš„å‘½ä»¤ã€‚åœ¨ä»¥åçš„æ¨é€ï¼Œåªéœ€ git push origin master å…‹éš†è¿œç¨‹ä»“åº“å½“å·²æœ‰è¿œç¨‹ä»“åº“ï¼Œå¸Œæœ›å…‹éš†åˆ°æœ¬åœ°æ—¶ï¼šgit clone &amp;lt;repo_addr&amp;gt;å½“ä»è¿œç¨‹ä»“åº“å…‹éš†æ—¶ï¼Œåœ¨ä¸‹è½½æ–‡ä»¶çš„åŒæ—¶ï¼Œä¹Ÿè‡ªåŠ¨æŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥äº†ï¼Œå¹¶ä¸”ï¼Œè¿œç¨‹ä»“åº“çš„é»˜è®¤åç§°æ˜¯originã€‚githubä¸ºä»“åº“æä¾›äº†å¤šä¸ªåœ°å€(httpsåè®®ã€sshåè®®)ï¼Œä¸è¿‡ä¼˜å…ˆé€‰ç”¨sshåè®®ï¼Œé€Ÿåº¦æ›´å¿«è€Œä¸”æ–¹ä¾¿ã€‚æ¯”å¦‚git clone git@github.com:ZhangGe6/onnx-modifier.git å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šfatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists. è§£å†³ï¼šæ£€æŸ¥æœ¬åœ°ç”µè„‘æ˜¯å¦å·²ç»åˆ›å»ºSSH key(æ–°ç”µè„‘æœ‰æ—¶ä¼šå¿˜è®°)ã€‚ è¿œç¨‹å…‹éš†åˆ«äººçš„ä»“åº“æ—¶ï¼Œé»˜è®¤åªèƒ½çœ‹åˆ°masteråˆ†æ”¯ï¼Œå¦‚æœéœ€è¦çœ‹åˆ°å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚devåˆ†æ”¯æ—¶ï¼Œåˆ™éœ€è¦git checkout -b dev origin/devè¿œç¨‹åˆ†æ”¯ç®¡ç†æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼šä½¿ç”¨git remoteæŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œ åŠ ä¸Š-vå‚æ•°å¯ä»¥æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå³pullå’Œpushçš„æƒé™ã€‚$ git remoteorigin$ git remote -vorigin git@github.com:michaelliao/learngit.git (fetch)origin git@github.com:michaelliao/learngit.git (push)æ¨é€åˆ†æ”¯æ¨é€åˆ†æ”¯ï¼Œå°±æ˜¯æŠŠæŒ‡å®šåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æœ¬åœ°æäº¤æ¨é€åˆ°è¿œç¨‹åº“ï¼Œä½¿ç”¨git push origin &amp;lt;branch_name&amp;gt;å³å°†&amp;lt;branch_name&amp;gt;æŒ‡å®šçš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹å¯¹åº”åˆ†æ”¯ã€‚ æ³¨ï¼šå®é™…æ¨é€å“ªä¸ªåˆ†æ”¯ä¸å½“å‰åœ¨å“ªä¸ªåˆ†æ”¯æ— å…³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿å½“å‰å¤„äºdevåˆ†æ”¯ï¼Œæ‰§è¡Œgit push origin masterä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°è¿œç¨‹masteråˆ†æ”¯ï¼Œè€Œä¸æ˜¯è¿œç¨‹devåˆ†æ”¯äº‘äº‘ã€‚æŠ“å–åˆ†æ”¯æŠ“å–åˆ†æ”¯ï¼Œå°±æ˜¯æŠŠè¿œç¨‹åº“ä¸­çš„ï¼ˆå½“å‰å·¥ä½œåŒºæ‰€åœ¨åˆ†æ”¯åœ¨è¿œç¨‹åº“ä¸­å…³è”çš„ï¼‰åˆ†æ”¯ç›´æ¥æŠ“å–ä¸‹æ¥åˆ°å·¥ä½œåŒºï¼Œä½¿ç”¨git pullå¦‚æœå‡ºç°There is no tracking information for the current branch....If you wish to set tracking information for this branch you can do so with: git branch --set-upstream-to=origin/&amp;lt;branch&amp;gt; &amp;lt;cur_local_branch&amp;gt;åˆ™æŒ‰ç…§æç¤ºæ‰§è¡Œgit branch --set-upstream-to=origin/&amp;lt;remote_branch&amp;gt; &amp;lt;cur_local_branch&amp;gt;å³å°†è¿œç¨‹åº“ä¸­çš„remote_branchåˆ†æ”¯å’Œæœ¬åœ°cur_local_branchå…³è”èµ·æ¥ï¼Œä»¥ååœ¨cur_local_branchä¸‹æ‰§è¡Œgit pullæ“ä½œæ—¶éƒ½ä¼šä»å…³è”çš„remote_branchè¿›è¡ŒæŠ“å–ã€‚å†²çªè§£å†³æ¨é€å†²çªè§£å†³å½“ä¸¤æ¬¡pushå‘ç”Ÿå†²çªï¼ˆæ¯”å¦‚ä¸¤æ¬¡pushåœ¨å¯¹åº”åŒä¸€ä¸ªä½ç½®åšäº†ä¸åŒçš„ä¿®æ”¹ï¼‰æ—¶ï¼Œåˆ™éœ€è¦æŠŠä¸Šä¸€æ¬¡çš„æ¨é€pullä¸‹æ¥ï¼Œåœ¨æœ¬åœ°è§£å†³å†²çªåï¼Œé‡æ–°pushä¸Šå»ã€‚æŠ“å–å†²çªè§£å†³æŠ“å–å†²çªçš„è§£å†³ï¼Œå®è´¨ä¸Šå°±æ˜¯æœ¬åœ°çš„å†²çªè§£å†³äº†ã€‚åœ¨å¯¹åº”å†²çªçš„åœ°æ–¹åšå¥½å¢åˆ ä¿ç•™å³å¯ã€‚åä½œï¼š How to create a pull request in GitHub Checking out pull requests locallyè‡´è°¢ä»¥ä¸Šå†…å®¹æ ¹æ®å»–é›ªå³°è€å¸ˆçš„Gitæ•™ç¨‹æ€»ç»“æ‘˜å–è€Œæ¥ã€‚å»–é›ªå³°è€å¸ˆçš„è¿™ä»½æ•™ç¨‹ä½¿ç”¨å…·ä½“å®ä¾‹ï¼Œæ·±å…¥æµ…å‡ºåœ°è®²è§£äº†å¸¸ç”¨çš„Gitçš„åŸç†å’Œå¸¸ç”¨æ“ä½œï¼Œéå¸¸é€‚åˆåˆå­¦è€…ï¼Œè·Ÿç€å®é™…æ“ä½œä¸€ç•ªåæ”¶è·é¢‡ä¸°ã€‚æ„Ÿè°¢å»–è€å¸ˆçš„å·¥ä½œï¼å…¶ä»–æ“ä½œä»¥ä¸‹æ˜¯ä¸€äº›å¹³æ—¶ä½¿ç”¨ä¸­ç§¯ç´¯çš„å…¶ä»–æ“ä½œã€‚Git ç‰ˆæœ¬å‡çº§(è‡³æœ€æ–°ç‰ˆæœ¬)å‚è€ƒ æŸ¥çœ‹å½“å‰Gitç‰ˆæœ¬ï¼šgit --version å‡çº§Gitç‰ˆæœ¬ï¼š æ·»åŠ æºï¼šsudo add-apt-repository ppa:git-core/ppa æ›´æ–°å®‰è£…åˆ—è¡¨ï¼šsudo apt-get update å‡çº§Gitï¼šsudo apt-get install git Partial Cloneå‚è€ƒä½¿ç”¨Githubé•œåƒGiteeå»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™-ä½¿ç”¨Giteeäº²æµ‹cloneé‚£çœŸæ˜¯å¿«å¾—ä¸æ˜¯ä¸€ç‚¹ä¸¤ç‚¹..GitçŠ¶æ€ç å‚è€ƒ M: modified A: added D: deleted R: renamed C: copied U: updated but unmergedGitä»å†å²è®°å½•ä¸­åˆ é™¤å¤§æ–‡ä»¶å’ŒæŸ¥çœ‹æ–‡ä»¶å¤§å°å‚è€ƒæŸ¥çœ‹ä¸ªäººåœ¨githubçš„æ‰€æœ‰commentç‚¹å‡»è¿™ä¸ªç¥å¥‡çš„é“¾æ¥ï¼š https://github.com/notifications/subscriptions?reason=commentå‚è€ƒtrouble shootssh: Could not resolve hostname github.com: Name or service not knownssh -T git@github.comå‚è€ƒ" }, { "title": "UbuntuåŸºç¡€æ“ä½œ", "url": "/posts/Ubuntu%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/", "categories": "å®è·µ, åŸºç¡€", "tags": "ubuntu", "date": "2020-10-14 17:06:00 +0800", "snippet": "å¸¸ç”¨å‘½ä»¤è¡Œ åˆ é™¤ï¼šrm -rf &amp;lt;file_or_folder_name&amp;gt; å¤åˆ¶ï¼šctrl+insert / å…‰æ ‡é€‰ä¸­ ç²˜è´´ï¼šShift + insert / æ»šè½®æŒ‰ä¸‹ / è§¦æ‘¸æ¿åŒæŒ‡ é‡å‘½å/ç§»åŠ¨æ–‡ä»¶ï¼šmv A Bï¼ˆå°†Aé‡å‘½åä¸º/ç§»åŠ¨åˆ°Bï¼‰ æŸ¥çœ‹å†…å­˜ä½¿ç”¨ï¼štop æŸ¥çœ‹æœ¬æœºç¡¬ç›˜ä¿¡æ¯ æŸ¥çœ‹å·²æŒ‚è½½çš„ç¡¬ç›˜ä¿¡æ¯ï¼šdf -h æŸ¥çœ‹æœ¬æœºä¸Šæ‰€æœ‰ï¼ˆåŒ…æ‹¬æœªæŒ‚è½½çš„ï¼‰ç¡¬ç›˜ä¿¡æ¯ï¼šlsblk å…³äºç¡¬ç›˜çš„æŒ‚è½½ä¸å¸è½½ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œ ä¿®æ”¹æ–‡ä»¶æƒé™ï¼šchmod Linuxä¸‹æ–‡ä»¶çš„æƒé™ç±»å‹ä¸€èˆ¬åŒ…æ‹¬è¯»rï¼Œå†™wï¼Œæ‰§è¡Œxä¸‰ç§ï¼›Linuxä¸‹æƒé™çš„ç²’åº¦æœ‰æ‹¥æœ‰è€…u ã€ç¾¤ç»„g ã€å…¶å®ƒç»„oä¸‰ç§ã€‚ä½¿ç”¨æ•°å­—è¡¨ç¤ºæƒé™ï¼šè§„å®šæ•°å­— 4 ã€2 å’Œ 1è¡¨ç¤ºè¯»ã€å†™ã€æ‰§è¡Œæƒé™ï¼Œåˆ™åŒæ—¶å¢åŠ è¯»ã€å†™ã€æ‰§è¡Œåˆ™å¯¹åº”æ•°å­—4+2+1=7ï¼Œä¸ºæ‹¥æœ‰è€…u ã€ç¾¤ç»„g ã€å…¶å®ƒç»„oå‡èµ‹äºˆä¸Šè¿°æƒé™çš„å‘½ä»¤ä¸ºã€‚ å‚è€ƒï¼šLinuxæƒé™è¯¦è§£ ç»™æŸä¸€æ–‡ä»¶å¢åŠ æƒé™ï¼šchmod 777 &amp;lt;fileName&amp;gt; ç»™æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å¢åŠ æƒé™ï¼šchmod -R 777 &amp;lt;dirName&amp;gt; åˆ·æ–°ldconfigåŠ¨æ€åº“ç¼“å­˜æ–‡ä»¶ï¼šldconfig ä¸ç®¡åšäº†ä»€ä¹ˆå…³äºlibraryçš„å˜åŠ¨åï¼Œå°¤å…¶æ˜¯æœ€å¥½éƒ½ldconfigä¸€ä¸‹ï¼Œå¦åˆ™å¯èƒ½å‘ç”Ÿæ‰¾ä¸åˆ°é“¾æ¥åº“çš„é”™è¯¯ã€‚ æŸ¥çœ‹ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“ï¼šldd &amp;lt;exe_name&amp;gt; å¸¸ç”¨æ¥è§£å†³å› ä¸ºç¼ºå°‘æŸäº›åº“æ–‡ä»¶æˆ–é“¾æ¥è‡³é”™è¯¯åº“å¯¼è‡´ç¨‹åºä¸èƒ½æ­£å¸¸è¿è¡Œçš„é—®é¢˜ã€‚ é€šè¿‡ç¬¦å·(symbol)æ¥è¿˜åŸå‡½æ•°åç§°ï¼šc++filt &amp;lt;symbol&amp;gt; æ¯”å¦‚é‡åˆ°undefined symbolæŠ¥é”™æ—¶å¯æ ¹æ®åé¢ç»™å‡ºçš„symbolè¿›è¡Œå‡½æ•°è¿˜åŸï¼Œè¿›è€Œè¿›è¡Œé”™è¯¯å®šä½ã€‚ å‚è€ƒï¼šC++ä¸­çš„åå­—ä¿®é¥° å®æ—¶æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µï¼šwatch nvidia-smi æ¸…ç©ºç»ˆç«¯ï¼š clear æˆ–reset è½¯é“¾æ¥ï¼š åˆ›å»ºï¼šln -s æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ åˆ é™¤ï¼šunlink å·²æœ‰çš„è½¯è¿æ¥ ä½¿ç”¨sshç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼šssh &amp;lt;username&amp;gt;@&amp;lt;ip_addr&amp;gt; -p &amp;lt;port&amp;gt; æ–‡ä»¶ä¿¡æ¯ç›¸å…³ï¼š æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼šls -a æŸ¥çœ‹æ–‡ä»¶å¤§å°(æƒé™ç­‰)ï¼šll -h (é€’å½’)æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤¹å¤§å°ï¼šdu -h æ˜¾ç¤ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶æ€»å¤§å°ï¼šdu -sh ä»…æ˜¾ç¤ºç¬¬ä¸€å±‚çº§çš„ç›®å½•å¤§å°ï¼šdu -h --max-depth=1 ç½‘ç»œç›¸å…³ æŸ¥çœ‹ç½‘ç»œæ¥å£é…ç½®ä¿¡æ¯ï¼šifconfig [-a] å‚è€ƒ æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ topå‘½ä»¤ æŒ‰cå¯å±•å¼€æ˜¾ç¤ºå…·ä½“çš„æ‰§è¡Œå‘½ä»¤command æ ¹æ®è¿›ç¨‹å·pidæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼šps -p &amp;lt;pid&amp;gt; -f -pä¸º--pidçš„ç¼©å†™ï¼Œåè·Ÿè¿›ç¨‹å·ï¼›-fæŒ‡å®šå±•å¼€æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤ï¼ˆIt causes the command arguments to be printed.ï¼‰ å‚è€ƒ ä¸€äº›å·¥å…·å‘½ä»¤grepå‘½ä»¤ä»filesä¸­å¯»æ‰¾æ»¡è¶³patternçš„æ–‡ä»¶(å‚è€ƒ)ï¼šgrep -rn &amp;lt;pattern&amp;gt; &amp;lt;files&amp;gt;findå‘½ä»¤åœ¨pathä¸‹æœå¯»æ–‡ä»¶åä¸ºnameçš„æ–‡ä»¶ï¼šfind &amp;lt;path&amp;gt; -name &amp;lt;name&amp;gt;scpå‘½ä»¤å‚è€ƒscpæ˜¯ secure copy çš„ç¼©å†™ï¼Œç›¸å½“äºcpå‘½ä»¤ + SSHï¼Œç”¨æ¥åœ¨ä¸¤å°ä¸»æœºä¹‹é—´åŠ å¯†ä¼ é€æ–‡ä»¶ã€‚åŸºæœ¬ç”¨æ³•ä¸ºï¼šscp source destination**ç¤ºä¾‹**# ä»è¿œç¨‹å¤åˆ¶åˆ°æœ¬åœ°scp [-P xxx] user@host:&amp;lt;scr_path&amp;gt; &amp;lt;dst_path&amp;gt;# ä»æœ¬åœ°å¤åˆ¶åˆ°è¿œç¨‹scp &amp;lt;scr_path&amp;gt; user@host:&amp;lt;dst_path&amp;gt; è§£å‹å’Œå‹ç¼©æ–‡ä»¶å‚è€ƒ Tipsï¼šåŒ…å«å¤§é‡å°æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ‰“åŒ…/å‹ç¼©åä¼ è¾“å¯æå¤§æå‡ä¼ è¾“æ•ˆç‡ã€‚.tar.gzæ–‡ä»¶ã€ .tgzæ–‡ä»¶# .tar.gz å’Œ .tgztar -zxvf FileName.tar.gz # è§£å‹tar -zcvf FileName.tar.gz DirName # å‹ç¼©DirNameå’Œå…¶ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼ˆå¤¹ï¼‰tar -C DesDirName -zxvf FileName.tar.gz # è§£å‹åˆ°ç›®æ ‡è·¯å¾„.raræ–‡ä»¶# linuxå¹¶æ²¡æœ‰è‡ªå¸¦rarï¼Œéœ€è¦å…ˆä¸‹è½½: sudo apt install rarrar x FileName.rar # è§£å‹rar a FileName.rar DirName # å‹ç¼©.zipæ–‡ä»¶# .zipæ–‡ä»¶unzip FileName.zip # è§£å‹zip FileName.zip DirName # å‹ç¼©aptapt(Advanced Package Tool)å‘½ä»¤æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä¸ä»…å¯ä»¥æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ç´¢å¼•ã€æ‰§è¡Œå®‰è£…æ–°è½¯ä»¶åŒ…ã€å‡çº§ç°æœ‰è½¯ä»¶åŒ…ï¼Œè¿˜èƒ½å¤Ÿå‡çº§æ•´ä¸ª Ubuntu ç³»ç»Ÿ(apt æ˜¯ Debian ç³»æ“ä½œç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·)ã€‚å®ƒçš„ä¸€äº›å¸¸ç”¨å‘½ä»¤è®°å½•å¦‚ä¸‹ å®‰è£…åŒ…ï¼šsudo apt install &amp;lt;package_name&amp;gt; å®‰è£…æœ¬åœ°çš„debæ–‡ä»¶ï¼šsudo apt install name.deb åˆ é™¤(ä½¿ç”¨apt installå®‰è£…çš„)åŒ…ï¼šsudo apt remove &amp;lt;package_name&amp;gt;screenâ€”â€”ç®¡ç†ä½ çš„è¿œç¨‹ç¨‹åºå½“æœ¬åœ°å…³é—­ç»ˆç«¯æ—¶ï¼Œä¼škillæ‰è¿œç¨‹åœ¨è¯¥ç»ˆç«¯è¿è¡Œçš„ç¨‹åºã€‚screenå·¥å…·å¯ä»¥å°†ç¨‹åºæ”¾å…¥åå°è¿è¡Œï¼Œè®©ç”¨æˆ·å®‰å…¨åœ°åœ¨æœ¬åœ°å…³é—­ç»ˆç«¯ã€‚è¿™å¯¹ç¨‹åºè¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œä½†æœ¬åœ°éœ€è¦é¢‘ç¹å¼€å…³ç»ˆç«¯çš„æƒ…å†µå°¤å…¶æœ‰å¸®åŠ©ã€‚å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘è¾¹éª‘è‡ªè¡Œè½¦è¾¹ç›‘è§†ç¬”è®°æœ¬ç»ˆç«¯äº†ï¼ˆé›¾ã€‚åˆ›å»ºscreençª—å£å¹¶è¿è¡Œç¨‹åº æ‰“å¼€å¹¶å‘½åä¸€ä¸ªæ–°çš„screençª—å£ï¼šscreen -S &amp;lt;screen_name&amp;gt; ä¹Ÿå¯ç›´æ¥screenåˆ›å»ºä¸€ä¸ªé»˜è®¤çª—å£ï¼Œè¯¥çª—å£ä¼šè·å¾—ä¸€ä¸ªè‡ªåŠ¨åˆ†é…çš„çª—å£åï¼Œä½†è¯¥çª—å£åä¸ä¾¿äºè®°å¿†ã€‚ åœ¨è¯¥screençª—å£å†…è¿è¡Œä½ çš„ç¨‹åºï¼špython a.py æ­¤æ—¶å¯ä»¥å®‰å…¨å…³æ‰è¯¥ç»ˆç«¯ï¼ˆæˆ– Ctrl+aï¼Œå†æŒ‰ä¸‹dç¦»å¼€è¯¥screençª—å£ï¼‰ æ¢å¤ç¨‹åº æŸ¥çœ‹åå°è¿è¡Œç¨‹åºï¼šscreen -ls æ¢å¤æŸä¸ªç¨‹åºï¼Œå¯é‡‡ç”¨ä¸¤ç§æ–¹æ³•ï¼š æ ¹æ®pidï¼šscreen -r &amp;lt;pid&amp;gt;ï¼ˆpidå¯¹åº”listå‰çš„æ•°å­—ï¼‰ æ ¹æ®screençª—å£åï¼šscreen -r &amp;lt;screen_name&amp;gt; listä¸­æ­£å¸¸å¯æ¢å¤ç¨‹åºçŠ¶æ€ä¸ºdetachedï¼Œè‹¥ç¨‹åºçŠ¶æ€å› ä¸æ˜åŸå› å˜ä¸ºattachedï¼Œåˆ™æ— æ³•æ­£å¸¸æ¢å¤ï¼Œæ­¤æ—¶ä½¿ç”¨screen -D -r &amp;lt;pid&amp;gt;ï¼Œå…ˆè¸¢æ‰å‰ä¸€ç”¨æˆ·ï¼Œå†ç™»é™†ã€‚link æ®è¯´nohupå‘½ä»¤ä¹Ÿå¯å®ç°ä¸Šè¿°ç±»ä¼¼æ•ˆæœï¼Œè€Œä¸”å¯ä»¥å°†è¾“å‡ºå†™å…¥ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ã€‚éœ€è¦æ—¶å¯ä»¥äº†è§£ä¸‹ã€‚é”€æ¯screençª—å£å½“å‰screençª—å£å·¥ä½œå®Œæˆåï¼Œåœ¨è¯¥screençª—å£ä¸‹æ‰§è¡Œ$ exitå³å¯é”€æ¯å¹¶é€€å‡ºè¯¥çª—å£ã€‚å…¶ä»–å½“screençª—å£ä¸‹æ— æ³•ä¸Šä¸‹ç¿»è¡Œæ—¶ï¼Œå…ˆæŒ‰ä¸‹ Ctrl+aï¼Œå†æŒ‰ä¸‹[å³å¯ç¿»è¡Œã€‚ä¿¡æ¯æŸ¥è¯¢æŸ¥çœ‹ç¨‹åºä¿¡æ¯ æŸ¥çœ‹å“ªäº›è·¯å¾„å®‰è£…äº†è¯¥ç¨‹åºï¼šwhereis &amp;lt;exe_name&amp;gt; æŸ¥çœ‹é»˜è®¤é€‰æ‹©çš„ç‰ˆæœ¬è·¯å¾„ï¼šwhich &amp;lt;exe_name&amp;gt; æŸ¥çœ‹é»˜è®¤é€‰æ‹©çš„ç‰ˆæœ¬ï¼š&amp;lt;exe_name&amp;gt; --version ä½¿ç”¨pipæŸ¥çœ‹ç¨‹åºä¿¡æ¯æ€»è§ˆï¼špip show &amp;lt;package_name&amp;gt; æŸ¥çœ‹æ–‡ä»¶ä¼ è¾“è¿›åº¦ï¼šprogresså·¥å…· github repoï¼Œå¯ç›‘æ§cp, mv, dd, tar, gzip/gunzip, catçš„è¿›åº¦ ä½¿ç”¨æ–¹æ³•ï¼Œå¦‚åœ¨ç»ˆç«¯è¾“å…¥watch progress -qå³å¯æ˜¾ç¤ºæ­£åœ¨ç›‘æ§çš„è¿›ç¨‹è¿›åº¦ æŸ¥çœ‹cpuä¿¡æ¯ï¼šlscpu æŸ¥çœ‹GPUä¿¡æ¯ï¼ˆNVIDIAï¼‰ï¼š lspci | grep -i nvidia ï¼ˆå¦‚æœè¾“å‡ºç‰ˆæœ¬å·ä¸ºåå…­è¿›åˆ¶æ•°ï¼Œåˆ™åˆ°The PCI ID Repository See alsoä¸€æ è¿›ä¸€æ­¥æŸ¥è¯¢ï¼‰ nvidia-smi æ ¹æ®è¿›ç¨‹å·æŸ¥çœ‹è¿›ç¨‹è¯¦ç»†ä¿¡æ¯ï¼šll /proc/&amp;lt;PID&amp;gt;æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼šmore /etc/lsb-release orï¼šcat /etc/issue å…¶ä»–æ›´æ”¹ç¡¬ç›˜åç§°å‚è€ƒï¼ˆåœ¨æ¡Œé¢ç¯å¢ƒä¸‹ï¼‰Show Applications -&amp;gt; Disks -&amp;gt; select disk to change name -&amp;gt; setting icon -&amp;gt; edit filesystem -&amp;gt; change -&amp;gt; donekworker &amp;amp; ksoftirqd using high CPU constantlyé‡æ–°å®‰è£…ç³»ç»Ÿåï¼Œå‘ç°kworkerå’ŒksoftirqdæŒç»­å ç”¨80+%å’Œ20+%çš„å†…å­˜ã€‚è¿™ä¸ªé—®é¢˜ç«Ÿç„¶åœ¨æ’å…¥è£…ç³»ç»Ÿçš„Uç›˜åå°±è‡ªåŠ¨æ¶ˆå¤±ã€‚ä½†æ˜¯æˆ‘çš„Uç›˜ä¹Ÿä¸èƒ½ä¸€ç›´æ’åœ¨ç”µè„‘ä¸Šï¼Œæ‰€ä»¥æ‰¾äº†ä¸€ä¸‹è§£å†³åŠæ³•ï¼Œå°è¯•æœ‰æ•ˆï¼ˆdisable USB autosuspendï¼‰å‚è€ƒ1 å‚è€ƒ2Ubuntu 18.04 gnome-shell high CPU usageå‚è€ƒå¯ä»¥å°è¯•é‡å¯gnomeï¼Œåšæ³•ï¼šAlt+F2ï¼Œç„¶ååœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥rï¼Œç‚¹å‡»ç¡®è®¤ã€‚Linuxç¯å¢ƒå˜é‡å…³äºLinuxçš„ç¯å¢ƒå˜é‡ï¼Œå¯å‚è€ƒè¿™ç¯‡ç»ˆç«¯å†å²å‘½ä»¤è‡ªåŠ¨è¡¥å…¨å‚è€ƒ æ‰“å¼€/etc/inputrcæ–‡ä»¶ï¼› å–æ¶ˆhistory-search-backwardå’Œhistory-search-forwardä¸¤è¡Œå‰çš„æ³¨é‡Šã€‚No space left on the deviceä¸´æ—¶è§£å†³åŠæ³•ï¼šå»~/.cache/ä¸­åˆ é™¤ä¸€äº›ç¼“å­˜æ–‡ä»¶ã€‚" }, { "title": "Anacondaä½¿ç”¨", "url": "/posts/Anaconda%E4%BD%BF%E7%94%A8/", "categories": "å®è·µ, ç¯å¢ƒé…ç½®", "tags": "anaconda", "date": "2020-10-14 14:53:00 +0800", "snippet": "å®‰è£…ä¸é…ç½®Anacondaå®‰è£…Anacondaå‚è€ƒ ä¸‹è½½.shå®‰è£…æ–‡ä»¶ï¼šæ¸…åé•œåƒæº è¿è¡Œ.shæ–‡ä»¶å®‰è£… sh ./Anaconda&amp;lt;_version_&amp;gt;-Linux-x86_64.sh å®‰è£…è¿‡ç¨‹ä¼šè¯¢é—®å®‰è£…ä½ç½®ã€‚å»ºè®®å®‰è£…ä½ç½®å°½é‡ä¸è¦æ”¾åœ¨é»˜è®¤çš„ä¸»ç›®å½•ï¼Œè€Œæ˜¯æ”¾åœ¨ä¸€ä¸ªç©ºé—´æ›´åŠ å®½è£•çš„å…¶ä»–åœ°æ–¹ã€‚å¦åˆ™æ—¥åä½¿ç”¨å¯èƒ½ä¼šå æ»¡ä¸»ç›®å½•ï¼Œå½±å“æœºå™¨ä½¿ç”¨ã€‚ å®‰è£…è¿‡ç¨‹ä¼šè¯¢é—®ï¼šâ€˜Do you wish the installer to initialize Anaconda3â€¦â€™,ï¼Œé»˜è®¤æ˜¯noï¼Œä½†æ˜¯å®˜æ–¹å»ºè®®é€‰æ‹©yes å‚è€ƒ æ›´æ–°ç¯å¢ƒå˜é‡ source ~/.bashrc æµ‹è¯• conda Anacondaé…ç½® æ·»åŠ æ¸…åæº conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ conda config --set show_channel_urls yes åˆ›å»ºæ–°ç¯å¢ƒ conda create -n &amp;lt;env_name&amp;gt; python=3.8 é€šè¿‡å¤åˆ¶å·²æœ‰çš„ç¯å¢ƒåˆ›å»ºæ–°ç¯å¢ƒ conda create -n BBB --clone AAA å…¶ä¸­BBBæ˜¯è¦åˆ›å»ºçš„æ–°ç¯å¢ƒï¼ŒAAAæ˜¯å·²æœ‰çš„ç¯å¢ƒã€‚ è¿›å…¥/é€€å‡ºç¯å¢ƒ conda activate env_name conda deactivate env_name åˆ é™¤ç¯å¢ƒ conda env remove -n &amp;lt;env_name&amp;gt; æŸ¥çœ‹ç›®å‰åˆ›å»ºçš„æ‰€æœ‰ç¯å¢ƒåˆ—è¡¨ conda env list ä¿®æ”¹é•œåƒæº(å‚è€ƒ1 å‚è€ƒ2) æ˜¾ç¤ºå½“å‰æºï¼šconda config --show åˆ é™¤å½“å‰æºï¼šconda config --remove channels &amp;lt;channel_to_remove&amp;gt; æ·»åŠ æ–°æºï¼šconda config --add channels &amp;lt;channel_to_add&amp;gt; å¯é€‰çš„å…¶ä»–æº(é™¤ä¸Šè¿°æ¸…åæºå¤–) ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒæº https://mirrors.sjtug.sjtu.edu.cn/anaconda/pkgs/main/https://mirrors.sjtug.sjtu.edu.cn/anaconda/pkgs/free/https://mirrors.sjtug.sjtu.edu.cn/anaconda/cloud/conda-forge/ ç§‘å¤§é•œåƒæº https://mirrors.ustc.edu.cn/anaconda/pkgs/main/https://mirrors.ustc.edu.cn/anaconda/pkgs/free/https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/ ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³ ModuleNotFoundError: No module named &#39;conda&#39; å‚è€ƒ ã€åŸå› ã€‘ï¼šï¼ˆæ¯ä¸€ä¸ªç‰ˆæœ¬çš„condaéƒ½æœ‰å…¶å¯¹åº”çš„pythonç‰ˆæœ¬å·ï¼Œï¼‰åœ¨baseç¯å¢ƒå®‰è£…çš„PythonåŒ…ä½¿pythonç‰ˆæœ¬å‘ç”Ÿæ”¹å˜ï¼Œä»è€Œå¯¼è‡´condaä¸èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ã€‚ ã€è§£å†³ã€‘ï¼šåœ¨åŸå®‰è£…ä½ç½®ï¼ˆå®‰è£…è¿‡ç¨‹ä¸­æŒ‡å®šï¼‰é‡æ–°å®‰è£…åŸå…ˆç‰ˆæœ¬çš„Anacondaï¼Œä½†æ˜¯ä¸ºäº†ä¿ç•™æˆ‘ä»¬ç”¨Anacondaå»ºçš„è™šæ‹Ÿç¯å¢ƒï¼Œå³Anaconda/envsä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨é‡æ–°æ­å»ºä¹‹å‰çš„è™šæ‹Ÿç¯å¢ƒã€‚åªè¦åœ¨å®‰è£…çš„æ—¶å€™ä½¿ç”¨å‚æ•°ï¼š-u å³å¯ï¼Œå¦‚ sh Anaconda3-5.2.0-Linux-x86_64.sh -u ã€ç»éªŒã€‘ï¼šä¸è¦åœ¨baseç¯å¢ƒä¸‹å®‰è£…å¯èƒ½å¯¼è‡´Pythonç‰ˆæœ¬å·å‘ç”Ÿæ”¹å˜çš„åŒ…ã€‚æ¯”å¦‚è¿™æ¬¡å°±æ˜¯åœ¨baseç¯å¢ƒä¸‹å®‰è£…Pytorch 1.7.1ï¼Œä½¿å¾—Pythonç‰ˆæœ¬ä»3.7å˜ä¸º3.6å¯¼è‡´çš„ã€‚ condaç˜¦èº« conda clean -p # åˆ é™¤æ²¡ç”¨çš„åŒ…conda clean -t # åˆ é™¤ä¿å­˜çš„taråŒ… å‚è€ƒ ä½¿ç”¨Ubuntuçš„è¯ï¼ŒAnacondaé»˜è®¤å®‰è£…åœ¨ä¸»ç›®å½•ä¸‹ã€‚å½“Anacondaæ–‡ä»¶å¤¹å¤ªå¤§å½±å“åˆ°æœºå™¨ä½¿ç”¨ï¼Œå°½ç®¡è¿™ä¸ªå‘½ä»¤å¯ä»¥è§£ç‡ƒçœ‰ä¹‹æ€¥ã€‚ä½†æœ€å¥½æ˜¯å®‰è£…æ—¶å°±æŠŠAnacondaå®‰è£…åœ¨å…¶ä»–æœ‰è¾ƒå¤§ç©ºé—´çš„ä½ç½®ã€‚ å®‰è£…condaåï¼Œå¯åŠ¨ç»ˆç«¯æˆ–è€…æ‰§è¡Œcondaéœ€è¦æ¼«é•¿çš„ç­‰å¾…æ—¶é—´ã€‚ è§£å†³åŠæ³• æˆ‘è‡ªå·±ç”µè„‘ä¸Šçš„ç»éªŒï¼šå¦‚æœä»ç„¶ä¸è¡Œï¼Œå°è¯•å…ˆconda activate &amp;lt;env&amp;gt;ï¼Œç­‰å¾…æ¿€æ´»æˆåŠŸåå†ï¼ˆæ ¹æ®æç¤ºï¼‰conda initä¸€ä¸‹ï¼Œä¸€èˆ¬å¯ä»¥è§£å†³ã€‚ " }, { "title": "g++ç¼–è¯‘å­¦ä¹ ", "url": "/posts/g++%E7%BC%96%E8%AF%91%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "g++", "date": "2020-10-10 20:00:00 +0800", "snippet": "åŠ¨æœºä¹‹å‰å¯¹g++/gccç¼–è¯‘è¿‡ç¨‹å’Œç¼–è¯‘é€‰é¡¹åªæœ‰æµ…æ˜¾äº†è§£ï¼Œå› ä¸ºé¡¹ç›®éœ€è¦ï¼Œå°†å…¶å­¦ä¹ ä¸€ä¸‹ã€‚ä»¥ä¸‹æ˜¯å­¦ä¹ ç¬”è®°ã€‚g++å’Œgcc GNU Compiler Collectionå³GUN ç¼–è¯‘å™¨é›†åˆï¼Œå®ƒå¯ä»¥ç¼–è¯‘Cã€C++ã€JAVã€Fortranã€Pascalã€Object-Cã€Adaç­‰è¯­è¨€ã€‚gccæ˜¯GCCä¸­çš„GUN C Compilerï¼ˆC ç¼–è¯‘å™¨ï¼‰ï¼›g++æ˜¯GCCä¸­çš„GUN C++ Compilerï¼ˆC++ç¼–è¯‘å™¨ï¼‰ã€‚ ç¼–è¯‘æ—¶g++ä¼šè‡ªåŠ¨é“¾æ¥æ ‡å‡†åº“STLï¼Œè€Œgccä¸ä¼šè‡ªåŠ¨é“¾æ¥STL(ä½¿ç”¨STLï¼Œéœ€è¦åŠ å‚æ•° â€“lstdc++)ã€‚ g++ç¼–è¯‘è¿‡ç¨‹ g++ç¼–è¯‘ç¨‹åºä¸»è¦ç»è¿‡å››ä¸ªè¿‡ç¨‹ï¼š1.é¢„å¤„ç†ï¼ˆPre-Processingï¼‰2.ç¼–è¯‘ ï¼ˆCompilingï¼‰3.æ±‡ç¼– ï¼ˆAssemblingï¼‰g++è°ƒç”¨æ±‡ç¼–å™¨è¿›è¡Œæ±‡ç¼–ï¼Œç”Ÿæˆç›®æ ‡æ–‡ä»¶.oã€‚4.é“¾æ¥ ï¼ˆLinkingï¼‰å°†ç¨‹åºæ‰€éœ€è¦çš„ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚g++ç¼–è¯‘å¸¸ç”¨é€‰é¡¹ é€‰é¡¹å ä½œç”¨ -o æŒ‡å®šç›®æ ‡åç§° (ç¼ºçœçš„æ—¶å€™,gcc ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶æ˜¯a.out) -c åªæ¿€æ´»é¢„å¤„ç†,ç¼–è¯‘,å’Œæ±‡ç¼–,ä¹Ÿå°±æ˜¯åªæŠŠç¨‹åºåšæˆobjæ–‡ä»¶ -Idir å°†dirç›®å½•åŠ å…¥æœç´¢å¤´æ–‡ä»¶çš„ç›®å½•è·¯å¾„ -Ldir å°†dirç›®å½•åŠ å…¥æœç´¢åº“çš„ç›®å½•è·¯å¾„ -llib é“¾æ¥åº“ç›®å½•(-LdiræŒ‡å®š)ä¸‹çš„libåº“ -Wall å¯ç”¨å¤§éƒ¨åˆ†è­¦å‘Šä¿¡æ¯ ä¸¾å‡ ä¸ªæ —å­g++ -E hello.c -o hello.i # å¯¹hello.cæ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ï¼Œç”Ÿæˆäº†hello.i æ–‡ä»¶g++ -S hello.i -o hello.s # å¯¹é¢„å¤„ç†æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆäº†æ±‡ç¼–æ–‡ä»¶g++ -c hello.s -o hello.o # å¯¹æ±‡ç¼–æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆäº†ã€ç›®æ ‡æ–‡ä»¶ã€‘g++ hello.o -o hello # å¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œç”Ÿæˆã€å¯æ‰§è¡Œæ–‡ä»¶ã€‘g++ hello.c -o hello # ç›´æ¥ç¼–è¯‘é“¾æ¥æˆã€å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ã€‘g++ test1.c test2.c -o test # ç¼–è¯‘test1.c test2.cå¹¶é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶testå¤´æ–‡ä»¶/åº“æ–‡ä»¶é“¾æ¥å¼€å‘è½¯ä»¶æ—¶ï¼Œå®Œå…¨ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹å‡½æ•°åº“çš„æƒ…å†µæ˜¯æ¯”è¾ƒå°‘è§çš„ï¼Œé€šå¸¸æ¥è®²éƒ½éœ€è¦å€ŸåŠ©è®¸å¤šå‡½æ•°åº“çš„æ”¯æŒæ‰èƒ½å¤Ÿå®Œæˆç›¸åº”çš„åŠŸèƒ½ã€‚è·¯å¾„ä¸€èˆ¬å¤´æ–‡ä»¶çš„ä½ç½®åœ¨ /usr/includeåŠå…¶å­ç›®å½•åº•ä¸‹çš„includeæ–‡ä»¶å¤¹ /usr/local/includeåŠå…¶å­ç›®å½•åº•ä¸‹çš„includeæ–‡ä»¶å¤¹åº“æ–‡ä»¶çš„ä½ç½®åœ¨ /usr/lib /usr/local/libä½†ä¹Ÿæœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ç”¨çš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ä¸åœ¨è¿™äº›ç›®å½•ä¸‹ï¼Œè¿™æ—¶å€™éœ€è¦æˆ‘ä»¬ä½¿ç”¨-Iå’Œ-Lç¼–è¯‘é€‰é¡¹æ¥æŒ‡å®šæœç´¢è·¯å¾„ï¼Œæ¯”å¦‚ï¼šç¨‹åºtest.cæ˜¯åœ¨linuxä¸Šä½¿ç”¨cè¿æ¥mysqlï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»mysqlå®˜ç½‘ä¸‹è½½MySQL Connectorsçš„Cåº“ï¼Œä¸‹è½½ä¸‹æ¥è§£å‹ä¹‹åï¼Œæœ‰ä¸€ä¸ªincludeæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«å¤´æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªlibæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«äºŒè¿›åˆ¶soæ–‡ä»¶ã€‚é‚£ä¹ˆå¤´æ–‡ä»¶æœç´¢ç›®å½•ä¸º$(workPath)/includeï¼Œlibæ–‡ä»¶å¤¹æ˜¯ä¸º$(workPath)/libåŠ¨æ€åº“/é™æ€åº“Linuxä¸‹çš„åº“æ–‡ä»¶åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯åŠ¨æ€é“¾æ¥åº“ï¼ˆé€šå¸¸ä»¥.soç»“å°¾ï¼‰å’Œé™æ€é“¾æ¥åº“ï¼ˆé€šå¸¸ä»¥.aç»“å°¾ï¼‰ï¼ŒäºŒè€…çš„åŒºåˆ«ä»…åœ¨äºç¨‹åºæ‰§è¡Œæ—¶æ‰€éœ€çš„ä»£ç æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½çš„ï¼Œè¿˜æ˜¯åœ¨ç¼–è¯‘æ—¶é™æ€åŠ è½½çš„ã€‚ é™æ€åº“ï¼ˆ.aï¼‰ï¼šç¨‹åºåœ¨ç¼–è¯‘é“¾æ¥çš„æ—¶å€™æŠŠåº“çš„ä»£ç é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ç¨‹åºè¿è¡Œçš„æ—¶å€™å°†ä¸å†éœ€è¦é™æ€åº“ã€‚ åŠ¨æ€åº“ï¼ˆ.soæˆ–.saï¼‰ï¼šç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ‰å»é“¾æ¥å…±äº«åº“çš„ä»£ç ï¼Œå¤šä¸ªç¨‹åºå…±äº«ä½¿ç”¨åº“çš„ä»£ç ï¼Œè¿™æ ·å°±å‡å°‘äº†ç¨‹åºçš„ä½“ç§¯ã€‚å‚è€ƒgccå’Œg++æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿâ€“çŸ¥ä¹Linuxç¼–è¯‘å·¥å…·ï¼šgccå…¥é—¨Linux GCCå¸¸ç”¨å‘½ä»¤gccç¼–è¯‘é€‰é¡¹æ€»ç»“" }, { "title": "makefileå­¦ä¹ ", "url": "/posts/Makefile%E5%AD%A6%E4%B9%A0/", "categories": "å®è·µ, ç¡¬æŠ€èƒ½", "tags": "makefile", "date": "2020-10-09 15:18:00 +0800", "snippet": "æœ¬æ–‡æ˜¯ä¸€äº›è‡ªå·±å­¦ä¹ makefileæ—¶çš„ç¬”è®°ã€‚ä»¥ä¸‹å†…å®¹ä¸»è¦æ‘˜å–è‡ªé™ˆçš“ç¼–å†™çš„è·Ÿæˆ‘ä¸€èµ·å†™Makefileï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ èµ„æ–™ã€‚makefileä»‹ç»å‚è€ƒmakefileçš„æ ¸å¿ƒè§„åˆ™target : prerequisites commandtargetæ˜¯ç›®æ ‡æ–‡ä»¶ï¼Œprerequisitesæ˜¯ç”Ÿæˆtargetçš„ä¾èµ–æ–‡ä»¶ã€‚å½“targetä¸å­˜åœ¨ï¼Œæˆ–prerequisitesä¸­å¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šçš„æ–‡ä»¶æ¯”targetæ–‡ä»¶è¦æ–°çš„è¯ï¼Œcommandæ‰€å®šä¹‰çš„å‘½ä»¤å°±ä¼šè¢«æ‰§è¡Œï¼Œcommandå‘½ä»¤ä¸€å®šè¦ç”±ä¸€ä¸ªTabé”®å¼€å¤´ã€‚åœ¨makefileæœ«å°¾ä¸€èˆ¬ä¼šçœ‹åˆ°ï¼Œç”¨æ¥åˆ é™¤ç¼–è¯‘äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶ç­‰ï¼šclean : rm ...è¿™é‡Œclean ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒåªä¸è¿‡æ˜¯ä¸€ä¸ªåŠ¨ä½œåå­—ï¼ˆä¼ªç›®æ ‡ï¼‰ï¼Œå…¶å†’å·åä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œé‚£ä¹ˆï¼Œmakeå°±ä¸ä¼šè‡ªåŠ¨å»æ‰¾å®ƒçš„ä¾èµ–æ€§ï¼Œä¹Ÿå°±ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œå…¶åæ‰€å®šä¹‰çš„å‘½ä»¤ã€‚è¦æ‰§è¡Œå…¶åçš„å‘½ä»¤ï¼Œå°±è¦åœ¨makeå‘½ä»¤åæ˜æ˜¾å¾—æŒ‡å‡ºè¿™ä¸ªlabelçš„åå­—ï¼Œå¦‚make cleanã€‚makeæ˜¯å¦‚ä½•å·¥ä½œçš„makeä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åå­—å«â€œMakefileâ€æˆ–â€œmakefileâ€çš„æ–‡ä»¶ï¼Œå¹¶æ ¹æ®è¯¥æ–‡ä»¶ä¸€å±‚ä¸€å±‚åœ°å»æ‰¾æ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼Œç›´åˆ°æœ€ç»ˆç¼–è¯‘å‡ºç¬¬ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ã€‚è¯¦ç»†å¯å‚è§è¿™é‡Œå’Œè¿™é‡Œã€‚ä¹¦å†™è§„åˆ™å‚è€ƒè§„åˆ™ä¸¾ä¾‹ä¼ªç›®æ ‡å¤šç›®æ ‡ä¸é™æ€æ¨¡å¼ã€$@ è¡¨ç¤ºç›®æ ‡çš„é›†åˆï¼Œå°±åƒä¸€ä¸ªæ•°ç»„ï¼Œ $@ ä¾æ¬¡å–å‡ºç›®æ ‡ï¼Œå¹¶æ‰§äºå‘½ä»¤ï¼Œå¯ç”¨äºå¤šç›®æ ‡ã€‚å‚è€ƒè¿™é‡Œã€‚é™æ€æ¨¡å¼å¯ä»¥æ›´åŠ å®¹æ˜“åœ°å®šä¹‰å¤šç›®æ ‡çš„è§„åˆ™ã€‚å…¶è¯­æ³•ä¸º&amp;lt;targets ...&amp;gt; : &amp;lt;target-pattern&amp;gt; : &amp;lt;prereq-patterns ...&amp;gt; &amp;lt;commands&amp;gt;ä¸¾ä¾‹ï¼šobjects = foo.o bar.oall: $(objects)$(objects): %.o: %.c &amp;lt;command&amp;gt;å…¶ä¸­%.oå³ä¸ºtarget-patternï¼Œ%.cä¸ºprereq-patternsã€‚%.o: %.cçš„å«ä¹‰ä¸ºï¼šå°†objectsä¸­æ‰€æœ‰ä»¥.oçš„ç›®æ ‡ï¼Œåç¼€æ¢ä¸º.cç»„æˆæ–°çš„é›†åˆã€‚ä½¿ç”¨å˜é‡å‚è€ƒå˜é‡åŸºç¡€ å˜é‡å®šä¹‰ VAL = ... å˜é‡ä½¿ç”¨ $(VAL) æˆ– ${VAL} å˜é‡ä¼šåœ¨ä½¿ç”¨æ—¶ç²¾ç¡®å±•å¼€ã€‚ å®šä¹‰å˜é‡å€¼æ—¶çš„=ä¸:= =å…è®¸ä½¿ç”¨å½“å‰å°šæœªå®šä¹‰å¥½çš„å˜é‡ä½œä¸ºå³å€¼ï¼Œä½†å¯èƒ½å‡ºç°é€’å½’å®šä¹‰çš„é—®é¢˜ï¼› :=å¼ºåˆ¶è¦æ±‚åªèƒ½ä½¿ç”¨å‰é¢å·²å®šä¹‰å¥½äº†çš„å˜é‡ä½œä¸ºå³å€¼ã€‚ å˜é‡é«˜çº§ç”¨æ³• å˜é‡æ›¿æ¢ # å®šä¹‰å˜é‡foo := a.o b.o # å˜é‡æ›¿æ¢bar := $(foo:.o=.c) # bar = a.c b.c# æˆ–bar := $(foo:%.o=%.c) # bar = a.c b.c å˜é‡è¿½åŠ  foo := a.o b.ofoo += c.o # foo = a.o b.o c.o è‡ªåŠ¨åŒ–å˜é‡ $@ï¼šå½“å‰è§„åˆ™ä¸­ï¼Œç›®æ ‡ï¼ˆæˆ–ç›®æ ‡é›†ï¼‰ã€‚ $^ï¼šå½“å‰è§„åˆ™ä¸­ï¼Œæ‰€æœ‰ä¾èµ–ç»„æˆçš„çš„é›†åˆã€‚ $&amp;lt;ï¼šå½“å‰è§„åˆ™ä¸­ï¼Œç¬¬ä¸€ä¸ªä¾èµ–ã€‚ ä¸¾ä¸ªæ —å­ï¼Œå¯¹ exc: library.cpp main.cpp é‚£ä¹ˆï¼Œ$@ å°±æŒ‡ä»£ excï¼Œ$^æŒ‡ä»£library.cpp main.cppï¼Œ$&amp;lt;æŒ‡ä»£library.cppã€‚ å¦‚æœ@$æŒ‡ä»£çš„ç›®æ ‡æœ‰å¤šä¸ªï¼ˆå³æ˜¯ä¸€ä¸ªç›®æ ‡é›†ï¼‰æ—¶ï¼Œåˆ™å°†ç›®æ ‡ä¾æ¬¡å–å‡ºå±•å¼€ï¼Œæ‰§è¡Œcommandï¼Œå‚è€ƒ è¿™ç§æ–¹å¼è²Œä¼¼å¯¹äºå¤šä¸ªç›¸äº’ç‹¬ç«‹çš„æ–‡ä»¶åˆ†åˆ«ç¼–è¯‘éå¸¸æ–¹ä¾¿ï¼Œå°¤å…¶å½“æ–‡ä»¶éå¸¸å¤šæ—¶ã€‚ ä¸¾ä¸ªæ —å­ï¼Œå¯¹ objects = foo.o bar.o all: $(objects) $(objects): %.o: %.c $(CC) -c $(CFLAGS) $&amp;lt; -o $@ å±•å¼€åå¯¹åº”æ‰§è¡Œ foo.o : foo.c $(CC) -c $(CFLAGS) foo.c -o foo.obar.o : bar.c $(CC) -c $(CFLAGS) bar.c -o bar.o ä½¿ç”¨æ¡ä»¶åˆ¤æ–­å‚è€ƒ å…³é”®å­—ifeqï¼Œifneqï¼Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ã€‚ç¤ºä¾‹ï¼š ifeq ($(CC),gcc) $(CC) -o foo $(objects) $(libs_for_gcc) else $(CC) -o foo $(objects) $(normal_libs) endif å…³é”®å­—ifdefï¼Œifndefï¼Œåˆ¤æ–­å˜é‡æ˜¯å¦æœ‰å€¼ã€‚ç¤ºä¾‹ï¼š foo =ifdef foo frobozz = yeselse frobozz = noendif # è¯¥ä¾‹ä¸­frobozzä¸ºno ä½¿ç”¨å‡½æ•°å‡½æ•°çš„è°ƒç”¨è¯­æ³•ä¸ºï¼š$(&amp;lt;function&amp;gt; &amp;lt;arguments&amp;gt;)# æˆ–æ˜¯${&amp;lt;function&amp;gt; &amp;lt;arguments&amp;gt;}makefileæ”¯æŒçš„å‡½æ•°å¯å‚ç…§ï¼šå­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼Œæ–‡ä»¶åæ“ä½œå‡½æ•°è¿˜æœ‰å…¶ä»–ã€‚" }, { "title": "Customize the Favicon", "url": "/posts/customize-the-favicon/", "categories": "Blogging, Tutorial", "tags": "favicon", "date": "2019-08-11 00:34:00 +0800", "snippet": "The favicons of Chirpy are placed in the directory assets/img/favicons/. You may want to replace them with your own. The following sections will guide you to create and replace the default favicons.Generate the faviconPrepare a square image (PNG, JPG, or SVG) with a size of 512x512 or more, and then go to the online tool Real Favicon Generator and click the button Select your Favicon image to upload your image file.In the next step, the webpage will show all usage scenarios. You can keep the default options, scroll to the bottom of the page, and click the button Generate your Favicons and HTML code to generate the favicon.As Real Favicon Generator only allows to create favicons from pictures that are up to 2 MB in size, the tool websiteplanet allows to create favicons from pictures that are up to 5 MB from either JPG, PNG or GIF or even from a gallery. It is worthy to try this if we care about the favicon size limit. (Thanks Emma for recommanding the tool !)website planet and click the button Generate!Download &amp;amp; ReplaceDownload the generated package, unzip and delete the following two from the extracted files: browserconfig.xml site.webmanifestAnd then copy the remaining image files (.PNG and .ICO) to cover the original files in the directory assets/img/favicons/ of your Jekyll site. If your Jekyll site doesnâ€™t have this directory yet, just create one.The following table will help you understand the changes to the favicon files: File(s) From Online Tool From Chirpy *.PNG âœ“ âœ— *.ICO âœ“ âœ— âœ“ means keep, âœ— means delete.The next time you build the site, the favicon will be replaced with a customized edition." }, { "title": "Getting Started", "url": "/posts/getting-started/", "categories": "Blogging, Tutorial", "tags": "getting started", "date": "2019-08-09 20:55:00 +0800", "snippet": "PrerequisitesFollow the instructions in the Jekyll Docs to complete the installation of Ruby, RubyGems, Jekyll, and Bundler. In addition, Git is also required to be installed.InstallationCreating a New SiteThere are two ways to create a new repository for this theme: Using the Chirpy Starter - Easy to upgrade, isolates irrelevant project files so you can focus on writing. Forking on GitHub - Convenient for custom development, but difficult to upgrade. Unless you are familiar with Jekyll and are determined to tweak or contribute to this project, this approach is not recommended.Option 1. Using the Chirpy StarterCreate a new repository from the Chirpy Starter and name it &amp;lt;GH_USERNAME&amp;gt;.github.io, where GH_USERNAME represents your GitHub username.Option 2. Forking on GitHubFork Chirpy on GitHub and rename it to &amp;lt;GH_USERNAME&amp;gt;.github.io. Please note that the default branch code is in development. If you want the site to be stable, please switch to the latest tag and start writing.And then execute:$ bash tools/init.sh If you donâ€™t want to deploy your site on GitHub Pages, append option --no-gh at the end of the above command.The above command will: Removes some files or directories from your repository: .travis.yml files under _posts If the option --no-gh is provided, the directory .github will be deleted. Otherwise, set up the GitHub Action workflow by removing the extension .hook of .github/workflows/pages-deploy.yml.hook, and then remove the other files and directories in the folder .github. Removes item Gemfile.lock from .gitignore. Creates a new commit to save the changes automatically.Installing DependenciesBefore running for the first time, go to the root directory of your site, and install dependencies as follows:$ bundleUsageConfigurationUpdate the variables of _config.yml as needed. Some of them are typical options: url avatar timezone langCustoming StylesheetIf you need to customize the stylesheet, copy the themeâ€™s assets/css/style.scss to the same path on your Jekyll site, and then add the custom style at the end of the style file.Starting from v4.1.0, if you want to overwrite the SASS variables defined in _sass/addon/variables.scss, create a new file _sass/variables-hook.scss and assign new values to the target variable in it.Customing Static AssetsStatic assets configuration was introduced in version 5.1.0. The CDN of the static assets is defined by file _data/assets/cross_origin.yml, and you can replace some of them according to the network conditions in the region where your website is published.Also, if youâ€™d like to self-host the static assets, please refer to the chirpy-static-assets.Running Local ServerYou may want to preview the site contents before publishing, so just run it by:$ bundle exec jekyll sOr run the site on Docker with the following command:$ docker run -it --rm \\ --volume=&quot;$PWD:/srv/jekyll&quot; \\ -p 4000:4000 jekyll/jekyll \\ jekyll serveAfter a while, the local service will be published at http://127.0.0.1:4000.DeploymentBefore the deployment begins, check out the file _config.yml and make sure the url is configured correctly. Furthermore, if you prefer the project site and donâ€™t use a custom domain, or you want to visit your website with a base URL on a web server other than GitHub Pages, remember to change the baseurl to your project name that starts with a slash, e.g, /project-name.Now you can choose ONE of the following methods to deploy your Jekyll site.Deploy by Using Github ActionsFor security reasons, GitHub Pages build runs on safe mode, which restricts us from using plugins to generate additional page files. Therefore, we can use GitHub Actions to build the site, store the built site files on a new branch, and use that branch as the source of the GitHub Pages service.Quickly check the files needed for GitHub Actions build: Ensure your Jekyll site has the file .github/workflows/pages-deploy.yml. Otherwise, create a new one and fill in the contents of the sample file, and the value of the on.push.branches should be the same as your repoâ€™s default branch name. Ensure your Jekyll site has file tools/deploy.sh. Otherwise, copy it from here to your Jekyll site. Furthermore, if you have committed Gemfile.lock to the repo, and your runtime system is not Linux, donâ€™t forget to update the platform list in the lock file: $ bundle lock --add-platform x86_64-linux After the above steps, rename your repository to &amp;lt;GH_USERNAME&amp;gt;.github.io on GitHub.Now publish your Jekyll site by: Push any commit to remote to trigger the GitHub Actions workflow. Once the build is complete and successful, a new remote branch named gh-pages will appear to store the built site files. Browse to your repository on GitHub. Select the tab Settings, then click Pages in the left navigation bar, and then in the section Source of GitHub Pages, select the /(root) directory of branch gh-pages as the publishing source. Remember to click Save before leaving. Visit your website at the address indicated by GitHub. Manually Build and DeployOn self-hosted servers, you cannot enjoy the convenience of GitHub Actions. Therefore, you should build the site on your local machine and then upload the site files to the server.Go to the root of the source project, and build your site as follows:$ JEKYLL_ENV=production bundle exec jekyll bOr build the site on Docker:$ docker run -it --rm \\ --env JEKYLL_ENV=production \\ --volume=&quot;$PWD:/srv/jekyll&quot; \\ jekyll/jekyll \\ jekyll buildUnless you specified the output path, the generated site files will be placed in folder _site of the projectâ€™s root directory. Now you should upload those files to the target server.UpgradingIt depends on how you use the theme: If you are using the theme gem (there will be gem &quot;jekyll-theme-chirpy&quot; in the Gemfile), editing the Gemfile and update the version number of the theme gem, for example: - gem &quot;jekyll-theme-chirpy&quot;, &quot;~&amp;gt; 3.2&quot;, &quot;&amp;gt;= 3.2.1&quot;+ gem &quot;jekyll-theme-chirpy&quot;, &quot;~&amp;gt; 3.3&quot;, &quot;&amp;gt;= 3.3.0&quot; And then execute the following command: $ bundle update jekyll-theme-chirpy As the version upgrades, the critical files (for details, see the Startup Template) and configuration options will change. Please refer to the Upgrade Guide to keep your repoâ€™s files in sync with the latest version of the theme. If you forked from the source project (there will be gemspec in the Gemfile of your site), then merge the latest upstream tags into your Jekyll site to complete the upgrade.The merge is likely to conflict with your local modifications. Please be patient and careful to resolve these conflicts. " }, { "title": "Writing a New Post", "url": "/posts/write-a-new-post/", "categories": "Blogging, Tutorial", "tags": "writing", "date": "2019-08-08 14:10:00 +0800", "snippet": "This post will guide you how to write a post on Chirpy theme. Even if you have previous experience with Jekyll, this article is worth reading, because many features require specific variables to be set.Naming and PathCreate a new file named YYYY-MM-DD-TITLE.EXTENSION and put it in the _posts of the root directory. Please note that the EXTENSION must be one of md and markdown. If you want to save time of creating files, please consider using the plugin Jekyll-Compose to accomplish this.Front MatterBasically, you need to fill the Front Matter as below at the top of the post:---title: TITLEdate: YYYY-MM-DD HH:MM:SS +/-TTTTcategories: [TOP_CATEGORIE, SUB_CATEGORIE]tags: [TAG] # TAG names should always be lowercase--- The postsâ€™ layout has been set to post by default, so there is no need to add the variable layout in the Front Matter block.Timezone of DateIn order to accurately record the release date of a post, you should not only set up the timezone of _config.yml but also provide the postâ€™s timezone in variable date of its Front Matter block. Format: +/-TTTT, e.g. +0800.Categories and TagsThe categories of each post are designed to contain up to two elements, and the number of elements in tags can be zero to infinity. For instance:---categories: [Animal, Insect]tags: [bee]---Author InformationThe author information of the post usually does not need to be filled in the Front Matter , they will be obtained from variables social.name and the first entry of social.links of the configuration file by default. But you can also override it as follows:Add author information in _data/authors.yml (If your website doesnâ€™t have this file, donâ€™t hesitate to create one.)&amp;lt;author_id&amp;gt;: name: &amp;lt;full name&amp;gt; twitter: &amp;lt;twitter_of_author&amp;gt; url: &amp;lt;homepage_of_author&amp;gt;And then set up the custom author in the postâ€™s YAML block:---author: &amp;lt;author_id&amp;gt;--- Another benefit of reading the author information from the file _data/authors.yml is that the page will have the meta tag twitter:creator, which enriches the Twitter Cards and is good for SEO.Table of ContentsBy default, the Table of Contents (TOC) is displayed on the right panel of the post. If you want to turn it off globally, go to _config.yml and set the value of variable toc to false. If you want to turn off TOC for a specific post, add the following to the postâ€™s Front Matter:---toc: false---CommentsThe global switch of comments is defined by variable comments.active in the file _config.yml. After selecting a comment system for this variable, comments will be turned on for all posts.If you want to close the comment for a specific post, add the following to the Front Matter of the post:---comments: false---MathematicsFor website performance reasons, the mathematical feature wonâ€™t be loaded by default. But it can be enabled by:---math: true---MermaidMermaid is a great diagrams generation tool. To enable it on your post, add the following to the YAML block:---mermaid: true---Then you can use it like other markdown languages: surround the graph code with ```mermaid and ```.ImagesCaptionAdd italics to the next line of an imageï¼Œthen it will become the caption and appear at the bottom of the image:![img-description](/path/to/image)_Image Caption_SizeIn order to prevent the page content layout from shifting when the image is loaded, we should set the width and height for each image:![Desktop View](/assets/img/sample/mockup.png){: width=&quot;700&quot; height=&quot;400&quot; }Starting from Chirpy v5.0.0, height and width support abbreviations (height â†’ h, width â†’ w). The following example has the same effect as the above:![Desktop View](/assets/img/sample/mockup.png){: w=&quot;700&quot; h=&quot;400&quot; }PositionBy default, the image is centered, but you can specify the position by using one of the classes normal, left, and right. Once the position is specified, the image caption should not be added. Normal position Image will be left aligned in below sample: ![Desktop View](/assets/img/sample/mockup.png){: .normal } Float to the left ![Desktop View](/assets/img/sample/mockup.png){: .left } Float to the right ![Desktop View](/assets/img/sample/mockup.png){: .right } ShadowThe screenshots of the program window can be considered to show the shadow effect, and the shadow will be visible in the light mode:![Desktop View](/assets/img/sample/mockup.png){: .shadow }CDN URLIf you host the images on the CDN, you can save the time of repeatedly writing the CDN URL by assigning the variable img_cdn of _config.yml file:img_cdn: https://cdn.comOnce img_cdn is assigned, the CDN URL will be added to the path of all images (images of site avatar and posts) starting with /.For instance, when using images:![The flower](/path/to/flower.png)The parsing result will automatically add the CDN prefix https://cdn.com before the image path:&amp;lt;img src=&quot;https://cdn.com/path/to/flower.png&quot; alt=&quot;The flower&quot;&amp;gt;Image PathWhen a post contains many images, it will be a time-consuming task to repeatedly define the path of the images. To solve this, we can define this path in the YAML block of the post:---img_path: /img/path/---And then, the image source of Markdown can write the file name directly:![The flower](flower.png)The output will be:&amp;lt;img src=&quot;/img/path/flower.png&quot; alt=&quot;The flower&quot;&amp;gt;Preview ImageIf you want to add an image to the top of the post contents, specify the attribute path, width, height, and alt for the image:---image: path: /path/to/image/file width: 1000 # in pixels height: 400 # in pixels alt: image alternative text---Except for alt, all other options are necessary, especially the width and height, which are related to user experience and web page loading performance. The above section â€œSizeâ€ also mentions this.Starting from Chirpy v5.0.0, the attributes height and width can be abbreviated: height â†’ h, width â†’ w. In addition, the img_path can also be passed to the preview image, that is, when it has been set, the attribute path only needs the image file name.Pinned PostsYou can pin one or more posts to the top of the home page, and the fixed posts are sorted in reverse order according to their release date. Enable by:---pin: true---PromptsThere are several types of prompts: tip, info, warning, and danger. They can be generated by adding the class prompt-{type} to the blockquote. For example, define a prompt of type info as follows:&amp;gt; Example line for prompt.{: .prompt-info }SyntaxInline Code`inline code part`Filepath Hightlight`/path/to/a/file.extend`{: .filepath}Code BlockMarkdown symbols ``` can easily create a code block as follows:```This is a plaintext code snippet.```Specifying LanguageUsing ```{language} you will get a code block with syntax highlight:```yamlkey: value``` The Jekyll tag {% highlight %} is not compatible with this theme.Line NumberBy default, all languages except plaintext, console, and terminal will display line numbers. When you want to hide the line number of a code block, add the class nolineno to it:```shellecho &#39;No more line numbers!&#39;```{: .nolineno }Specifying the FilenameYou may have noticed that the code language will be displayed at the top of the code block. If you want to replace it with the file name, you can add the attribute file to achieve this:```shell# content```{: file=&quot;path/to/file&quot; }Liquid CodesIf you want to display the Liquid snippet, surround the liquid code with {% raw %} and {% endraw %}:{% raw %}```liquid{% if product.title contains &#39;Pack&#39; %} This product&#39;s title contains the word Pack.{% endif %}```{% endraw %}Or adding render_with_liquid: false (Requires Jekyll 4.0 or higher) to the postâ€™s YAML block.Learn MoreFor more knowledge about Jekyll posts, visit the Jekyll Docs: Posts." }, { "title": "Text and Typography", "url": "/posts/text-and-typography/", "categories": "Blogging, Demo", "tags": "typography", "date": "2019-08-08 11:33:00 +0800", "snippet": "This post is to show Markdown syntax rendering on Chirpy, you can also use it as an example of writing. Now, letâ€™s start looking at text and typography.TitlesH1 - headingH2 - headingH3 - headingH4 - headingParagraphI wandered lonely as a cloudThat floats on high oâ€™er vales and hills,When all at once I saw a crowd,A host, of golden daffodils;Beside the lake, beneath the trees,Fluttering and dancing in the breeze.ListsOrdered list Firstly Secondly ThirdlyUnordered list Chapter Section Paragraph Task list TODO Completed Defeat COVID-19 Vaccine production Economic recovery People smile again Description list Sun the star around which the earth orbits Moon the natural satellite of the earth, visible by reflected light from the sunBlock Quote This line shows the block quote.Prompts An example showing the tip type prompt. An example showing the info type prompt. An example showing the warning type prompt. An example showing the danger type prompt.Tables Company Contact Country Alfreds Futterkiste Maria Anders Germany Island Trading Helen Bennett UK Magazzini Alimentari Riuniti Giovanni Rovelli Italy Linkshttp://127.0.0.1:4000FootnoteClick the hook will locate the footnote1, and here is another footnote2.Images Default (with caption)Full screen width and center alignment Shadowshadow effect (visible in light mode) Left aligned Float to left â€œA repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space.â€ Float to right â€œA repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space. A repetitive and meaningless text is used to fill the space.â€ Mermaid SVG gantt title Adding GANTT diagram functionality to mermaid apple :a, 2017-07-20, 1w banana :crit, b, 2017-07-23, 1d cherry :active, c, after b a, 1dMathematicsThe mathematics powered by MathJax:\\[\\sum_{n=1}^\\infty 1/n^2 = \\frac{\\pi^2}{6}\\]When $a \\ne 0$, there are two solutions to $ax^2 + bx + c = 0$ and they are\\[x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}\\]Inline codeThis is an example of Inline Code.FilepathHere is the /path/to/the/file.extend.Code blockCommonThis is a common code snippet, without syntax highlight and line number.Specific LanguagesConsole$ env |grep SHELLSHELL=/usr/local/bin/bashPYENV_SHELL=bashShellif [ $? -ne 0 ]; then echo &quot;The command was not successful.&quot;; #do the needful / exitfi;Specific filename@import &quot;colors/light-typography&quot;, &quot;colors/dark-typography&quot;Reverse Footnote The footnote sourceÂ &amp;#8617; The 2nd footnote sourceÂ &amp;#8617; " } ]
